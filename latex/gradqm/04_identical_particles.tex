\documentclass[prx,12pt]{revtex4-2}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{color}
\usepackage{mathrsfs}
\usepackage{enumerate}
\usepackage{epigraph}
\usepackage{framed}
\usepackage[pdfborder={0 0 0},colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}

\def\ket#1{\left|#1\right\rangle}
\def\bra#1{\left\langle#1\right|}
\def\braket#1{\left\langle#1\right\rangle}

\usepackage{fancyhdr}
\fancyhf{}
\lhead{\tiny Y.~D.~Chong}
\rhead{\scriptsize Ch.~4: Identical Particles $|$ Graduate Quantum Mechanics}
\lfoot{}
\rfoot{\thepage}
\pagestyle{fancy}

\setlength{\parindent}{14pt}
\renewcommand{\theequation}{4.\arabic{equation}}

\renewcommand{\baselinestretch}{1.0}
\setlength{\parskip}{0.04in}
\setlength{\epigraphwidth}{.6\textwidth}

\def\thesection{4.\arabic{section}}
\def\thesubsection{\thesection.\arabic{subsection}}

\makeatletter
\renewcommand{\p@subsection}{}
\renewcommand{\p@subsubsection}{}
\makeatother

\begin{document}
\setcounter{page}{60}

\begin{center}
{\Large \textbf{Chapter 4: Identical Particles}}
\end{center}

\epigraph{These our actors,\\As I foretold you, were all spirits
  and\\Are melted into air, into thin air: \\And, like the baseless
  fabric of this vision,\\ The cloud-capp'd towers, the gorgeous
  palaces,\\ The solemn temples, the great globe itself,\\ Yea, all
  which it inherit, shall dissolve\\And, like this insubstantial
  pageant faded, \\ Leave not a rack behind.}{William Shakespeare,
  \textit{The Tempest}}

\section{Quantum states of identical particles}

In the previous chapter, we discussed how quantum theory applies to
systems of multiple particles.  That discussion omitted an important
feature of multi-particle systems, namely the fact that particles of
the same type have absolutely identical properties.  It turns out that
indistinguishability imposes a strong constraint on multi-particle
quantum mechanics.  Exploring this idea will lead us to a fundamental
re-interpretation of what ``particles'' are.

\subsection{Indistinguishability and exchange symmetry}
\label{sec:exchange}

Suppose we have two particles of the same type, e.g.~two electrons.
It is a fact of Nature that all electrons have identical physical
properties: the same mass, same charge, same total spin, etc.  As a
consequence, the single-particle Hilbert spaces of the two electrons
must be mathematically identical.  If the single-electron Hilbert
space is $\mathscr{H}^{(1)}$, the two-electron Hilbert space should be
\begin{equation}
  \mathscr{H}^{(2)} = \mathscr{H}^{(1)} \otimes \mathscr{H}^{(1)}.
  \label{2h}
\end{equation}
Since the two electrons have identical properties, any Hamiltonian
must treat them on the same footing.  An example of such a Hamiltonian
is
\begin{equation}
  \hat{H} = \frac{1}{2m_e} \Big(|\hat{\mathbf{p}}_1|^2 + |\hat{\mathbf{p}}_2|^2\Big) + \frac{e^2}{4\pi\varepsilon_0|\hat{\mathbf{r}}_1 - \hat{\mathbf{r}}_2|},
  \label{exampleH}
\end{equation}
consisting of the non-relativistic kinetic energies and the Coulomb
potential energy.  Operators $\hat{\mathbf{p}}_1$ and
$\hat{\mathbf{r}}_1$ act on electron 1, while $\hat{\mathbf{p}}_2$ and
$\hat{\mathbf{r}}_2$ act on electron 2.  Swapping $\hat{\mathbf{p}}_1
\leftrightarrow \hat{\mathbf{p}}_2$ and $\hat{\mathbf{r}}_1
\leftrightarrow \hat{\mathbf{r}}_2$ leaves $\hat{H}$ unchanged.

From our present understanding of multi-particle quantum mechanics,
the tensor product space \eqref{2h} allows for the definition of
observables and states that single out individual slots in the tensor
product.  For example, we can write down an observable
\begin{equation}
  \hat{p}_{z,1} = \hat{p}_z \otimes \hat{I}
\end{equation}
that singles out the momentum of the particle in slot 1.  Likewise, we
can define a state
\begin{equation}
  |\mathbf{r}_1\rangle |\mathbf{r}_2\rangle,
\end{equation}
which says that the particle in slot 1 is at position $\mathbf{r}_1$,
and the particle in slot 2 is in a different position $\mathbf{r}_2$.
If such observables and states are allowed, then the slot number has
physical meaning.  In principle, we can construct experiments that can
identify a given particle as being in slot 1 or slot 2.

Now, let us take the point of view of fundamental physics, and imagine
that the universe contains only these two particles.  From this
fundamental perspective, what we call slot 1 or slot 2 should just be
a matter of convention, not a physically meaningful (i.e., observable)
degree of freedom.  Contrary to the previous paragraph, it seems
reasonable to demand that the particles are
\textbf{indistinguishable}, in the sense that there is no physically
possible method to perform a measurement to ascertain whether a given
particle occupies slot 1 or slot 2.

How might indistinguishability be imposed on the theory?  To help
figure this out, let us first introduce a symmetry called
\textbf{exchange symmetry}, which refers to the exchange of the slots
in the tensor product.  The Hamiltonian \eqref{exampleH} evidently
possess this symmetry.  To formulate this more rigorously, we define
the \textbf{exchange operator}, $\hat{P}$, as follows.  Let
$\{|\mu\rangle\}$ be a basis for $\mathscr{H}^{(1)}$, so that tensor
products of the form $|\mu\rangle |\nu\rangle$ (constructed from
vectors both drawn from that basis) form a basis for
$\mathscr{H}^{(2)}$.  Then $\hat{P}$ is the linear operator satisfying
\begin{equation}
  \hat{P} |\mu\rangle |\nu\rangle = |\nu\rangle|\mu\rangle
\end{equation}
for all $\mu, \nu$.  Thus, when applied to general vectors,
\begin{align}
  \begin{aligned}\hat{P} \Big (\sum_{\mu\nu}
    \psi_{\mu\nu} |\mu\rangle|\nu\rangle \Big)
    \;&=  \sum_{\mu\nu} \psi_{\mu\nu} |\nu\rangle|\mu\rangle \\
    &= \sum_{\mu\nu} \psi_{\nu\mu} |\nu\rangle|\mu\rangle
    \;\;\;\textrm{(interchanging $\mu\leftrightarrow \nu$
      in the double sum).}\end{aligned}
\end{align}

\noindent
The exchange operator has the following properties:
\begin{enumerate}
\item $\hat{P}^2 = \hat{I},$ where $\hat{I}$ is the identity operator.

\item $\hat{P}$ is both unitary and Hermitian (see
  \hyperref[ex:1]{Exercise 1}).
  
\item The ``slot-swapping'' effect of $\hat{P}$ is independent of the
  basis of $\mathscr{H}^{(1)}$ (see \hyperref[ex:1]{Exercise 1}).

\item $\hat{P}$ commutes with any 2-particle operator that treats the
  two particles on equal footing, like the Hamiltonian in
  Eq.~\eqref{exampleH} (see \hyperref[ex:2]{Exercise 2}).
\end{enumerate}

According to Noether's theorem, any symmetry implies a conservation
law.  The exchange operator $\hat{P}$ is both Hermitian \textit{and}
unitary, so we can take the conserved quantity to be its eigenvalue,
$p$, which is called the \textbf{exchange parity}.  Since $\hat{P}^2 =
\hat{I}$, the possibilities are:
\begin{equation}
  p = \begin{cases}+1 & \textrm{(``symmetric\;state'')}, \;\;\textrm{or} \\ -1 & \textrm{(``antisymmetric\;state'').}\end{cases}
\end{equation}
If the 2-particle system is initially in an eigenstate of $\hat{P}$
with exchange parity $p$, and the Hamiltonian $\hat{H}$ commutes with
$\hat{P}$ (as it should), then $p$ is conserved for all time.

The exchange symmetry concept generalize to systems of more than two
particles.  For $N$ particles, we can define a set of exchange
operators $\hat{P}_{ij}$ such that
\begin{equation}
  \hat{P}_{ij} \; |\mu\rangle \cdots \underbrace{|\nu\rangle}_{\mathrm{slot}~i} \cdots \underbrace{|\lambda\rangle}_{\mathrm{slot}~j} \cdots
  = |\mu\rangle \cdots \underbrace{|\lambda\rangle}_{\mathrm{slot}~i} \cdots \underbrace{|\nu\rangle}_{\mathrm{slot}~j} \cdots,
\end{equation}
where $i,j\in\{1,2,\dots,N\}$ and $i < j$.  Note that the subscripts
in $\hat{P}_{ij}$ refer to the slots being swapped, not matrix
indices.

We now postulate that for any system of $N$ identical particles,
\begin{enumerate}
\item Any physically valid quantum states must be an eigenstate of
  every $\hat{P}_{ij}$.

\item The exchange parities $p_{ij}$ are all $+1$, or all $-1$.  The
  value is determined by the particle type; for example, photons
  always have $p_{ij} = 1$.

\item Any physically valid observable, including the Hamiltonian,
  commutes with every $\hat{P}_{ij}$.
\end{enumerate}

\noindent
If these statements hold, then we will have achieved our
previously-stated goal of making the particles indistinguishable.  At
any time, the $N$-particle state is an eigenstate of every
$\hat{P}_{ij}$, so no slot in the tensor product is singled out.  The
Hamiltonian commutes with every $\hat{P}_{ij}$, so this property is
conserved under time evolution.  Moreover, no observable is allowed to
treat the slots on unequal footing.

Let us henceforth assume that these postulates are true facts about
Nature.  Later, we will circle back to examine the condition of
particle distinguishability, which motivated these developments, from
a different point of view (see Section \ref{sec:outlook}).  In
Section~\ref{sec:distinguishability}, we will discuss the
circumstances under which particles can be treated as distinguishable,
despite being indistinguishable at a fundamental level.

The second postulate, in the above list, stated that the particle type
determines the exchange parity.  There are two cases:

\begin{itemize}
\item Particles with exchange parity $+1$ are called \textbf{bosons}.
  They include the elementary particles that carry the fundamental
  forces: photons (carriers of the electromagnetic force), gluons
  (carriers of the strong nuclear force), and $W$ and $Z$ bosons
  (carriers of the weak nuclear force).  Bosons that are composite
  particles (particles made of smaller particles) include alpha
  particles (helium-4 nuclei) and phonons (particles of sound).

\item Particles with exchange parity $-1$ are called
  \textbf{fermions}.  These include the elementary particles making up
  ordinary matter: electrons and quarks, as well as protons and
  neutrons, which are composite particles made of three quarks each.
  There are many other elementary fermions including positrons, muons,
  and neutrinos.
\end{itemize}

Whether a particle type is bosonic or fermionic is often referred to
as the choice of ``\textbf{particle statistics}''.  This is because
the exchange parity affects the statistical behavior of large
ensembles of particles: bosons obey the Bose-Einstein distribution,
while fermions obey the Fermi-Dirac distribution.  This has profound
implications for statistical mechanics, falling outside the scope of
this course.

For elementary particles, the \textbf{spin-statistics theorem} states
that particles with integer spin (i.e., total spin equal to an integer
multiple of $\hbar$) are bosons, whereas particles with half-integer
spin are fermions.  For instance, photons are spin-1 bosons, and
electrons are spin-1/2 fermions.  Though the spin-statistics theorem
is simple to state, \hyperref[cite:duck]{its proof} is surprisingly
complicated, seeming to require at minimum the combination of quantum
mechanics with relativity.  In non-relativistic settings, the
spin-statistics theorem holds in the vast majority of cases (e.g.,
electronic quasiparticles in ordinary solid-state materials are
spin-1/2 fermions, like elementary electrons), but it lacks the status
of a rigorous theorem and is violable.  The development of materials
containing emergent particles that violate the spin-statistics theorem
is an active area of research in condensed matter physics.

Incidentally, exchange operators are not the only way to formulate
particle indistinguishability.  \hyperref[cite:leinaas]{Leinaas and
  Myrheim} developed an interesting alternative description of
indistinguishable particles based on a redefinition of the quantum
wavefunction.  Normally, a multi-particle wavefunction
$\Psi(\mathbf{r}_1, \dots, \mathbf{r}_N)$ is a function that maps a
vector $(\mathbf{r}_1, \dots, \mathbf{r}_N)$ to a complex number.  In
Leinaas and Myrheim's view, for identical particles the input is not a
vector, but a more complicated mathematical object with built-in
invariance under slot exchange: $(\dots, \mathbf{r}_i, \dots,
\mathbf{r}_j,\dots ) \equiv (\dots, \mathbf{r}_j, \dots,
\mathbf{r}_i,\dots )$.  By analyzing the properties of such functions,
bosonic or fermionic wavefunctions can be constructed.  One startling
outcome of this analysis is that the distinction between fermions and
bosons is not absolute.  In two spatial dimensions, there is the
fascinating possibility of particles called \textbf{anyons}, which are
intermediate between fermions and bosons.  A proper discussion of
anyons requires knowledge about magnetic vector potentials in quantum
mechanics, which will be discussed in Chapter 5; after having gone
through that chapter, you may refer to Appendix F, which gives a brief
introduction to the theory of anyons.

\subsection{Bosons}
\label{sec:bosons}

A state of $N$ bosons must be symmetric under every possible exchange
operator:
\begin{equation}
  \hat{P}_{ij}\; |\psi\rangle = |\psi\rangle.
  \label{sym}
\end{equation}
There is a standard way to construct multi-particle states obeying
this symmetry condition.  First, consider a two-boson system ($N =
2$).  If both bosons occupy the same single-particle state,
$|\mu\rangle \in \mathscr{H}^{(1)}$, Eq.~\eqref{sym} can be satisfied
using the two-boson state
\begin{equation}
  |\mu,\mu\rangle = |\mu\rangle  |\mu\rangle.
  \label{mumu}
\end{equation}
Next, suppose the bosons occupy two single-particle states,
$|\mu\rangle$ and $|\nu\rangle$, which are orthonormal.  The two-boson
state cannot be $|\mu\rangle |\nu\rangle$, as this fails to satisfy
Eq.~\eqref{sym}.  Instead, let
\begin{equation}
  |\mu,\nu\rangle = \frac{1}{\sqrt{2}} \Big( |\mu\rangle |\nu\rangle +
  |\nu\rangle |\mu\rangle\Big).
  \label{bosonmunu}
\end{equation}
You can check that $1/\sqrt{2}$ is the right normalization factor.
This state has the right exchange symmetry:
\begin{equation}
  \hat{P}_{12}\,|\mu,\nu\rangle \;=\; \frac{1}{\sqrt{2}}
  \Big( |\nu\rangle  |\mu\rangle + |\mu\rangle  |\nu\rangle\Big)
  \,=\, |\mu, \nu\rangle.
\end{equation}

We can generalize the above construction to $N$ bosons, using the $N$
single-particle states
\begin{equation}
  |\phi_1\rangle, \, |\phi_2\rangle, \, |\phi_3\rangle, \, \dots, |\phi_N\rangle.
\end{equation}
Each $|\phi_j\rangle$ is drawn from an orthonormal basis
$\{|\mu\rangle\}$ for $\mathscr{H}^{(1)}$.  Duplicate draws are
allowed, meaning that it is okay for two or more $|\phi_j\rangle$'s to
be drawn from the same basis state.  Then the $N$-boson state is
\begin{equation}
  |\phi_1,\phi_2,\dots,\phi_N\rangle = \mathcal{N} \sum_p
  \Big(|\phi_{p(1)}\rangle  |\phi_{p(2)}\rangle  |\phi_{p(3)}\rangle  \cdots
  |\phi_{p(N)}\rangle\Big).
  \label{nbosons}
\end{equation}
The sum is taken over all $N!$ permutations of $(1,2,\dots,N)$, with
$p(j)$ denoting what $j$ is permuted to.  The normalization constant
$\mathcal{N}$ will be discussed later.

\begin{framed}
\noindent
\textit{Example}---Consider a system of $N = 3$ bosons, with two
particles in single-particle state $|\mu\rangle$ and one in an
orthogonal single-particle state $|\nu\rangle$.  That is to say,
\begin{align}
  \begin{aligned}
    |\phi_1\rangle &= |\phi_2\rangle = |\mu\rangle, \\
    |\phi_3\rangle &= |\nu\rangle.
  \end{aligned}
\end{align}
To get the 3-boson state, we plug this into Eq.~\eqref{nbosons}.  The
sum has one term for each permutation of the sequence $(1,2,3)$, and
there are $3! = 6$ such permutations:
\begin{align}
  \begin{aligned}
    &(1,2,3), \;\; (2,3,1), \;\;(3,1,2) \\
    &(1,3,2), \;\; (3,2,1), \;\;(2,1,3).
  \end{aligned}
\end{align}
Hence we get (we'll discuss the normalization later):
\begin{align}
  \begin{aligned}
    |\phi_1,\phi_2,\phi_3\rangle &= \frac{1}{\sqrt{12}} \Big( \;
    |\phi_1\rangle|\phi_2\rangle|\phi_3\rangle +
    |\phi_2\rangle|\phi_3\rangle|\phi_1\rangle +
    |\phi_3\rangle|\phi_1\rangle|\phi_2\rangle \\
    &\qquad\quad\, +
    |\phi_1\rangle|\phi_3\rangle|\phi_2\rangle +
    |\phi_3\rangle|\phi_2\rangle|\phi_1\rangle +
    |\phi_2\rangle|\phi_1\rangle|\phi_3\rangle\Big) \\
    &= \frac{1}{\sqrt{3}} \;\, \Big(\;
    |\mu\rangle|\mu\rangle|\nu\rangle +
    |\mu\rangle|\nu\rangle|\mu\rangle +
    |\nu\rangle|\mu\rangle|\mu\rangle\Big).
  \end{aligned}
\end{align}
We can verify that this is an eigenstate of every exchange symmetry
operator:
\begin{align}
  \hat{P}_{12}|\phi_1,\phi_2,\phi_3\rangle
    &= \frac{1}{\sqrt{3}} \Big(
  |\mu\rangle|\mu\rangle|\nu\rangle +
  |\nu\rangle|\mu\rangle|\mu\rangle +
  |\mu\rangle|\nu\rangle|\mu\rangle\Big)
  = |\phi_1,\phi_2,\phi_3\rangle \label{3bosonex1} \\
  \hat{P}_{23}|\phi_1,\phi_2,\phi_3\rangle
  &= \frac{1}{\sqrt{3}} \Big(
  |\mu\rangle|\nu\rangle|\mu\rangle +
  |\mu\rangle|\mu\rangle|\nu\rangle +
  |\nu\rangle|\mu\rangle|\mu\rangle\Big)
  = |\phi_1,\phi_2,\phi_3\rangle\\
  \hat{P}_{13}|\phi_1,\phi_2,\phi_3\rangle
  &= \frac{1}{\sqrt{3}} \Big(
  |\nu\rangle|\mu\rangle|\mu\rangle +
  |\mu\rangle|\nu\rangle|\mu\rangle +
  |\mu\rangle|\mu\rangle|\nu\rangle\Big)
  = |\phi_1,\phi_2,\phi_3\rangle. \label{3bosonex3}
\end{align}
\end{framed}

To see why the state $|\phi_1,\dots,\phi_N\rangle$ defined in
Eq.~\eqref{nbosons} is symmetric under every exchange operator,
consider a representative term in the sum, corresponding to a
permutation $p$.  When an exchange operator $\hat{P}_{ij}$ acts on it,
the single-particle states in slots $i$ and $j$ swap places:
\begin{align}
  \hat{P}_{ij} \Big(\cdots  \underbrace{|\phi_{p(i)}\rangle}_{\mathrm{slot}\,i}  \cdots  \underbrace{|\phi_{p(j)}\rangle}_{\mathrm{slot}\,j}\cdots\Big) = \Big(\cdots  \underbrace{|\phi_{p(j)}\rangle}_{\mathrm{slot}\,i}  \cdots  \underbrace{|\phi_{p(i)}\rangle}_{\mathrm{slot}\,j}\cdots\Big).
\label{pboson}
\end{align}
The tensor product on the right represents a different permutation of
$(1, \dots, N)$, which we denote by $p'$.  The $p'$ permutation occurs
as another term in $|\phi_1,\dots,\phi_N\rangle$, and applying
$\hat{P}_{ij}$ turns this term into the $p$ term.  Thus,
$\hat{P}_{ij}$ merely swaps two terms in the sum, without affecting
the overall sum.  This holds for every $p$, so $\hat{P}_{ij}$ leaves
$|\phi_1,\dots,\phi_N\rangle$ unchanged.

If the preceding paragraph is unclear, try tracing its logic using
Eqs.~\eqref{3bosonex1}--\eqref{3bosonex3}.

As for the normalization constant in Eq.~\eqref{nbosons}, it can be
shown that
\begin{equation}
  \mathcal{N} = \sqrt{\frac{1}{N!\, \prod_\mu n_\mu!}},
  \label{bosonnorm}
\end{equation}
where $n_\mu$ denotes the number of particles occupying the
single-particle basis state $|\varphi_\mu\rangle$, such that $\sum_\mu
n_\mu = N$.  The proof of Eq.~\eqref{bosonnorm} is left as an exercise
(\hyperref[ex:boson_norm]{Exercise 3}).

In place of Eq.~\eqref{nbosons}, $N$-boson states can alternatively be
expressed as
\begin{equation}
  |\phi_1,\phi_2,\dots,\phi_N\rangle = \mathcal{M} \; \sum_{p,\,\textrm{no dupes}}\,
  \Big(|\phi_{p(1)}\rangle  |\phi_{p(2)}\rangle  |\phi_{p(3)}\rangle  \cdots
  |\phi_{p(N)}\rangle\Big),
  \label{nbosons2}
\end{equation}
where the sum omits duplicate permutations (i.e., those yielding the
same tensor product).  For instance, in the previous example of
$|\phi_1\rangle = |\phi_2\rangle = |\mu\rangle$ and $|\phi_3\rangle =
|\nu\rangle$, instead of having $|\phi_1 \rangle |\phi_2 \rangle
|\phi_3 \rangle$ and $|\phi_2 \rangle |\phi_1 \rangle |\phi_3 \rangle$
appear separately in the sum, we only write it once, as both
permutations ultimately refer to $|\mu \rangle |\mu \rangle |\nu
\rangle$.  If we adopt this convention, the normalization condition
\eqref{bosonnorm} is replaced by
\begin{equation}
  \mathcal{M} = \sqrt{\frac{\prod_\mu n_\mu!}{N!}}.
\end{equation}

The $N$-boson states constructed using Eq.~\eqref{nbosons}---or, if
you prefer, Eq.~\eqref{nbosons2}---have an important property: if we
build two such states from different sets of single-particle states,
they are orthogonal.  To prove this, take two sets of single-particle
states, $\{\phi_1,\dots,\phi_N\}$ and $\{\phi_1,\dots,\phi_N'\}$.  The
two $N$-boson states, constructed by Eq.~\eqref{nbosons}, have the
inner product
\begin{align}
  \langle \phi_1, \dots, \phi_N | \phi_1',\dots, \phi_N'\rangle
  &= \mathcal{NN'}
  \sum_{pp'} \langle \phi_{p(1)} | \phi'_{p'(1)}\rangle \dots
  \langle \phi_{p(N)} | \phi'_{p'(N)}\rangle.
  \label{bosorthog}
\end{align}
Take each term in the double sum, involving permutations $p$ and $p'$.
If \textit{every} bra $\langle \phi_{p(j)}|$ matches the corresponding
ket $|\phi_{p'(j)}\rangle$, the term is unity; otherwise it is zero
since at least one of the bra-kets in the product vanishes.  There is
some $p, p'$ achieving this condition if and only if the two sets of
single-particle states are equivalent: i.e., $(\phi_1,\dots, \phi_N)
\equiv (\phi_1',\dots, \phi_N')$ up to a permutation, in which case $|
\phi_1, \dots, \phi_N \rangle$ and $| \phi_1',\dots, \phi_N'\rangle$
refer to the same state.

\subsection{Fermions}
\label{sec:fermions}

A state of $N$ fermions must be antisymmetric under every exchange
operator $\hat{P}_{ij}$:
\begin{equation}
  \hat{P}_{ij}\; |\psi\rangle = -|\psi\rangle.
\end{equation}
Similar to the bosonic case, we can construct $N$-fermion states from
a set of single-particle states.  First, consider $N=2$.  If the
fermions occupy the single-particle states $|\mu\rangle$ and
$|\nu\rangle$, which are orthonormal, then the appropriate 2-fermion
state is
\begin{equation}
  |\mu,\nu\rangle = \frac{1}{\sqrt{2}}
  \Big(|\mu\rangle|\nu\rangle - |\nu\rangle|\mu\rangle\Big).
  \label{two_fermions}
\end{equation}
We can easily check that this is antisymmetric:
\begin{equation}
  \hat{P}_{12} |\mu,\nu\rangle = \frac{1}{\sqrt{2}}
  \Big(|\nu\rangle|\mu\rangle - |\mu\rangle|\nu\rangle\Big)
  = - |\mu,\nu\rangle.
\end{equation}
If $|\mu\rangle$ and $|\nu\rangle$ are the same single-particle state,
Eq.~\eqref{two_fermions} doesn't work, since the two terms would
cancel to give the zero vector, which is not a valid quantum state.
This is a manifestation of the \textbf{Pauli exclusion principle},
which states that two fermions cannot occupy the same single-particle
state.

To generalize this, let $|\phi_1\rangle$, $|\phi_2\rangle$, $\dots,
|\phi_N\rangle$ be a set of $N$ orthonormal single-particle states,
which are occupied by identical fermions.  Then the $N$-fermion state
is
\begin{equation}
  |\phi_1,\dots,\phi_N\rangle = \frac{1}{\sqrt{N!}} \sum_p s(p)\, |\phi_{p(1)}\rangle |\phi_{p(2)}\rangle \cdots |\phi_{p(N)}\rangle.
  \label{Nfermions}
\end{equation}
Here, the sum is taken over every permutation $p$ of the sequence
$\{1,2,\dots,N\}$, and each term in the sum has a coefficient $s(p) =
\pm1$ denoting the \textbf{parity} of permutation $p$, defined below.
The $1/\sqrt{N!}$ prefactor can be shown to normalize
$|\phi_1,\dots,\phi_N\rangle$ to unity.

Any permutation $p$ can be generated by starting from the trivial
sequence $(1, 2, \dots, N)$, and repeatedly applying transpositions
(i.e., choosing two slots and swapping them).  The parity $s(p)$ is
defined as $+1$ if $p$ is generated by an even number of
transpositions, and $-1$ if it is generated by an odd number of
transpositions.  Although it is generally possible to generate $p$
from different sequences of transpositions, a result called the
``parity theorem'' states that these all give the same $s(p)$.  In
other words, $s(p)$ is a property of $p$ itself.

Let's look at a couple of examples.

\begin{framed}
\noindent
\textit{Example}---Consider $N=2$.  The sequence $(1,2)$
has two permutations:
\begin{align}
  \begin{aligned}
    p_1 : (1,2) &\rightarrow (1,2), \;\;\;s = +1 \\ p_2 : (1,2) &\rightarrow (2,1), \;\;\;s = -1.\end{aligned}
\end{align}
Plugging these into Eq.~\eqref{Nfermions} yields
\begin{equation*}
  |\phi_1,\phi_2\rangle = \frac{1}{\sqrt{2}}
  \Big(|\phi_1\rangle|\phi_2\rangle - |\phi_2\rangle|\phi_1\rangle\Big),
\end{equation*}
which is equivalent to the previously-discussed example
\eqref{two_fermions}.
\end{framed}

\begin{framed}
\noindent
\textit{Example}---For $N=3$, the sequence $(1,2,3)$ has $3!=6$ permutations:
\begin{align}
  \begin{aligned}
  p_1 : (1,2,3) &\rightarrow (1,2,3), \;\;\;s = +1 \\
  p_2 : (1,2,3) &\rightarrow (2,1,3), \;\;\;s = -1 \\
  p_3 : (1,2,3) &\rightarrow (2,3,1), \;\;\;s = +1 \\
  p_4 : (1,2,3) &\rightarrow (3,2,1), \;\;\;s = -1 \\
  p_5 : (1,2,3) &\rightarrow (3,1,2), \;\;\;s = +1 \\
  p_6 : (1,2,3) &\rightarrow (1,3,2), \;\;\;s = -1.\end{aligned}
\end{align}
In this list, we start from $(1,2,3)$ and apply one transposition at a
time to generate the next line.  Hence, the signs of $s(p)$ alternate.
This sequence of transpositions is not unique; for example, we can
generate $p_4$ by starting from $(1,2,3)$ and transposing 1 and 3.
This involves one transposition, rather than three transpositions as
in the above list.  But both routes give the same parity, $s(p_4) =
-1$.

Plugging these permutations into Eq.~\eqref{Nfermions}, we obtain the
3-fermion state
\begin{align}
  \begin{aligned}
    |\phi_1, \phi_2, \phi_3\rangle
    &= \frac{1}{\sqrt{6}} \Big(
    |\phi_1\rangle |\phi_2\rangle |\phi_3\rangle
    - |\phi_2\rangle |\phi_1\rangle |\phi_3\rangle
    + |\phi_2\rangle |\phi_3\rangle |\phi_1\rangle \\
    & \qquad\; 
    - |\phi_3\rangle |\phi_2\rangle |\phi_1\rangle
    + |\phi_2\rangle |\phi_3\rangle |\phi_1\rangle
    - |\phi_1\rangle |\phi_3\rangle |\phi_2\rangle \Big).
  \end{aligned}
\end{align}
\end{framed}

Let us examine the properties of the $N$-fermion states constructed
from Eq.~\eqref{Nfermions}.

Firstly, the $N$-fermion state obeys the Pauli exclusion principle: it
is valid only if the single-particle states used to construct it,
$\{|\phi_1\rangle, \dots, |\phi_N\rangle\}$, contain no duplicates.
If there is a duplicate, then each term in the sum within
Eq.~\eqref{Nfermions} must contain, somewhere in the tensor product,
two kets referring to the same single-particle state $|\mu\rangle$,
say in slots $i$ and $j$:
\begin{equation*}
s(p)\big( \cdots
      \underbrace{|\phi_{p(i)}\rangle}_{= |\mu\rangle} \cdots
      \underbrace{|\phi_{p(j)}\rangle}_{= |\mu\rangle} \cdots \big).
\end{equation*}
But there is another permutation, $p'$, which is the same as $p$
except with the $i$ and $j$ slots transposed.  That term appears with
a parity of the opposite sign.  This implies that the terms in the sum
cancel pair-wise, so $|\phi_1,\dots,\phi_N\rangle = 0$, which is not a
valid quantum state.

Secondly, we can verify that the $N$-fermion state is totally
antisymmetric.  Consider what happens when we apply an exchange
operator $\hat{P}_{ij}$ to a term in the sum in Eq.~\eqref{Nfermions}:
\begin{align}
  \begin{aligned}
    \hat{P}_{ij} \Big[s(p)\big( \cdots
      \underbrace{|\phi_{p(i)}\rangle}_{\textrm{slot}\,i} \cdots
      \underbrace{|\phi_{p(j)}\rangle}_{\textrm{slot}\,j} \cdots \big)\Big]
    = s(p)\big( \cdots
      \underbrace{|\phi_{p(j)}\rangle}_{\textrm{slot}\,i} \cdots
      \underbrace{|\phi_{p(i)}\rangle}_{\textrm{slot}\,j} \cdots \big)
  \end{aligned}
  \label{fermionswap}
\end{align}
The single-particle states for $p(i)$ and $p(j)$ have exchanged
places.  This yields a new sequence of state labels, corresponding to
a new permutation which we call $p'$.  Since $p'$ differs from $p$ by
a single transposition (of slots $i$ and $j$), $s(p') = - s(p)$.
Hence, \eqref{fermionswap} is the negative of another term in
Eq.~\eqref{Nfermions}.  By the same logic, applying $\hat{P}_{ij}$ to
the $p'$ term yields the negative of the $p$ term.  We thereby
conclude that
\begin{equation}
  \hat{P}_{ij} |\phi_1,\dots,\phi_N\rangle = - |\phi_1,\dots,\phi_N\rangle.
\end{equation}

Thirdly, two $N$-fermion states constructed using
Eq.~\eqref{Nfermions} are orthogonal unless they consist of identical
sets of single-particle states.  In other words, $\langle \phi_1,
\dots, \phi_N| \phi_1', \dots, \phi_N'\rangle = 0$ unless $(\phi_1,
\dots, \phi_N) \equiv (\phi_1', \dots, \phi_N')$ are equivalent up to
a permutation.  The proof follows the same logic as the $N$-boson case
discussed earlier [see Eq.~\eqref{bosorthog}].

\subsection{Distinguishing particles}
\label{sec:distinguishability}

It might have struck you that the requirement of particle
indistinguishbility, introduced in Section~\ref{sec:exchange}, could
undermine what we said about partial measurements and entanglement
from Chapter 3.  For example, in the EPR thought experiment, we used
the singlet state
\begin{equation}
  |\psi_{\mathrm{EPR}}\rangle = \frac{1}{\sqrt{2}} \Big(|\!\uparrow\rangle |\!\downarrow\rangle
  - |\!\downarrow\rangle |\!\uparrow\rangle \Big),
  \label{EPR}
\end{equation}
which looks like an antisymmetric state.  Does this mean we can only
prepare this state with fermions?  More disturbingly, measuring
${S}_z$ on one particle collapses the 2-particle state into
$|\!\uparrow\rangle |\!\downarrow\rangle$ or $|\!\downarrow\rangle
|\!\uparrow\rangle$, which are not eigenstates of $\hat{P}_{12}$.  Is
this now forbidden?

The answer to each question is no.  The confusion arises because
identical particles are only indistinguishable at a
\textit{fundamental} level, meaning when all degrees of freedom are
accounted for.  If we deal with a restricted set of degrees of
freedom, like Eq.~\eqref{EPR} which only involves the particles'
spins, then particles \textit{can} be distinguished from each other.

As an illustration, let us see how the EPR thought experiment is done
with two identical bosons.  Apart from the spin degree of freedom, the
particles must also have a position degree of freedom; that's how we
can assign one particle to each location (Alpha Centauri and
Betelgeuse).  This means the single-particle Hilbert space has the
form
\begin{equation}
  \mathscr{H}^{(1)} = \mathscr{H}_{\mathrm{spin}} \otimes \mathscr{H}_{\mathrm{position}}.
\end{equation}
For simplicity, let us treat position as a twofold degree of freedom,
treating $\mathscr{H}_{\mathrm{position}}$ as a 2D space spanned by
the basis $\{|A\rangle, |B\rangle\}$.

Previously, we used $|\!\uparrow\rangle |\!\downarrow\rangle$ to
denote a spin-up particle at $A$ and a spin-down particle at $B$.
This implicitly assumed that $A$ refers to the left slot of the tensor
product, and $B$ refers to the right slot.  Using the position degrees
of freedom, we can instead write this as
\begin{equation}
  |\uparrow, A;\; \downarrow, B\rangle = \frac{1}{\sqrt{2}}
  \Big(|\!\uparrow\rangle|A\rangle |\!\downarrow\rangle|B\rangle
  + |\!\downarrow\rangle|B\rangle |\!\uparrow\rangle|A\rangle \Big),
  \label{asym1}
\end{equation}
where the kets are written in the following order:
\begin{equation}
  \Big[
    (\textrm{spin 1}) \otimes (\textrm{position 1}) \Big]
  \otimes
  \Big[
    (\textrm{spin 2}) \otimes (\textrm{position 2}) \Big].
  \label{order1}
\end{equation}
The exchange operator $\hat{P}_{12}$ swaps the two particles' Hilbert
spaces, which includes both position and spin.  Hence,
Eq.~\eqref{asym1} is explicitly symmetric:
\begin{align}
  \begin{aligned}
  \hat{P}_{12} \, |\uparrow, A\,;\, \downarrow, B\rangle &= \frac{1}{\sqrt{2}}
  \Big(|\!\downarrow\rangle|B\rangle |\!\uparrow\rangle|A\rangle
  + |\!\uparrow\rangle|A\rangle |\!\downarrow\rangle|B\rangle \Big) \\
  &= |\uparrow, A\,;\, \downarrow, B\rangle.
  \end{aligned}
\end{align}
Likewise, if there is a spin-down particle at $A$ and a spin-up
particle at $B$, the bosonic 2-particle state is
\begin{equation}
  |\downarrow, A\,;\, \uparrow, B\rangle = \frac{1}{\sqrt{2}}
  \Big(|\!\downarrow\rangle|A\rangle |\!\uparrow\rangle|B\rangle
  + |\!\uparrow\rangle|B\rangle |\!\downarrow\rangle|A\rangle \Big).
  \label{asym2}
\end{equation}
Using Eqs.~\eqref{asym1} and \eqref{asym2}, we can rewrite the EPR
singlet state \eqref{EPR} as
\begin{align}
  \begin{aligned}
    |\psi_{\mathrm{EPR}}\rangle &= \frac{1}{\sqrt{2}} \Big(
    |\!\uparrow, A\,;\, \downarrow, B\rangle - |\downarrow, A\,;\, \uparrow, B\rangle \Big)\\
    &= \frac{1}{2} \Big(\,
    |\!\uparrow\rangle|A\rangle |\!\downarrow\rangle|B\rangle
    + |\!\downarrow\rangle|B\rangle |\!\uparrow\rangle|A\rangle
    - |\!\downarrow\rangle|A\rangle |\!\uparrow\rangle|B\rangle
    - |\!\uparrow\rangle|B\rangle |\!\downarrow\rangle|A\rangle \Big).
    \label{epr1}
  \end{aligned}
\end{align}

Eq.~\eqref{epr1} can be further simplified by re-ordering the tensor
product slots.  In place of \eqref{order1}, let us order by spins and
then positions:
\begin{equation}
  \Big[
    (\textrm{spin 1}) \otimes (\textrm{spin 2}) \Big]
  \otimes
  \Big[
    (\textrm{position 1}) \otimes (\textrm{position 2}) \Big].
  \label{order2}
\end{equation}
With this convention, Eq.~\eqref{epr1} becomes
\begin{equation}
  |\psi_{\mathrm{EPR}}\rangle = \frac{1}{\sqrt{2}} \Big(
  |\!\uparrow\rangle |\!\downarrow\rangle - |\!\downarrow\rangle |\!\uparrow\rangle \Big)  
  \otimes \frac{1}{\sqrt{2}} \Big(
  |A\rangle |B\rangle - |B\rangle |A\rangle \Big).
  \label{eprsplit}
\end{equation}
The spin degrees of freedom indeed form an antisymmetric combination,
as described by Eq.~\eqref{EPR}.  But the position degrees of freedom,
which we previously did not explicit monitor, are also antisymmetric.
The overall state is therefore symmetric, consistent with the two
particles being identical bosons.

Now suppose we measure $S_z$ on the particle at $A$, and find that it
is spin-up.  This measurement outcome is associated with a projector,
which in the ordering convention \eqref{order1} can be written as
\begin{equation}
  \hat{\Pi} = \Big(|\!\uparrow\rangle \langle\uparrow\!| \otimes |A\rangle \langle A|\Big)
  \otimes\Big( \hat{I} \otimes \hat{I}\Big)
  + \Big(\hat{I} \otimes \hat{I} \Big) \otimes \Big(
  |\!\uparrow\rangle \langle\uparrow\!| \otimes |A\rangle \langle A| \Big).
\end{equation}
This operator treats the two particles on equal footing, and commutes
with $\hat{P}_{12}$.  Applying it to the EPR state, and renormalizing,
yields the post-collapse state
\begin{equation}
  |\psi'\rangle \;=\;
  \frac{1}{\sqrt{2}} \Big(
    |\!\uparrow\rangle|A\rangle |\!\downarrow\rangle|B\rangle
    + |\!\downarrow\rangle|B\rangle |\!\uparrow\rangle|A\rangle \Big).
\end{equation}
This is precisely the bosonic state $|\uparrow,A;\downarrow,B\rangle$
defined in Eq.~\eqref{asym1}, which is equivalent to the singlet state
\eqref{epr1}.  From this, we conclude that exchange symmetry is
compatible with all our previous discussions about partial
measurements, entanglement, etc.

\section{Second quantization}

In the usual tensor product notation, symmetric and antisymmetric
states become quite cumbersome to deal with when the number of
particles is large.  We will now introduce a formalism called
\textbf{second quantization}, which greatly simplifies manipulations
of such multi-particle states.  (The reason for the name ``second
quantization'' will not be apparent until later; it is a bad name, but
one we are stuck with for historical reasons.)

We start by introducing a convenient way to specify multi-particle
states, called the \textbf{occupation number representation}.  Suppose
$\{|1\rangle, |2\rangle, |3\rangle, \cdots\}$ is an orthonormal basis
for the single-particle Hilbert space $\mathscr{H}^{(1)}$.  From
Sections~\ref{sec:bosons} and \ref{sec:fermions}, we know that the
single-particle states can be used to construct $N$-particle bosonic
or fermionic states.  The construction depends on how many particles
are occupying each single-particle state.  Letting $n_j$ denote the
occupancy number of state $|j\rangle$, we can define
\begin{equation*}
  |n_1,n_2,n_3,\dots\rangle
\end{equation*}
as the corresponding bosonic state constructed using
Eq.~\eqref{nbosons}, or the fermionic state constructed using
Eq.~\eqref{Nfermions}.

\begin{framed}
\noindent
\textit{Example}---The 2-particle state $|0,2,0,0,\dots\rangle$ has
both particles in the single-particle state $|2\rangle$.  This is only
possible if the particles are bosons, since fermions cannot share the
same state.  Hence,
\begin{equation}
  |0,2,0,0,\dots\rangle \equiv |2\rangle|2\rangle.
\end{equation}
\end{framed}

\begin{framed}
\noindent
\textit{Example}---The 3-particle state $|1,1,1,0,0,\dots\rangle$ has
one particle each occupying $|1\rangle$, $|2\rangle$, and $|3\rangle$.
If the particles are bosons, this corresponds to the symmetric state
\begin{align}
  \begin{aligned}|1,1,1,0,0,\dots\rangle &\equiv \frac{1}{\sqrt{6}}\Big(|1\rangle|2\rangle|3\rangle + |3\rangle|1\rangle|2\rangle + |2\rangle|3\rangle|1\rangle \\&\;\qquad+ |1\rangle|3\rangle|2\rangle + |2\rangle|1\rangle|3\rangle + |3\rangle|2\rangle|1\rangle \Big).
  \end{aligned}
\end{align}
And if the particles are fermions,
\begin{align}
  \begin{aligned}|1,1,1,0,0,\dots\rangle &\equiv \frac{1}{\sqrt{6}} \Big(|1\rangle|2\rangle|3\rangle + |3\rangle|1\rangle|2\rangle + |2\rangle|3\rangle|1\rangle \\&\;\qquad - |1\rangle|3\rangle|2\rangle - |2\rangle|1\rangle|3\rangle - |3\rangle|2\rangle|1\rangle\Big).
  \end{aligned}
\end{align}
\end{framed}

\subsection{Fock space}

There is a subtle point we have glossed over: what Hilbert space do
these state vectors reside in?  For instance, the state
$|0,2,0,0,\dots\rangle$ is a bosonic 2-particle state, which is a
vector in the 2-particle Hilbert space:
\begin{equation}
  |0,2,0,0,\dots\rangle \in \mathscr{H}^{(2)} = \mathscr{H}^{(1)}\otimes
\mathscr{H}^{(1)}.
\end{equation}
However, this statement is over-broad, because $\mathscr{H}^{(2)}$
also contains 2-particle states that do not satisfy the bosonic
exchange symmetry.  We can therefore shrink the Hilbert space to the
space of 2-particle state vectors with exchange parity +1, denoted by
$\mathscr{H}^{(2)}_+$:
\begin{equation}
  |0,2,0,0,\dots\rangle \in \mathscr{H}^{(2)}_+.
\end{equation}
In a similar fashion, for the 3-particle state
$|1,1,1,0,\dots\rangle$, we can write
\begin{equation}
  |1,1,1,0,\dots\rangle \in
  \begin{cases}
    \mathscr{H}^{(3)}_+ & \textrm{(for bosons)} \\
    \mathscr{H}^{(3)}_- & \textrm{(for fermions)},
  \end{cases}
\end{equation}
where $\mathscr{H}^{(3)}_\pm$ is the space of 3-particle with exchange
parity +1 or -1, respectively.

In this framework, if two state have different total particle number
$N = n_1 + n_2 + \cdots$, they lie in different spaces.  But we can
consolidate them by defining the space of all multi-particle states
regardless of $N$, called the \textbf{Fock space}.  In the formal
language of linear algebra,
\begin{equation}
  \mathscr{H}_\pm^F = \mathscr{H}^{(0)} \oplus \mathscr{H}^{(1)} \oplus \mathscr{H}^{(2)}_\pm \oplus \mathscr{H}^{(3)}_\pm \oplus \mathscr{H}^{(4)}_\pm \oplus \cdots
  \label{fock}
\end{equation}
Here, the $\pm$ subscript specifies whether we are dealing with bosons
($+$) or fermions ($-$).  The $\oplus$ symbol denotes the
\textbf{direct sum} operation, which combines vector spaces by
grouping their basis vectors into a larger basis set.  For example,
\begin{align}
  \begin{aligned}
    &\mathscr{H}_1~\textrm{has basis}~\big\{ |a\rangle, |b\rangle \big\}, \\
    &\mathscr{H}_2~\textrm{has basis}~\big\{ |c\rangle, |d\rangle, |e\rangle \big\}
  \end{aligned}
  \;\;\Rightarrow\;\;\;
\mathscr{H}_1 \oplus \mathscr{H}_2~\textrm{has basis}~\big\{ |a\rangle, |b\rangle, |c\rangle, |d\rangle, |e\rangle \big\}.
\end{align}
Evidently,
\begin{equation}
  \mathrm{dim}\left[\mathscr{H}_1 \oplus \mathscr{H}_2\right]
  = \mathrm{dim}\left[\mathscr{H}_1\right] +
  \mathrm{dim}\left[\mathscr{H}_2\right].
\end{equation}
This is different for the tensor product operation:
\begin{equation}
  \mathrm{dim}\left[\mathscr{H}_1 \otimes \mathscr{H}_2\right]
  = \mathrm{dim}\left[\mathscr{H}_1\right] 
  \mathrm{dim}\left[\mathscr{H}_2\right].
\end{equation}

The upshot is that we can regard any state written using the the
occupation number representation, $|n_1,n_2,n_3,\dots\rangle$, as a
vector in $\mathscr{H}_\pm^F$, without worrying about the total
particle number.  Moreover, such states form a complete basis for
$\mathscr{H}^{F}_\pm$.

In Eq.~\eqref{fock}, the first term of the direct sum,
$\mathscr{H}^{(0)}$, is the ``Hilbert space of 0 particles''.  This
Hilbert space contains only one distinct state vector, denoted by
\begin{equation}
  |\varnothing\rangle \equiv |0,0,0,0,\dots\rangle.
\end{equation}
This refers to the \textbf{vacuum state}, a quantum state in which
there are literally no particles.  Note that $|\varnothing\rangle$ is
\textit{not} the same thing as a zero vector; it has the standard
normalization
\begin{equation}
  \langle\varnothing|\varnothing\rangle = 1.
\end{equation}
The concept of a ``state of no particles'' may seem silly, but we will
see that there are very good reasons to include it in the formalism.

A subtle consequence of the Fock space concept is that we can now
define quantum states that do not have a definite number of particles.
For example,
\begin{equation*}
  \frac{1}{\sqrt{2}} \Big(|1,0,0,0,0,\dots\rangle + |1,1,1,0,0,\dots\rangle\Big)
  \in \mathscr{H}^F_\pm
\end{equation*}
is neither a 1-particle state nor a 3-particle state, but a
superposition of the two.  We will discuss the significance of states
with indefinite particle number later.

\subsection{Second quantization for bosons}
\label{sec:second_quantized_bosons}

After this lengthy prelude, we are ready to introduce the formalism of
second quantization.  Let us concentrate on bosons first.  We define a
\textbf{boson creation operator}, denoted by $\hat{a}_\mu^\dagger$ and
acting in the following way:
\begin{equation}
  \hat{a}_\mu^\dagger \big|n_1, n_2, \dots, n_\mu, \dots\big\rangle = \sqrt{n_\mu+1} \; \big|n_1, n_2, \dots, n_\mu + 1, \dots\big\rangle.
  \label{amu}
\end{equation}
In this definition, there is one particle creation operator for each
state in the single-particle basis
$\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$.  Each creation operator is
defined as an operator acting on state vectors in the Fock space
$\mathscr{H}^F_S$, and has the effect of incrementing the occupation
number of its single-particle state by one.  The prefactor of
$\sqrt{n_\mu+1}$ is defined for later convenience.

Applying a creation operator to the vacuum state yields a
single-particle state:
\begin{align}
  \begin{aligned}\hat{a}_\mu^\dagger |\varnothing\rangle \, &= \, |0,\dots,0, 1, 0, 0, \dots\rangle. \\[-1ex] &\qquad\qquad\quad\;\;\rotatebox[origin=c]{90}{$\Rsh$}\,\mu
  \end{aligned}
\end{align}

The creation operator's Hermitian conjugate, $\hat{a}_\mu$, is the
\textbf{boson annihilation operator}.  To characterize it, first take
the Hermitian conjugate of Eq.~\eqref{amu}:
\begin{equation}
  \big\langle n_1, n_2, \dots\big| \hat{a}_\mu = \sqrt{n_\mu+1} \; \big\langle n_1, n_2, \dots, n_\mu + 1, \dots\big|.
\end{equation}
Right-multiplying by another occupation number state
$|n_1',n_2',\dots\rangle$ results in
\begin{align}
  \begin{aligned}\big\langle n_1, n_2, \dots \big| \hat{a}_\mu \big|n_1',n_2',\dots\big\rangle &= \sqrt{n_\mu+1} \; \big\langle \dots, n_\mu + 1, \dots\big| \dots, n_\mu',\dots\big\rangle \\&= \sqrt{n_\mu+1}\; \delta^{n_1}_{n_1'}\; \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu+1}_{n_\mu'} \dots \\  &= \sqrt{n_\mu'}\; \delta^{n_1}_{n_1'}\; \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu+1}_{n_\mu'}\cdots\end{aligned}
  \end{align}
From this, we can deduce that
\begin{equation}
  \hat{a}_\mu \big|n_1', n_2', \dots, n_\mu', \dots\big\rangle = \begin{cases} \sqrt{n_\mu'} \; \big|n_1', n_2', \dots, n_\mu' - 1, \dots\big\rangle, & \mathrm{if}\; n_\mu' > 0 \\ 0, & \mathrm{if}\; n_\mu' = 0.\end{cases}
\end{equation}
In other words, the annihilation operator decrements the occupation
number of a specific single-particle state by one (hence its name).
As a special exception, if the given single-particle state is
unoccupied ($n_\mu = 0$), applying $\hat{a}_\mu$ results in a zero
vector (note that this is \textit{not} the same thing as the vacuum
state $|\varnothing\rangle$).

The boson creation/annihilation operators obey the following
commutation relations:
\begin{framed}
  \begin{equation}
    \,[\hat{a}_\mu,\hat{a}_\nu] = [\hat{a}_\mu^\dagger,\hat{a}_\nu^\dagger] = 0,
    \qquad [\hat{a}_\mu,\hat{a}_\nu^\dagger] = \delta_{\mu\nu}.
    \label{commutations}
  \end{equation}
\end{framed}
\vskip -0.1in
\noindent
These can be derived by taking the matrix elements with respect to the
occupation number basis.  We will go through the derivation of the
last commutation relation; the others are left as an exercise
(\hyperref[ex:boson_commutators]{Exercise 5}).

To prove that $[\hat{a}_\mu,\hat{a}_\nu^\dagger] = \delta_{\mu\nu}$,
first consider the case where the creation/annihilation operators act
on the same single-particle state:
\begin{align}
  \begin{aligned}\big\langle n_1, n_2, \dots \big| \hat{a}_\mu \hat{a}_\mu^\dagger \big| n_1', n_2'\dots\big\rangle &= \sqrt{(n_\mu+1)(n_\mu'+1)}\; \big\langle \dots, n_\mu+1, \dots \big| \dots, n_\mu'+1, \dots\big\rangle \\ &= \sqrt{(n_\mu+1)(n_\mu'+1)} \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu+1}_{n_\mu'+1}\cdots \\ &= (n_\mu+1) \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots \\ \big\langle n_1, n_2, \dots \big| \hat{a}_\mu^\dagger \hat{a}_\mu \big| n_1', n_2'\dots\big\rangle &= \sqrt{n_\mu n_\mu'}\; \big\langle \dots, n_\mu-1, \dots \big| \dots, n_\mu'-1, \dots\big\rangle \\&= \sqrt{n_\mu n_\mu'} \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu-1}_{n_\mu'-1}\cdots \\ &= n_\mu \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots \end{aligned}
\end{align}
In the second equation, we were a bit sloppy in handling the $n_\mu =
0$ and $n_\mu' = 0$ cases, but you can check for yourself that the
result on the last line remains correct.  Upon taking the
difference of the two equations, we get
\begin{equation}
  \big\langle n_1, n_2, \dots \big| \left(\hat{a}_\mu \hat{a}_\mu^\dagger - \hat{a}_\mu^\dagger \hat{a}_\mu\right) \big| n_1', n_2'\dots\big\rangle = \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots = \big\langle n_1, n_2, \dots \big| n_1', n_2'\dots\big\rangle.
\end{equation}
Since the occupation number states form a basis for $\mathscr{H}^F_S$,
we conclude that
\begin{equation}
  \hat{a}_\mu \hat{a}_\mu^\dagger - \hat{a}_\mu^\dagger \hat{a}_\mu = \hat{I}.
\end{equation}
Next, consider the case where $\mu \ne \nu$:
\begin{align*}
  \begin{aligned}\big\langle n_1, \dots \big| \hat{a}_\mu \hat{a}_\nu^\dagger \big| n_1', \dots\big\rangle &= \sqrt{(n_\mu+1)(n_\nu'+1)}\, \langle \dots, n_\mu+1, \dots, n_\nu, \dots | \dots, n_\mu', \dots, n_\nu'+1, \dots\rangle \\ &= \sqrt{n_\mu' n_\nu} \;\, \delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu+1}_{n_\mu'} \cdots \delta^{n_\nu}_{n_\nu' + 1}\cdots \\ \big\langle n_1, \dots \big| \hat{a}_\nu^\dagger \hat{a}_\mu \big| n_1', \dots\big\rangle &= \sqrt{n_\mu' n_\nu}\, \langle \dots, n_\mu, \dots,n_\nu-1,\dots | \dots, n_\mu'-1, \dots, n_\nu'\dots\rangle \\&= \sqrt{n_\mu' n_\nu} \;\delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu}_{n_\mu'-1}\cdots \delta^{n_\nu-1}_{n_\nu'} \cdots \\ &= \sqrt{n_\mu' n_\nu} \; \delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu+1}_{n_\mu'}\cdots \delta^{n_\nu}_{n_\nu'+1} \cdots\end{aligned}
\end{align*}
Hence,
\begin{equation}
  \hat{a}_\mu \hat{a}_\nu^\dagger - \hat{a}_\nu^\dagger \hat{a}_\mu = 0 \;\;\;\mathrm{for}\;\;\mu\ne\nu.
\end{equation}
Combining these two results gives the desired commutation relation,
$[\hat{a}_\mu, \hat{a}_\nu^\dagger] = \delta_{\mu\nu}$.

Another useful result which emerges from the first part of this proof
is that
\begin{equation}
  \big\langle n_1, n_2, \dots \big| \hat{a}_\mu^\dagger \hat{a}_\mu \big| n_1', n_2'\dots\big\rangle = n_\mu \big\langle n_1, n_2, \dots \big| n_1', n_2'\dots\big\rangle.
\end{equation}
Hence, we can define the Hermitian operator
\begin{equation}
  \hat{n}_\mu \equiv \hat{a}_\mu^\dagger \hat{a}_\mu,
\end{equation}
whose eigenvalue is the occupation number of single-particle state $\mu$.

If you are familiar with the method of creation/annihilation operators
for solving the quantum harmonic oscillator, you will have noticed the
striking similarity with the particle creation/annihilation operators
for bosons.  This is no mere coincidence.  We will examine the
relationship between harmonic oscillators and bosons in the next
chapter.

\subsection{Second quantization for fermions}
\label{sec:second_quantized_fermions}

For fermions, the multi-particle states are antisymmetric.  The
fermion creation operator can be defined as follows:
\begin{align}
  \begin{aligned}\hat{c}_\mu^\dagger |n_1, n_2, \dots, n_\mu,\dots\rangle &= \begin{cases}(-1)^{n_1 + n_2 + \cdots + n_{\mu-1}} |n_1, n_2, \dots, n_{\mu-1}, 1, \dots\rangle & \mathrm{if} \; n_\mu = 0 \\ \;\;0 & \mathrm{if}\; n_\mu = 1.
    \end{cases} \\&= (-1)^{n_1 + n_2 + \cdots + n_{\mu-1}}\; \delta^{n_\mu}_0\, \big|n_1, n_2, \dots, n_{\mu-1}, 1, \dots\big\rangle. \end{aligned}
\end{align}
In other words, if state $\mu$ is unoccupied, then
$\hat{c}_\mu^\dagger$ increments the occupation number to 1 and
introduces a factor of $(-1)^{n_1 + n_2 + \cdots + n_{\mu-1}}$ (i.e,
$+1$ if there is an even number of occupied states preceding $\mu$,
and $-1$ if there is an odd number).  The role of this factor will be
apparent later.  Note that this definition requires the
single-particle states to be ordered in some way; otherwise, it would
not make sense to speak of the states ``preceding'' $\mu$.  It does
not matter which ordering we choose, so long as we make \textit{some}
choice and stick to it consistently.

If $\mu$ is occupied, applying $\hat{c}_\mu^\dagger$ gives the zero
vector.  The occupation numbers are therefore forbidden from being
larger than 1, consistent with the Pauli exclusion principle.

The conjugate operator, $\hat{c}_\mu$, is the fermion annihilation
operator.  To see what it does, take the Hermitian conjugate of the
definition of the creation operator:
\begin{equation}
  \langle n_1, n_2, \dots, n_\mu,\dots| \hat{c}_\mu  =
  (-1)^{n_1 + n_2 + \cdots + n_{\mu-1}}\; \delta^{n_\mu}_0\, \big\langle n_1, n_2, \dots, n_{\mu-1}, 1, \dots\big|.
\end{equation}
Right-multiplying this by $|n_1',n_2',\dots\rangle$ gives
\begin{equation}
  \langle n_1, n_2, \dots, n_\mu,\dots| \hat{c}_\mu |n_1', n_2', \dots\rangle  = (-1)^{n_1 + \cdots + n_{\mu-1}} \;\delta^{n_1}_{n_1'} \cdots \;\delta^{n_{\mu-1}}_{n_{\mu-1}'} \left(\delta^{n_\mu}_0 \delta^1_{n_\mu'} \right) \delta^{n_{\mu+1}}_{n_{\mu+1}'} \dots
\end{equation}
Hence, we deduce that
\begin{align}
  \begin{aligned}\hat{c}_\mu |n_1', \dots, n_\mu',\dots\rangle &= \begin{cases} \;\;0 & \mathrm{if}\; n_\mu' = 0 \\ (-1)^{n_1' + \cdots + n_{\mu-1}'} |n_1', \dots, n_{\mu-1}', 0, \dots\rangle & \mathrm{if} \; n_\mu' = 1. \end{cases} \\ &= (-1)^{n_1' + \cdots + n_{\mu-1}'} \; \delta^1_{n_\mu'} \, \big|n_1', \dots, n_{\mu-1}', 0, \dots\big\rangle.\end{aligned}
\end{align}
In other words, if state $\mu$ is unoccupied, then applying
$\hat{c}_\mu$ gives the zero vector; if state $\mu$ is occupied,
applying $\hat{c}_\mu$ decrements the occupation number to $0$, and
multiplies the state by the aforementioned factor of $\pm 1$.

With these definitions, the fermion creation/annihilation operators
can be shown to obey the following \textit{anticommutation} relations:
\begin{framed}
  \begin{equation}
    \big\{\hat{c}_\mu,\hat{c}_\nu\big\} = \big\{\hat{c}_\mu^\dagger,\hat{c}_\nu^\dagger\big\} = 0, \qquad \big\{\hat{c}_\mu,\hat{c}_\nu^\dagger\big\} = \delta_{\mu\nu}.
    \label{anticommutation}
  \end{equation}
\end{framed}
\vskip -0.15in
\noindent
Here, $\{\cdot,\cdot\}$ denotes an anticommutator, which is defined by
\begin{equation}
  \left\{\hat{A},\hat{B}\right\} \equiv \hat{A}\hat{B} + \hat{B}\hat{A}.
\end{equation}

Similar to the bosonic commutation relations \eqref{commutations}, the
anticommutation relations \eqref{anticommutation} can be derived by
taking matrix elements with occupation number states.  We will only go
over the last one, $\big\{\hat{c}_\mu,\hat{c}_\nu^\dagger\big\} =
\delta_{\mu\nu}$; the others are left for the reader to verify.

First, consider creation/annihilation operators acting on the same
single-particle state $\mu$:
\begin{align}
  \begin{aligned}\big\langle \dots,n_\mu,\dots \big| \hat{c}_\mu \hat{c}_\mu^\dagger \big|\dots, n_\mu', \dots\big\rangle &= (-1)^{n_1+\cdots+n_{\mu-1}} (-1)^{n_1'+\cdots+n_{\mu-1}'} \,\delta^{n_\mu}_0 \delta^0_{n_\mu'} \\ &\quad\times \big\langle n_1,\dots,n_{\mu-1}, 1, \dots\big| n_1',\dots,n_{\mu-1}', 1, \dots \big\rangle \\ &= \delta^0_{n_\mu'} \; \cdot \; \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu}_{n_\mu'} \cdots\end{aligned}
\end{align}
By a similar calculation,
\begin{equation}
  \big\langle \dots,n_\mu,\dots \big| \hat{c}_\mu^\dagger \hat{c}_\mu \big|\dots, n_\mu', \dots\big\rangle = \delta^1_{n_\mu'} \; \cdot \; \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu}_{n_\mu'} \cdots
\end{equation}
By adding these two equations, and using the fact that
$\delta^0_{n_\mu'} + \delta^1_{n_\mu'} = 1$, we get
\begin{equation}
  \big\langle \dots,n_\mu,\dots \big| \left\{ \hat{c}_\mu, \hat{c}_\mu^\dagger\right\} \big|\dots, n_\mu', \dots\big\rangle = \big\langle \dots,n_\mu,\dots \big|\dots, n_\mu', \dots\big\rangle
\end{equation}
And hence,
\begin{equation}
  \left\{ \hat{c}_\mu, \hat{c}_\mu^\dagger\right\} = \hat{I}.
\end{equation}

Next, we must prove that $\left\{ \hat{c}_\mu,
\hat{c}_\nu^\dagger\right\} = 0$ for $\mu \ne \nu$.  We will show this
for $\mu < \nu$ (the $\mu > \nu$ case follows by Hermitian
conjugation).  This is, once again, by taking matrix elements:
\begin{align*}
  \begin{aligned}\big\langle \dots,n_\mu,\dots, n_\nu,\dots \big| \hat{c}_\mu \hat{c}_\nu^\dagger \big| & \dots, n_\mu', \dots, n_\nu',\dots\big\rangle = (-1)^{n_1+\cdots+n_{\mu-1}} (-1)^{n_1'+\cdots+n_{\nu-1}'} \,\delta^{n_\mu}_0 \delta^0_{n_\nu'} \\ &\qquad\qquad\qquad\qquad\qquad\times \big\langle \dots, 1, \dots, n_\nu,\dots\big| \dots,n_{\mu}', \dots,1, \dots \big\rangle \\ &\qquad\quad = (-1)^{n_\mu'+\cdots+n_{\nu-1}'}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1 \delta^0_{n_\nu'}\right) \cdots \\
&\qquad\quad = (-1)^{1 + n_{\mu+1} + \cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^0_{n_\mu}\delta^1_{n_\mu'}\right) \cdots \left(\delta^0_{n_\nu'} \delta^1_{n_\nu}\right) \cdots \\
  \big\langle \dots,n_\mu,\dots, n_\nu,\dots \big| \hat{c}_\nu^\dagger \hat{c}_\mu \big| &\dots, n_\mu', \dots, n_\nu',\dots\big\rangle = (-1)^{n_1+\cdots+n_{\nu-1}} (-1)^{n_1'+\cdots+n_{\mu-1}'} \,\delta^{n_\nu}_1 \delta^1_{n_\mu'} \\ &\qquad\qquad\qquad\qquad\qquad\times \big\langle \dots, n_\mu, \dots, 0,\dots\big| \dots,0, \dots,n_\nu', \dots \big\rangle \\ &\qquad\quad= (-1)^{n_{\mu}+\cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1 \delta^0_{n_\nu'} \right) \cdots \\ &\qquad\quad= (-1)^{0 + n_{\mu+1}+\cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1\delta^0_{n_\nu'}\right) \cdots
  \end{aligned}
\end{align*}
The two equations differ by a factor of $-1$, so adding them gives
zero.  Putting everything together, we conclude that
$\big\{c_\mu,c_\nu^\dagger\big\} = \delta_{\mu\nu}$, as stated in
\eqref{anticommutation}.

As you can see, the derivation of the fermionic anticommutation
relations is quite hairy, in large part due to the $(-1)^{(\cdots)}$
factors in the definitions of the creation and annihilation operators.
But once these relations have been derived, we can deal entirely with
the creation and annihilation operators, without worrying about the
underlying occupation number representation and its $(-1)^{(\cdots)}$
factors.  By the way, if we had chosen to omit the $(-1)^{(\cdots)}$
factors in the definitions, the creation and annihilation operators
would still satisfy the anticommutation relation
$\{\hat{c}_\mu,\hat{c}_\nu^\dagger\}=\delta_{\mu\nu}$, but two
creation operators or two annihilation operators would
\textit{commute} rather than \textit{anticommute}.  During subsequent
calculations, the algebra of creation and annihilation operators ends
up being much harder to deal with.

\subsection{Second quantization for non-interacting particles}
\label{sec:second_quant_op}

One of the key benefits of second quantization is that it allows us to
express multi-particle quantum operators clearly and succinctly, using
creation and annihilation operators as the basic building blocks.

Consider a system of non-interacting particles.  When there is just
one particle ($N=1$), let the single-particle Hamiltonian be
$\hat{H}^{(1)}$, which is a Hermitian operator acting on the
single-particle Hilbert space $\mathscr{H}^{(1)}$.  For general $N$,
the multi-particle Hamiltonian $\hat{H}$ is a Hermitian operator
acting on the Fock space $\mathscr{H}^F$.  How is $\hat{H}$ related to
$\hat{H}^{(1)}$?

Let us take the bosonic case.  Then the multi-particle Hamiltonian
should be
\begin{equation}
  \hat{H} = \sum_{\mu\nu} \hat{a}^\dagger_\mu H_{\mu\nu} \hat{a}_\nu,
  \;\;\; \mathrm{where}\;\;\;
  H_{\mu\nu} = \langle\mu|\hat{H}^{(1)}|\nu\rangle,
  \label{twobosonH}
\end{equation}
where $\hat{a}_\mu$ and $\hat{a}_\mu^\dagger$ are the boson creation
and annihilation operators, and $|\mu\rangle$, $|\nu\rangle$ refer to
single-particle state vectors drawn from some orthonormal basis for
$\mathscr{H}^{(1)}$.

To understand why Eq.~\eqref{twobosonH} is right, consider its matrix
elements with respect to various states.  First, for the vacuum state
$|\varnothing\rangle$,
\begin{equation}
  \langle\varnothing|\hat{H}|\varnothing\rangle = 0.
\end{equation}
This makes sense. Second, consider the matrix elements between
single-particle states:
\begin{equation}
  \begin{aligned}
    \langle n_\mu = 1 |\hat{H}|n_\nu = 1\rangle
    &= \langle\varnothing|a_\mu \Big(\sum_{\mu'\nu'} \hat{a}^\dagger_{\mu'} H_{\mu'\nu'} \hat{a}_{\nu'}\Big) a_\nu^\dagger |\varnothing\rangle \\ &= \sum_{\mu'\nu'} H_{\mu'\nu'} \, \langle\varnothing|a_\mu \hat{a}^\dagger_{\mu'}  \hat{a}_{\nu'} a_\nu^\dagger |\varnothing\rangle \\ &= \sum_{\mu'\nu'} H_{\mu'\nu'} \, \delta^{\mu}_{\mu'} \delta^{\nu}_{\nu'} \\&= H_{\mu\nu}.\end{aligned}
\end{equation}
This exactly matches the matrix element defined in
Eq.~\eqref{twobosonH}.

Finally, consider the case where $\{|\mu\rangle\}$ forms an eigenbasis
of $\hat{H}_1$.  Then
\begin{equation}
  \hat{H}^{(1)}|\mu\rangle = E_\mu |\mu\rangle
  \;\;\;\Rightarrow\;\;\;
  H_{\mu\nu} = E_\mu\,\delta_{\mu\nu} \;\;\;\Rightarrow \;\;
  \hat{H} = \sum_{\mu} E_\mu \,\hat{n}_\mu.
\end{equation}
As previously noted, $\hat{n}_\mu = \hat{a}^\dagger_\mu \hat{a}_\mu$
is the number operator, an observable corresponding to the occupation
number of single-particle state $\mu$.  Thus, the total energy is the
sum of the single-particle energies, as expected for a system of
non-interacting particles.

We can also think of the Hamiltonian $\hat{H}$ as the generator of
time evolution.  Eq.~\eqref{twobosonH} describes an infinitesimal time
step that consists of a superposition of alternative evolution
processes.  Each term in the superposition, $\hat{a}^\dagger_\mu
H_{\mu\nu} \hat{a}_\nu$, describes a particle being annihilated in
state $\nu$, and immediately re-created in state $\mu$, which is
equivalent to ``transferring'' a particle from $\nu$ to $\mu$.  The
quantum amplitude for this process is described by the matrix element
$H_{\mu\nu}$.  This description of time evolution is applicable not
just to single-particle states, but also to multi-particle states
containing any number of particles.

Note also that the number of particles does not change during time
evolution.  Whenever a particle is annihilated in a state $\nu$, it is
immediately re-created in some state $\mu$.  This implies that the
Hamiltonian commutes with the total particle number operator:
\begin{equation}
  [\hat{H}, \hat{N}] = 0, \;\;\;\mathrm{where}\;\;\hat{N} \equiv \sum_\mu \hat{a}_\mu^\dagger a_\mu.
  \label{Hdiag}
\end{equation}
The formal proof for this is left as an exercise (see
\hyperref[ex:n_conserved]{Exercise 6}).  It follows directly from the
creation and annihilation operators' commutation relations (for
bosons) or anticommuattion relations (for fermions).

Apart from the total energy, other kinds of observables---the total
momentum, total angular momentum, etc.---can be expressed in a similar
way.  Let $\hat{A}^{(1)}$ be a single-particle observable.  For a
multi-particle system, the operator corresponding to the ``total $A$''
is
\begin{equation}
  \hat{A} = \sum_{\mu\nu} \hat{a}^\dagger_\mu A_{\mu\nu} \hat{a}_\nu, \;\;\; \mathrm{where}\;\; A_{\mu\nu} = \langle\mu|\hat{A}^{(1)}|\nu\rangle.
  \label{Aop}
\end{equation}
For fermions, everything from Eq.~\eqref{twobosonH}--\eqref{Aop} also
holds, but with the $a$ operators replaced by fermionic $c$ operators.

The term ``second quantization'' originates from this process of using
creation and annihilation operators to define Hamiltonians and other
observables.  The idea is that single-particle quantum mechanics is
derived from the quantization of classical Hamiltonians, by imposing
commutation relations like $[x,p] = i\hbar$.  Then we extend the
theory to multi-particle systems, by using the single-particle states
to define creation/annihilation operators.  This can be viewed as a
``second'' quantization step.

By the way, although each set of creation and annihilation operators
is defined using a given single-particle basis $\{|\mu\rangle\}$, the
choice of basis is obviously not unique.  Suppose we have a different
single-particle basis $\{|\alpha\rangle\}$, such that
\begin{equation}
  |\alpha\rangle = \sum_\mu U_{\alpha\mu} |\mu\rangle,
  \label{alphabasis}
\end{equation}
where $U_{\alpha\mu}$ are the elements of a unitary matrix.  Let
$\hat{a}_\alpha^\dagger$ and $\hat{a}_\mu^\dagger$ denote the creation
operators defined using the two different basis (once again, we will
use the notation for bosons, but the following equations are valid for
fermions too).  Writing Eq.~\eqref{alphabasis} in terms of the
creation operators,
\begin{align}
  \hat{a}_\alpha^\dagger|\varnothing\rangle
  = \sum_\mu U_{\alpha\mu} \hat{a}_\mu^\dagger |\varnothing\rangle.
\end{align}
We therefore deduce that
\begin{equation}
  \hat{a}_\alpha^\dagger = \sum_\mu U_{\alpha\mu} \hat{a}_\mu^\dagger,
  \;\;\;
  \hat{a}_\alpha = \sum_\mu U_{\alpha\mu}^* \hat{a}_\mu.
  \label{atrans}
\end{equation}
Using the unitarity of $U_{\alpha\mu}$, we can verify that
$\hat{a}_\alpha$ and $\hat{a}_\alpha^\dagger$ satisfy bosonic
commutation relations if and only if $\hat{a}_\mu$ and
$\hat{a}_\mu^\dagger$ do so.  For fermions, we put $c$ operators in
place of $a$ operators in Eq.~\eqref{atrans}, and use anticommutation
rather than commutation relations.

To illustrate how a basis change affects a second quantized
Hamiltonian, consider a system of non-interacting particles whose
single-particle Hamiltonian is diagonal in the $\alpha$ basis.  The
multi-particle Hamiltonian is
\begin{equation}
  \hat{H} = \sum_\alpha E_\alpha \hat{a}_\alpha^\dagger \hat{a}_\alpha,
\end{equation}
consistent with Eq.~\eqref{Hdiag}.  Applying Eq.~\eqref{atrans},
\begin{equation}
  \hat{H} = \sum_{\mu\nu} \hat{a}_\mu^\dagger
  \left(\sum_\alpha E_\alpha U_{\alpha\mu} U_{\alpha\nu}^*\right)
  \hat{a}_\nu
  \label{Htransformed}
\end{equation}
Compare this to single-particle bra-ket
\begin{align}
  H_{\mu\nu} \equiv \langle\mu | \hat{H}^{(1)} | \nu\rangle
  &= \sum_{\alpha\beta} \langle \alpha | U_{\alpha\mu} \hat{H}^{(1)} U_{\beta\nu}^* |\beta\rangle \\
  &= \sum_{\alpha\beta} U_{\alpha\mu} U_{\beta\nu}^* \, E_\beta \, \delta_{\alpha\beta} \\
  &= \sum_{\alpha} E_\alpha\, U_{\alpha\mu} U_{\alpha\nu}^*.
\end{align}
This precisely matches the term in parentheses in
Eq.~\eqref{Htransformed}.  This is consistent with the general form of
$\hat{H}$ for non-interacting particles, Eq.~\eqref{twobosonH}.

\subsection{Particle interactions}

Hermitian operators can also be constructed out of other kinds of
groupings of creation and annihilation operators.  For example, a
pairwise (2-particle) potential can be described with a superposition
of creation and annihilation operator pairs, of the form
\begin{equation}
  \hat{V} = \frac{1}{2}
  \sum_{\mu\nu\lambda\sigma} \hat{a}^\dagger_\mu \hat{a}^\dagger_\nu \,
  V_{\mu\nu\lambda\sigma}\, \hat{a}_\sigma \hat{a}_\lambda.
  \label{Vop}
\end{equation}
The prefactor of $1/2$ is conventional.  In terms of time evolution,
$\hat{V}$ ``transfers'' (annihilates and then re-creates) a
\textit{pair} of particles during each infinitesimal time step.  Since
the number of annihilated particles is always equal to the number of
created particles, the interaction conserves the total particle
number.  We can ensure that $\hat{V}$ is Hermitian by imposing a
constraint on the coefficents:
\begin{equation}
  \hat{V}^\dagger = \frac{1}{2}
  \sum_{\mu\nu\lambda\sigma} \hat{a}^\dagger_\lambda \hat{a}^\dagger_\sigma
  \, V_{\mu\nu\lambda\sigma}^* \, \hat{a}_\nu \hat{a}_\mu = \hat{V}
  \;\;\Leftarrow \;\;
  V_{\lambda\sigma\mu \nu}^* = V_{\mu\nu\lambda\sigma}.
\end{equation}

Suppose we are given the 2-particle potential as an operator
$\hat{V}^{(2)}$ acting on the 2-particle Hilbert space
$\mathscr{H}^{(2)}$.  We should be able to express the
second-quantized operator $\hat{V}$ in terms of $\hat{V}^{(2)}$, by
comparing their matrix elements.  For example, let
\begin{align}
  \begin{aligned}
    |n_\mu = 1, n_\nu = 1\rangle &= \frac{1}{\sqrt{2}}
      \Big(|\mu\rangle|\nu\rangle + |\nu\rangle|\mu\rangle \Big), \\
    |n_\lambda = 1, n_\sigma = 1\rangle &= \frac{1}{\sqrt{2}}
      \Big(|\lambda\rangle|\sigma\rangle + |\sigma\rangle|\lambda\rangle \Big),
  \end{aligned}
\end{align}
where $\mu \ne \nu$ and $\lambda \ne \sigma$.  The matrix elements of
$\hat{V}^{(2)}$ are
\begin{multline}
  \langle n_\mu = 1, n_\nu = 1 | \hat{V}^{(2)} |n_\lambda = 1, n_\sigma = 1\rangle \\
  = \frac{1}{2} \Big(
  \langle\mu|\langle\nu|\hat{V}^{(2)}|\lambda\rangle\sigma\rangle
  + \langle\nu|\langle\mu|\hat{V}^{(2)}|\lambda\rangle\sigma\rangle
  + \langle\mu|\langle\nu|\hat{V}^{(2)}|\sigma\rangle\lambda\rangle
  + \langle\nu|\langle\mu|\hat{V}^{(2)}|\sigma\rangle\lambda\rangle
  \Big).
  \label{mat0}
\end{multline}
On the other hand, the matrix elements of the second-quantized
operator $\hat{V}$ are
\begin{align}
  \langle n_\mu = 1, n_\nu = 1 | \hat{V} |n_\lambda = 1, n_\sigma = 1\rangle
  &= \sum_{\mu'\nu'\lambda'\sigma'} V_{\mu'\nu'\lambda'\sigma'}
  \langle \varnothing | \hat{a}_\nu \hat{a}_\mu \hat{a}_{\mu'}^\dagger
  \hat{a}_{\nu'}^\dagger \hat{a}_{\sigma'} \hat{a}_{\lambda'}
  \hat{a}_\lambda^\dagger \hat{a}_\sigma^\dagger |\varnothing\rangle \label{mat1}\\
  &= \frac{1}{2} \left(V_{\mu\nu\lambda\sigma}
  + V_{\mu\nu\sigma\lambda}
  + V_{\nu\mu\lambda\sigma}
  + V_{\nu\mu\sigma\lambda} \label{mat2}
  \right).
\end{align}
In going from Eq.~\eqref{mat1} to \eqref{mat2}, we use the bosonic
commutation relations repeatedly to ``pushing'' the annihilation
operators to the right (so that they can act upon
$|\varnothing\rangle$) and the creation operators to the left (so that
they can act upon $\langle\varnothing|$).  Comparing Eq.~\eqref{mat0}
to Eq.~\eqref{mat2}, we see that the matrix elements match if we take
\begin{align}
  V_{\mu\nu\lambda\sigma} = \langle\mu|\langle\nu|\hat{V}^{(2)}
  |\lambda\rangle|\sigma\rangle.
\end{align}
For instance, if the bosons have a position representation, we would
have something like
\begin{align}
  V_{\mu\nu\lambda\sigma} =
  \int d^d r_1 \int d^d r_2\;
  \varphi_\mu^*(r_1) \,\varphi_\nu^*(r_2) \, V(r_1, r_2) \,
  \varphi_\lambda(r_1) \, \varphi_\sigma(r_2).
\end{align}
The appropriate coefficients for $\mu = \nu$ and/or $\lambda =
\sigma$, as well as for the fermionic case, are left for the reader to
work out.

\subsection{Particle non-conserving observables}

Another way to build a Hermitian operator from creation and
annihilation operators is
\begin{equation}
  \hat{A} = \sum_\mu \left(\alpha_\mu \hat{a}_\mu^\dagger + \alpha^*_\mu \hat{a}_\mu\right).
\end{equation}
If such a term is added to a Hamiltonian, it breaks the conservation
of total particle number.  Each infinitesimal time step will include
processes that decrement the particle number (due to $\hat{a}_\mu$),
as well as processes that increment the particle number (due to
$\hat{a}_\mu^\dagger$).  Even if the system starts out with a fixed
number of particles, such as the vacuum state $|\varnothing\rangle$,
it subsequently evolves into a superposition of states with different
particle numbers.  In the theory of quantum electrodynamics, this type
of operator is used to describe the emission and absorption of photons
caused by moving charges.

\section{Quantum field theory}
\label{sec:qft}

\subsection{Field operators}

So far, we have been agnostic about the nature of the single-particle
states $\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$ used to
construct the creation and annihilation operators.  Let us now
consider the special case where these quantum states are representable
by wavefunctions.  Let $|\mathbf{r}\rangle$ denote a position
eigenstate for a $d$-dimensional space.  A single-particle state
$|\varphi_\mu\rangle$ has a wavefunction
\begin{equation}
  \varphi_\mu(\mathbf{r}) = \langle\mathbf{r}|\varphi_\mu\rangle.
\end{equation}
Due to the completeness and orthonormality of the basis, these
wavefunctions satisfy
\begin{align}
  \begin{aligned}\int d^dr \; \varphi_\mu^*(\mathbf{r})\, \varphi_\nu(\mathbf{r}) &= \langle\varphi_\mu| \left(\int d^dr\, |\mathbf{r}\rangle\langle\mathbf{r}|\right) |\varphi_\nu\rangle \,= \delta_{\mu\nu}, \\\sum_\mu \varphi_\mu^*(\mathbf{r}) \varphi_\mu(\mathbf{r}') &=\, \langle \mathbf{r}'| \left(\sum_\mu |\varphi_\mu\rangle\langle\varphi_\mu|\right)|\mathbf{r}\rangle \;\;=\, \delta^d(\mathbf{r}-\mathbf{r}').\end{aligned}
\end{align}

We can use the wavefunctions and the creation/annihilation operators
to construct a new and interesting set of operators.  For simplicity,
suppose the particles are bosons, and let
\begin{equation}
  \hat{\psi}(\mathbf{r}) = \sum_\mu \varphi_\mu(\mathbf{r}) \, \hat{a}_\mu, \quad\;\; \hat{\psi}^\dagger(\mathbf{r}) = \sum_\mu \varphi_\mu^*(\mathbf{r}) \, \hat{a}_\mu^\dagger.
\end{equation}
Using the aforementioned wavefunction properties, we can derive the
inverse relations
\begin{equation}
  \hat{a}_\mu = \int d^dr \; \varphi_\mu^*(\mathbf{r}) \, \hat{\psi}(\mathbf{r}), \quad\;\; \hat{a}_\mu^\dagger = \int d^dr \; \varphi_\mu(\mathbf{r}) \, \hat{\psi}^\dagger(\mathbf{r}).
\end{equation}
From the commutation relations for the bosonic $a_\mu$ and
$a_\mu^\dagger$ operators, we can show that
\begin{equation}
  \left[\hat{\psi}(\mathbf{r}), \hat{\psi}(\mathbf{r}')\right] = \left[\hat{\psi}^\dagger(\mathbf{r}), \hat{\psi}^\dagger(\mathbf{r}')\right] = 0, \quad \left[\hat{\psi}(\mathbf{r}), \hat{\psi}^\dagger(\mathbf{r}')\right] = \delta^d(\mathbf{r}-\mathbf{r}').
\end{equation}
In the original commutation relations, the operators for different
single-particle states commute; now, the operators for different
\textit{positions} commute.  A straightforward interpretion for the
operators $\hat{\psi}^\dagger(\mathbf{r})$ and
$\hat{\psi}(\mathbf{r})$ is that they respectively create and
annihilate one particle at a point $\mathbf{r}$ (rather than one
particle in a given eigenstate).

It is important to note that $\mathbf{r}$ here does not play the role
of an observable.  It is an \textit{index}, in the sense that each
$\mathbf{r}$ is associated with distinct $\hat{\psi}(\mathbf{r})$ and
$\hat{\psi}^\dagger(\mathbf{r})$ operators.  These
$\mathbf{r}$-dependent operators serve to generalize the classical
concept of a \textbf{field}.  In a classical field theory, each point
$\mathbf{r}$ is assigned a set of numbers corresponding to physical
quantities, such as the electric field components $E_x(\mathbf{r})$,
$E_y(\mathbf{r})$, and $E_z(\mathbf{r})$.  In the present case, each
$\mathbf{r}$ is assigned a set of quantum operators.  This kind of
quantum theory is called a \textbf{quantum field theory}.

We can use the $\hat{\psi}(\mathbf{r})$ and
$\hat{\psi}^\dagger(\mathbf{r})$ operators to write second quantized
observables in a way that is independent of the choice of
single-particle basis wavefunctions.  As discussed in the
\hyperref[sec:second_quant_op]{previous section}, given a Hermitian
single-particle operator $\hat{A}_1$ we can define a multi-particle
observable $\hat{A} = \sum_{\mu\nu} \hat{a}^\dagger_\mu A_{\mu\nu}
\hat{a}_\nu$, where $A_{\mu\nu} =
\langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle$.  This multi-particle
observable can be re-written as
\begin{equation}
  \hat{A} = \int d^dr \,d^dr' \;\hat{\psi}^\dagger(\mathbf{r})
  \;\langle \mathbf{r}|\hat{A}_1|\mathbf{r}'\rangle \; \hat{\psi}(\mathbf{r}'),
\end{equation}
which makes no explicit reference to the single-particle basis states.

For example, consider the familiar single-particle Hamiltonian
describing a particle in a potential $V(\mathbf{r})$:
\begin{equation}
  \hat{H}_1 = \hat{T}_1 + \hat{V}_1, \;\;\; \hat{T}_1 = \frac{|\hat{\mathbf{p}}|^2}{2m}, \;\;\; \hat{V}_1 = V(\hat{\mathbf{r}}),
\end{equation}
where $\hat{\mathbf{r}}$ and $\hat{\mathbf{p}}$ are position and
momentum operators (single-particle observables).  The corresponding
second quantized operators for the kinetic energy and potential energy
are
\begin{align}
  \begin{aligned}\hat{T} &= \frac{\hbar^2}{2m} \int d^dr\; d^dr'\; \hat{\psi}^\dagger(\mathbf{r}) \left(\int\frac{d^dk}{(2\pi)^d} \; |\mathbf{k}|^2 \; e^{i\mathbf{k}\cdot(\mathbf{r}-\mathbf{r}')}\right) \; \hat{\psi}(\mathbf{r}') \\ &= \frac{\hbar^2}{2m} \int d^d r\; \nabla \hat{\psi}^\dagger (\mathbf{r}) \, \cdot \, \nabla \hat{\psi}(\mathbf{r}) \\ \hat{V} &= \int d^dr \;\hat{\psi}^\dagger(\mathbf{r}) \;V(\mathbf{r}) \; \hat{\psi}(\mathbf{r}).\end{aligned}
\end{align}
(In going from the first to the second line, we performed integrations
by parts.)  This result is strongly reminiscent of the expression for
the expected kinetic and potential energies in single-particle quantum
mechanics:
\begin{equation}
  \langle T\rangle = \frac{\hbar^2}{2m} \int d^d r \left|\nabla\psi(\mathbf{r})\right|^2, \;\;\; \langle V\rangle = \int d^dr \; V(\mathbf{r}) \; |\psi(\mathbf{r})|^2,
\end{equation}
where $\psi(\mathbf{r})$ is the single-particle wavefunction.

How are the particle creation and annihilation operators related to
the classical notion of ``the value of a field at point
$\mathbf{r}$'', like an electric field $\mathbf{E}(\mathbf{r})$ or
magnetic field $\mathbf{B}(\mathbf{r})$?  Field variables are
measurable quantities, and should be described by Hermitian operators.
As we have just seen, Hermitian operators corresponding to the kinetic
and potential energy can be constructed via \textit{products} of
$\hat{\psi}^\dagger(\mathbf{r})$ with $\hat{\psi}(\mathbf{r})$.  But
there is another type of Hermitian operator that we can construct by
taking \textit{linear combinations} of of
$\hat{\psi}^\dagger(\mathbf{r})$ with $\hat{\psi}(\mathbf{r})$.  One
example is
\begin{equation*}
  \psi(\mathbf{r}) + \psi(\mathbf{r})^\dagger.
\end{equation*}
Other possible Hermitian operators have the form
\begin{equation}
  F(\mathbf{r}) = \int d^dr' \Big(f(\mathbf{r},\mathbf{r}') \hat{\psi}(\mathbf{r}) + f^*(\mathbf{r},\mathbf{r}') \hat{\psi}^\dagger(\mathbf{r}') \Big),
  \label{fieldop}
\end{equation}
where $f(\mathbf{r},\mathbf{r}')$ is some complex function.  As we
shall see, it is this type of Hermitian operator that corresponds to
the classical notion of a field variable like an electric or magnetic
field.

In the next two sections, we will try to get a better understanding of
the relationship between classical fields and \textit{bosonic} quantum
fields.  (For fermionic quantum fields, the situation is more
complicated; they cannot be related to classical fields of the sort we
are familiar with, for reasons that lie outside the scope of this
course.)

\subsection{Revisiting the harmonic oscillator}
\label{sec:ho}

Before delving into the links between classical fields and bosonic
quantum fields, it is first necessary to revisit the harmonic
oscillator, to see how the concept of a \textbf{mode of oscillation}
carries over from classical to quantum mechanics.

A classical harmonic oscillator is described by the Hamiltonian
\begin{equation}
  H(x,p) = \frac{p^2}{2m} + \frac{1}{2}m\omega^2x^2,
  \label{Hclass}
\end{equation}
where $x$ is the ``position'' of the oscillator, which we call the
\textbf{oscillator variable}; $p$ is the corresponding momentum
variable; $m$ is the mass; and $\omega$ is the natural frequency of
oscillation.  We know that the classical equation of motion has the
general form
\begin{equation}
  x(t) = \mathcal{A}\, e^{-i\omega t} + \mathcal{A}^*\, e^{i\omega t}.
  \label{xt0}
\end{equation}
This describes an oscillation of frequency $\omega$.  It is
parameterized by the \textbf{mode amplitude} $\mathcal{A}$, a complex
number that determines the magnitude and phase of the oscillation.

For the quantum harmonic oscillator, $x$ and $p$ are replaced by the
Hermitian operators $\hat{x}$ and $\hat{p}$.  From these, the
operators $\hat{a}$ and $\hat{a}^\dagger$ can be defined:
\begin{align}
  \left\{
  \begin{aligned}
  \hat{a} &= \sqrt{\frac{m\omega}{2\hbar}} \left(\hat{x} + \frac{i\hat{p}}{m\omega}\right), \\
  \hat{a}^\dagger &= \sqrt{\frac{m\omega}{2\hbar}} \left(\hat{x} - \frac{i\hat{p}}{m\omega}\right).
  \end{aligned}\right. \quad
  \Leftrightarrow\quad\left\{
  \begin{aligned}
    \hat{x} &= \;\;\;\;\sqrt{\frac{\hbar}{2m\omega}}
    \, \left(\hat{a}+\hat{a}^\dagger\right) \\
    \hat{p} &= -i \sqrt{\frac{m\omega\hbar}{2}}
    \, \left(\hat{a}-\hat{a}^\dagger\right).
  \end{aligned}\right.
  \label{create_annihilate}
\end{align}
We can then show that
\begin{equation}
  \left[\,\hat{a}\,,\,\hat{a}^\dagger\,\right] = 1, \;\;\;
  \hat{H} = \hbar\omega\left(\hat{a}^\dagger\hat{a}+\frac{1}{2}\right),
  \label{create_annihilate_qho}
\end{equation}
and from these the energy spectrum of the quantum harmonic oscillator
can be derived.  These facts should have been covered in an earlier
course.

Here, we are interested in how the creation and annihilation operators
relate to the \textit{dynamics} of the quantum harmonic oscillator.
In the Heisenberg picture, with $t = 0$ as the reference time, we
define the time-dependent operator
\begin{equation}
  \hat{x}(t) = \hat{U}^\dagger(t) \,\hat{x}\, \hat{U}(t), \;\;\;
  \hat{U}(t) \equiv \exp\left(-\frac{i}{\hbar}\hat{H}t\right).
\end{equation}
We will adopt the convention that all operators written with an
explicit time dependence are Heisenberg picture operators, while
operators without an explicit time dependence are Schr\"odinger
picture operators; hence, $\hat{x} \equiv \hat{x}(0)$.  The Heisenberg
picture creation and annihilation operators, $\hat{a}^\dagger(t)$ and
$\hat{a}(t)$, are related to $\hat{x}(t)$ by
\begin{equation}
  \hat{x}(t) = \sqrt{\frac{\hbar}{2m\omega}} \, \Big(\hat{a}(t)+\hat{a}^\dagger(t)\Big).
  \label{xt1}
\end{equation}
The Heisenberg equation for the annihilation operator is
\begin{align}
  \begin{aligned}
  \frac{d\hat{a}(t)}{dt} &= \frac{i}{\hbar} \left[\hat{H},\hat{a}(t)\right] \\
  &= \frac{i}{\hbar} \,\hat{U}^\dagger(t) \left[\hat{H},\hat{a}\right] \hat{U}(t) \\
  &= \frac{i}{\hbar} \,\hat{U}^\dagger(t) \Big(-\hbar\omega \hat{a}\Big) \hat{U}(t) \\
  &= -i\omega \hat{a}(t).
  \end{aligned}
  \label{heisenbergeq}
\end{align}
Hence, the solution for this differential equation is
\begin{equation}
  \hat{a}(t) = \hat{a} \, e^{-i\omega t},
  \label{at}
\end{equation}
and Eq.~\eqref{xt1} becomes
\begin{equation}
  \hat{x}(t) = \sqrt{\frac{\hbar}{2m\omega}} \,
  \Big(\hat{a} \,e^{-i\omega t} \,+\,
  \hat{a}^\dagger\, e^{i\omega t}\Big).
  \label{xtquantum}
\end{equation}
This has exactly the same form as the classical oscillatory solution
\eqref{xt0}!  Comparing the two, we see that $\hat{a}$ times the scale
factor $\sqrt{\hbar/2m\omega}$ plays the role of the mode amplitude
$\mathcal{A}$.

Now, suppose we come at things from the opposite end.  Let's say we
start with creation and annihilation operators satisfying
Eq.~\eqref{create_annihilate_qho}, from which
Eqs.~\eqref{heisenbergeq}--\eqref{at} follow.  Using the creation and
annihilation operators, we would like to construct an observable that
corresponds to a classical oscillator variable.  A natural Hermitian
ansatz is
\begin{equation}
  \hat{x}(t) = 
  \mathcal{C} \left(\hat{a} \,e^{-i\omega t} \,+\,
  \hat{a}^\dagger\, e^{i\omega t}\right),
  \label{xtc}
\end{equation}
where $\mathcal{C}$ is a constant that is conventionally taken to be
real.

How might $\mathcal{C}$ be chosen?  A convenient way is to study the
behavior of the oscillator variable \textit{in the classical limit}.
The classical limit of a quantum harmonic oscillator is described by a
\textbf{coherent state}.  The details of how this state is defined
need not concern us for now (see Appendix E).  The most important
things to know are that (i) it can be denoted by $|\alpha\rangle$
where $\alpha \in \mathbb{C}$, (ii) it is an eigenstate of the
annihilation operator:
\begin{equation}
  \hat{a}|\alpha\rangle = \alpha|\alpha\rangle.
  \label{coherent}
\end{equation}
And (iii) its energy expectation value is
\begin{equation}
  \langle E\rangle = \ \langle\alpha|\hat{H}|\alpha\rangle = \hbar
  \omega \left(|\alpha|^2 + \frac{1}{2}\right)
  \overset{|\alpha|^2\rightarrow\infty}{\longrightarrow} \hbar \omega
  |\alpha|^2.
  \label{Havg1}
\end{equation}
When the system is in a coherent state, we can effectively substitute
the $\hat{a}$ and $\hat{a}^\dagger$ operators in Eq.~\eqref{xtc} with
the complex numbers $\alpha$ and $\alpha^*$, which gives a classical
trajectory
\begin{equation}
  x_{\mathrm{classical}}(t) = \mathcal{C} \left(\alpha \,e^{-i\omega t} \,+\,
  \alpha^*\, e^{i\omega t}\right).
  \label{xtc2}
\end{equation}
This trajectory has amplitude $2\mathcal{C}|\alpha|$.  At maximum
displacement, the classical momentum is zero, so the total energy of
the classical oscillator must be
\begin{equation}
  E_{\mathrm{classical}}
  = \frac{1}{2} m\omega^2 \Big(2\mathcal{C}|\alpha|\Big)^2
  = 2m\omega^2 \mathcal{C}^2 |\alpha|^2.
  \label{Eclassical}
\end{equation}
Equating the classical energy \eqref{Eclassical} to the coherent state
energy \eqref{Havg1} gives
\begin{equation}
  \mathcal{C} = \sqrt{\frac{\hbar}{2m\omega}},
\end{equation}
which is precisely the scale factor found in Eq.~\eqref{xtquantum}.

\subsection{A scalar boson field}

We now have the tools available to understand the connection between a
very simple classical field and its quantum counterpart.  Consider a
classical scalar field variable $f(x,t)$, defined in one spatial
dimension, whose classical equation of motion is the wave equation:
\begin{equation}
  \frac{\partial^2\! f(x,t)}{\partial x^2}
  = \frac{1}{c^2} \frac{\partial^2\! f(x,t)}{\partial t^2}.
  \label{waveeqn}
\end{equation}
The constant $c$ is a wave speed.  This sort of classical field arises
in many physical contexts, including the propagation of sound through
air, in which case $c$ is the speed of sound.

For simplicity, let us first assume that the field is defined within a
finite interval of length $L$, with periodic boundary conditions:
$f(x,t) \equiv f(x+L, t)$.  Solutions to the wave equation can be
described by the following ansatz:
\begin{equation}
  f(x,t) = \sum_n \left( \mathcal{A}_n\, \varphi_n(x) \, e^{-i\omega_n t}
  + \mathcal{A}_n^*\, \varphi_n^*(x) \, e^{i\omega_n t}\right).
  \label{fnorm}
\end{equation}
This ansatz describes a superposition of \textbf{normal modes}.  Each
normal mode (labelled $n$) varies harmonically in time with a mode
frequency $\omega_n$, and varies in space according to a complex mode
profile $\varphi_n(x)$; its overall magnitude and phase is specified
by the mode amplitude $\mathcal{A}_n$.  The mode profiles are
normalized according to some fixed convention, e.g.
\begin{equation}
  \int_0^L dx \, |\varphi_n(x)|^2 = 1.
\end{equation}

Substituting Eq.~\eqref{fnorm} into Eq.~\eqref{waveeqn}, and using
the periodic boundary conditions, gives
\begin{align}
  \varphi_n(x) = \frac{1}{\sqrt{L}}\, \exp\left(ik_n x\right), \;\;\;
  \omega_n = c k_n = \frac{2\pi c n}{L}, \;\;\; n \in \mathbb{Z}.
  \label{classical_modes}
\end{align}
These mode profiles are orthonormal:
\begin{equation}
  \int_0^L dx \, \varphi_m^*(x) \, \varphi_n(x) = \delta_{mn}.
\end{equation}
Each normal mode carries energy.  By analogy with the classical
harmonic oscillator---see Eqs.~\eqref{xtc2}--\eqref{Eclassical}---we
assume that the energy density (i.e., energy per unit length) is
proportional to the square of the field variable.  Let it have the
form
\begin{equation}
  U(x) = 2 \rho \sum_n|\mathcal{A}_n|^2 \, |\varphi_n(x)|^2,
  \label{Edensity}
\end{equation}
where $\rho$ is some parameter that has to be derived from the
underlying physical context.  For example, for acoustic modes, $\rho$
is the mass density of the underlying acoustic medium; in the next
chapter, we will see a concrete example involving the energy density
of an electromagnetic mode.  From Eq.~\eqref{Edensity}, the total
energy is
\begin{equation}
  E = \int_0^L dx \; U(x) = 2  \rho \sum_n |\mathcal{A}_n|^2.
  \label{classical_energy}
\end{equation}

To quantize the classical field, we treat each normal mode as an
independent oscillator, with creation and annihilation operators
$\hat{a}_n^\dagger$ and $\hat{a}_n$ satisfying
\begin{equation}
  \big[\,\hat{a}_m\,,\, \hat{a}_n^\dagger\big] = \delta_{mn}, \;\;\;
  \big[\,\hat{a}_m\,,\, \hat{a}_n\big] =
  \big[\,\hat{a}_m^\dagger\,,\, \hat{a}_n^\dagger\big] = 0.
\end{equation}
We then take the Hamiltonian to be that of a set of independent
harmonic oscillators:
\begin{equation}
  \hat{H} = \sum_n \hbar \omega_n \hat{a}_n^\dagger \hat{a}_n + E_0,
\end{equation}
where $E_0$ is the ground-state energy.  Just like in the previous
section, we can define a Heisenberg-picture annihilation operator, and
solving its Heisenberg equation yields
\begin{equation}
  \hat{a}_n(t) = \hat{a}_n e^{-i\omega_n t}.
\end{equation}
We then define a Schr\"odinger picture Hermitian operator of the form
\begin{equation}
  \hat{f}(x) = \sum_n \mathcal{C}_n \Big(\hat{a}_n \varphi_n(x)
  + \hat{a}_n^\dagger \varphi_n^*(x) \Big),
\end{equation}
where $\mathcal{C}_n$ is a real constant (one for each normal mode).
The corresponding Heisenberg picture operator is
\begin{equation}
  \hat{f}(x,t) = \sum_n \mathcal{C}_n \Big(\hat{a}_n \varphi_n(x) \,e^{-i\omega_nt}
  + \hat{a}_n^\dagger \varphi_n^*(x) \, e^{i\omega_nt} \Big),
  \label{fxt}
\end{equation}
which is the quantum version of the classical solution
\eqref{fnorm}.

To determine the $\mathcal{C}_n$ scale factors, we consider the
classical limit.  The procedure is a straightfoward generalization of
the \hyperref[sec:ho]{previously discussed} harmonic oscillator case.
We introduce a state $|\alpha\rangle$ that is a coherent state for all
the normal modes; i.e., for any given $n$,
\begin{equation}
  \hat{a}_n |\alpha\rangle = \alpha_n |\alpha\rangle
\end{equation}
for some $\alpha_n \in \mathbb{C}$.  The energy expectation value is
\begin{equation}
  \langle E\rangle = \sum_n \hbar \omega_n |\alpha_n|^2.
  \label{Ecoherent_field}
\end{equation}
In the coherent state, the $\hat{a}_n$ and $\hat{a}_n^\dagger$
operators in Eq.~\eqref{fxt} can be replaced with $\alpha_n$ and
$\alpha_n^*$ respectively.  Hence, we identify $\mathcal{C}_n
\alpha_n$ as the classical mode amplitude $\mathcal{A}_n$ in
Eq.~\eqref{fnorm}.  In order for the classical energy
\eqref{classical_energy} to match the coherent state energy
\eqref{Ecoherent_field}, we need
\begin{equation}
  2\rho |\mathcal{A}_n|^2 = 2 \rho |\mathcal{C}_n\alpha_n|^2
  = \hbar \omega_n |\alpha_n|^2 \quad \Rightarrow \quad
  \mathcal{C}_n = \sqrt{\frac{\hbar\omega_n}{2\rho}}.
\end{equation}
Hence, the appropriate field operator is
\begin{equation}
  \hat{f}(x,t) = \sum_n \sqrt{\frac{\hbar\omega_n}{2\rho}}
  \Big(\hat{a}_n \varphi_n(x) \,e^{-i\omega_nt}
  + \hat{a}_n^\dagger \varphi_n^*(x) \, e^{i\omega_nt} \Big).
\end{equation}
Returning to the Schr\"odinger picture, and using the explicit mode
profiles from Eq.~\eqref{classical_modes}, we get
\begin{equation}
  \hat{f}(x) = \sum_n \sqrt{\frac{\hbar\omega_n}{2\rho L}}
  \Big(\hat{a}_n e^{ik_n x}
  + \hat{a}_n^\dagger e^{-ik_n x} \Big).
\end{equation}

Finally, if we are interested in the infinite-$L$ limit, we can
convert the sum over $n$ into an integral.
The result is
\begin{equation}
  \hat{f}(x) = \int dk\; \sqrt{\frac{\hbar\omega(k)}{4\pi\rho}}
  \Big(\hat{a}(k)\, e^{ik x} + \hat{a}^\dagger(k)\, e^{-ik x} \Big),
\end{equation}
where $\hat{a}(k)$ denotes a rescaled annihilation operator defined by
$\hat{a}_n \rightarrow \sqrt{2\pi/L}\; \hat{a}(k)$, satisfying
\begin{align}
  \Big[\,\hat{a}(k)\,,\, \hat{a}^\dagger(k')\,\Big] = \delta(k-k').
\end{align}

\subsection{Looking ahead}
\label{sec:outlook}

In the next chapter, we will use these ideas to formulate a quantum
theory of electromagnetism.  This is a bosonic quantum field theory in
which the creation and annihilation operators act upon particles
called \textbf{photons}---the elementary particles of light.  Linear
combinations of these photon operators can be used to define Hermitian
field operators that correspond to the classical electromagnetic field
variables.  In the classical limit, the quantum field theory reduces
to Maxwell's theory of the electromagnetic field.

It is hard to overstate the importance of quantum field theories in
physics.  At a fundamental level, all currently-known elementary
particles can be described using a quantum field theory called the
Standard Model.  These particles are roughly divided into two
categories.  The first consists of ``force-carrying'' particles:
photons (which carry the electromagnetic force), gluons (which carry
the strong nuclear force), and the $W/Z$ bosons (which carry the weak
nuclear force); these particles are excitations of bosonic quantum
fields, similar to the one described in the previous section.  The
second category consists of ``particles of matter'', such as
electrons, quarks, and neutrinos; these are excitations of
\textit{fermionic} quantum fields, whose creation and annihilation
operators obey anticommutation relations.

As Wilczek [\ref{cite:wilczek}] has pointed out, the modern picture of
fundamental physics bears a striking resemblence to the old idea of
``luminiferous ether'': a medium filling all of space and time, whose
vibrations are physically-observable light waves.  The key difference,
as we now understand, is that the ether is not a classical medium, but
one obeying the rules of quantum mechanics.  (Another difference,
which we have not discussed so far, is that modern field theories can
be made compatible with relativity.)

It is quite compelling to think of fields, not individual particles,
as the fundamental objects in the universe.  This point of view
``explains'', in a sense, why all particles of the same type have the
same properties (e.g., why all electrons in the universe have exactly
the same mass).  The particles themselves are not fundamental; they
are excitations of deeper, more fundamental entities---quantum fields!

\section*{Exercises}

\begin{enumerate}
\item Consider a system of two identical particles.  Each
  single-particle Hilbert space $\mathscr{H}^{(1)}$ is spanned by a
  basis $\{|\mu_i\}$.  The exchange operator is defined on
  $\mathscr{H}^{(2)} = \mathscr{H}^{(1)} \otimes \mathscr{H}^{(1)}$ by
  \begin{equation}
    P \Big (\sum_{ij} \psi_{ij} |\mu_i\rangle|\mu_j\rangle \Big)
    \;\equiv\;  \sum_{ij} \psi_{ij} |\mu_j\rangle|\mu_i\rangle.
  \end{equation}
  Prove that $\hat{P}$ is linear, unitary, and Hermitian.  Moreover,
  prove that the operation is basis-independent: i.e., given any other
  basis $\{\nu_j\}$ that spans $\mathscr{H}^{(1)}$,
  \begin{equation}
    P \Big (\sum_{ij} \varphi_{ij} |\nu_i\rangle|\nu_j\rangle \Big)
    \;=\;  \sum_{ij} \varphi_{ij} |\nu_j\rangle|\nu_i\rangle.
  \end{equation}
  \label{ex:1}

\item
  Prove that the exchange operator commutes with the Hamiltonian
  \begin{equation}
    \hat{H} = - \frac{\hbar^2}{2m_e} \Big(\nabla_1^2 + \nabla^2_2\Big) + \frac{e^2}{4\pi\varepsilon_0|\mathbf{r}_1 - \mathbf{r}_2|}.
  \end{equation}
  \label{ex:2}

\item
  An $N$-boson state can be written as
  \begin{equation}
    |\phi_1,\phi_2,\dots,\phi_N\rangle = \mathcal{N} \sum_p \Big(|\phi_{p(1)}\rangle  |\phi_{p(2)}\rangle  |\phi_{p(3)}\rangle  \cdots  |\phi_{p(N)}\rangle\Big).
  \end{equation}
  Prove that the normalization constant is
  \begin{equation}
    \mathcal{N} = \sqrt{\frac{1}{N!\prod_\mu n_\mu!}},
  \end{equation}
  where $n_\mu$ denotes the number of particles occupying the
  single-particle state $\mu$.
  \label{ex:boson_norm}

\item $\mathscr{H}_{S}^{(N)}$ and $\mathscr{H}_{A}^{(N)}$ denote the
  Hilbert spaces of $N$-particle states that are totally symmetric and
  totally antisymmetric under exchange, respectively.  Prove that
  \begin{align}
    \mathrm{dim}\left(\mathscr{H}_{S}^{(N)}\right) &= \frac{(d+N-1)!}{N!(d-1)!}, \\
    \mathrm{dim}\left(\mathscr{H}_{A}^{(N)}\right) &= \frac{d!}{N!(d-N)!}.
  \end{align}

\item
  Prove that for boson creation and annihilation operators, $[\hat{a}_\mu,\hat{a}_\nu] = [\hat{a}_\mu^\dagger,\hat{a}_\nu^\dagger] = 0$.
  \label{ex:boson_commutators}

\item
  Let $\hat{A}_1$ be an observable (Hermitian operator) for
  single-particle states.  Given a single-particle basis
  $\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$, define the
  bosonic multi-particle observable
  \begin{equation}
    \hat{A} = \sum_{\mu\nu} \,a^\dagger_\mu \; \langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle \; a_\nu,
  \end{equation}
  where $a_\mu^\dagger$ and $a_\mu$ are creation and annihilation
  operators satisfying the usual bosonic commutation relations,
  $[a_\mu,a_\nu] = 0$ and $[a_\mu,a_\nu^\dagger] = \delta_{\mu\nu}$.
  Prove that $\hat{A}$ commutes with the total number operator:
  \begin{equation}
    \Big[\hat{A}, \sum_\mu a^\dagger_\mu a_\mu \Big] = 0.
  \end{equation}
  Next, repeat the proof for a fermionic multi-particle observable
  \begin{equation}
    \hat{A} = \sum_{\mu\nu} \,c^\dagger_\mu \; \langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle \; c_\nu,
  \end{equation}
  where $c_\mu^\dagger$ and $c_\mu$ are creation and annihilation
  operators satisfying the fermionic anticommutation relations,
  $\{c_\mu,c_\nu\} = 0$ and $\{c_\mu,c_\nu^\dagger\} = \delta_{\mu\nu}$.
  In this case, prove that
  \begin{equation}
    \Big[\hat{A}, \sum_\mu c^\dagger_\mu c_\mu \Big] = 0.
  \end{equation}
  \label{ex:n_conserved}

\end{enumerate}

\section*{Further Reading}

\begin{enumerate}[[1{]}]
\item Bransden \& Joachain, \S10.1--10.5

\item Sakurai, \S6

\item I.~Duck and E.~C.~G.~Sundarshan, \textit{Pauli and the Spin-Statistics Theorem}, World Scientific (1998).
  \label{cite:duck}
  
\item J.~M.~Leinaas and J.~Myrheim, \textit{On the Theory of Identical Particles}, Nuovo Cimento B \textbf{37}, 1 (1977).
  \label{cite:leinaas}
  
\item F.~Wilczek, \textit{The Persistence of Ether}, Physics Today
  \textbf{52}, 11 (1999). [\href{http://physicstoday.scitation.org/doi/10.1063/1.882562}{link}]
\label{cite:wilczek}
\end{enumerate}

\end{document}


%% For decades after the discovery of quantum mechanics, the quantum
%% double-slit experiment was just a ``thought experiment'', meant to
%% illustrate the features of quantum mechanics that had been uncovered
%% by other, more complicated experiments.  Nowadays, the most convenient
%% way to do the experiment is with light, using single-photon sources
%% and single-photon detectors.  Quantum interference has also been
%% demonstrated experimentally using electrons, neutrons, and even
%% large-scale particles such as buckyballs.
