\documentclass[pra,12pt]{revtex4}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{color}
\usepackage{mathrsfs}
\usepackage{enumerate}
\usepackage{epigraph}
\usepackage{framed}
\usepackage[pdfborder={0 0 0},colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}

\def\ket#1{\left|#1\right\rangle}
\def\bra#1{\left\langle#1\right|}
\def\braket#1{\left\langle#1\right\rangle}

\usepackage{fancyhdr}
\fancyhf{}
\lhead{\tiny Y.~D.~Chong}
\rhead{\scriptsize PH4401: Quantum Mechanics III}
\lfoot{}
\rfoot{\thepage}
\pagestyle{fancy}

\setlength{\parindent}{14pt}
\renewcommand{\theequation}{4.\arabic{equation}}

\renewcommand{\baselinestretch}{1.0}
\setlength{\parskip}{0.07in}
\setlength{\epigraphwidth}{.6\textwidth}

\begin{document}
\setcounter{page}{59}

\begin{center}
{\Large \textbf{Chapter 4: Identical Particles}}
\end{center}

\epigraph{These our actors,\\As I foretold you, were all spirits
  and\\Are melted into air, into thin air: \\And, like the baseless
  fabric of this vision,\\ The cloud-capp'd towers, the gorgeous
  palaces,\\ The solemn temples, the great globe itself,\\ Yea, all
  which it inherit, shall dissolve\\And, like this insubstantial
  pageant faded, \\ Leave not a rack behind.}{William Shakespeare,
  \textit{The Tempest}}

\section{Quantum states of identical particles}

In the previous chapter, we discussed how the principles of quantum
mechanics apply to systems of multiple particles.  That discussion
omitted an important feature of multi-particle systems, namely the
fact that particles of the same type are fundamentally
indistinguishable from each other.  As it turns out,
indistinguishability imposes a strong constraint on the form of the
multi-particle quantum states, and looking into this will ultimately
lead us to a fundamental re-interpretation of what ``particles'' are.

\subsection{Particle exchange symmetry}

Suppose we have two particles of the same type, e.g.~two electrons.
It is a fact of Nature that all electrons have identical physical
properties: the same mass, same charge, same total spin, etc.  As a
consequence, the single-particle Hilbert spaces of the two electrons
must be mathematically identical.  Let us denote this space by
$\mathscr{H}^{(1)}$.  For a two-electron system, the Hilbert space is
a tensor product of two single-electron Hilbert spaces, denoted by
\begin{equation}
  \mathscr{H}^{(2)} = \mathscr{H}^{(1)} \otimes \mathscr{H}^{(1)}.
\end{equation}
Moreover, any Hamiltonian must affect the two electrons in a
symmetrical way.  An example of such a Hamiltonian is
\begin{equation}
  \hat{H} = \frac{1}{2m_e} \Big(|\hat{\mathbf{p}}_1|^2 + |\hat{\mathbf{p}}_2|^2\Big) + \frac{e^2}{4\pi\varepsilon_0|\hat{\mathbf{r}}_1 - \hat{\mathbf{r}}_2|},
\end{equation}
consisting of the non-relativistic kinetic energies and the Coulomb
potential energy.  Operators $\hat{\mathbf{p}}_1$ and
$\hat{\mathbf{r}}_1$ act on electron 1, while $\hat{\mathbf{p}}_2$ and
$\hat{\mathbf{r}}_2$ act on electron 2.

Evidently, this Hamiltonian is invariant under an interchange of the
operators acting on the two electrons (i.e., $\hat{\mathbf{p}}_1
\leftrightarrow \hat{\mathbf{p}}_2$ and $\hat{\mathbf{r}}_1
\leftrightarrow \hat{\mathbf{r}}_2$).  This can be regarded as a kind
of symmetry, called \textbf{exchange symmetry}.  As we know,
symmetries of quantum systems can be represented by unitary operators
that commute with the Hamiltonian.  Exchange symmetry is represented
by an operator $\hat{P}$, defined as follows: let $\{|\mu\rangle\}$
be a basis for the single-electron Hilbert space $\mathscr{H}^{(1)}$;
then $\hat{P}$ interchanges the basis vectors for the two electrons:
\begin{align}
  \begin{aligned}\hat{P} \Big (\sum_{\mu\nu}
    \psi_{\mu\nu} |\mu\rangle|\nu\rangle \Big)
    \;&\equiv\;  \sum_{\mu\nu} \psi_{\mu\nu} |\nu\rangle|\mu\rangle \\
    &= \sum_{\mu\nu} \psi_{\nu\mu} |\nu\rangle|\mu\rangle
    \;\;\;\textrm{(interchanging $\mu\leftrightarrow \nu$
      in the double sum)}\end{aligned}
\end{align}
The exchange operator has the following properties:
\begin{enumerate}
\item $\hat{P}^2 = \hat{I},$ where $\hat{I}$ is the identity operator.

\item $\hat{P}$ is linear, unitary, and Hermitian (see
  \hyperref[ex:1]{Exercise 1}).
  
\item The effect of $\hat{P}$ does not depend on the choice
  of basis (see \hyperref[ex:1]{Exercise 1}).

\item $\hat{P}$ commutes with the above Hamiltonian $\hat{H}$; more
  generally, it commutes with any two-particle operator built out of
  symmetrical combinations of single-particle operators (see
  \hyperref[ex:2]{Exercise 2}).
\end{enumerate}

According to Noether's theorem, any symmetry implies a conservation
law.  In the case of exchange symmetry, $\hat{P}$ is both Hermitian
\textit{and} unitary, so we can take the conserved quantity to be the
eigenvalue of $\hat{P}$ itself.  We call this eigenvalue, $p$, the
\textbf{exchange parity}.  Given that $\hat{P}^2 = \hat{I}$, there are
just two possibilities:
\begin{equation}
  \hat{P} |\psi\rangle = p|\psi\rangle \;\;\;\Rightarrow\;\;\; p = \begin{cases}+1 & \textrm{(``symmetric\;state'')}, \;\;\textrm{or} \\ -1 & \textrm{(``antisymmetric\;state'').}\end{cases}
\end{equation}
Since $\hat{P}$ commutes with $\hat{H}$, if the system starts out in
an eigenstate of $\hat{P}$ with parity $p$, it retains the same parity
for all subsequent times.

The concept of exchange parity generalizes to systems of more than two
particles.  Given $N$ particles, we can define a set of exchange
operators $\hat{P}_{ij}$, where $i,j\in\{1,2,\dots,N\}$ and $i\ne j$,
such that $\hat{P}_{ij}$ exchanges particle $i$ and particle $j$.  If
the particles are identical, the Hamiltonian must commute with
\textit{all} the exchange operators, so the parities ($\pm 1$) are
individually conserved.

We now invoke the following postulates:
\begin{enumerate}
\item A multi-particle state of identical particles is an eigenstate
  of every $\hat{P}_{ij}$.

\item For each $\hat{P}_{ij}$, the exchange parity $p_{ij}$ has the
  same value: i.e., all $+1$ or all $-1$.

\item The exchange parity $p_{ij}$ is determined solely by the type of
  particle involved.
\end{enumerate}
Do \textit{not} think of these as statements as being derived from
more fundamental facts!  Rather, they are hypotheses about the way
particles behave---facts about Nature that physicists have managed to
deduce through examining a wide assortment of empirical evidence.  Our
task, for now, shall be to explore the consequences of these
hypotheses.

Particles that have symmetric states ($p_{ij} = +1$) are called
\textbf{bosons}.  It turns out that the elementary particles that
``carry'' the fundamental forces are all bosons: these are the photons
(elementary particles of light, which carry the electromagnetic
force), gluons (elementary particles that carry the strong nuclear
force, responsible for binding protons and neutrons together), and $W$
and $Z$ bosons (particles that carry the weak nuclear force
responsible for beta decay).  Other bosons include particles that
carry non-fundamental forces, such as phonons (particles of sound), as
well as certain composite particles such as alpha particles (helium-4
nuclei).

Particles that have antisymmetric states ($p_{ij} = -1$) are called
\textbf{fermions}.  All the elementary particles of ``matter'' are
fermions: electrons, muons, tauons, quarks, neutrinos, and their
anti-particles (positrons, anti-neutrinos, etc.).  Certain composite
particles are also fermions, including protons and neutrons, which are
each composed of three quarks.

\subsection{Bosons}
\label{sec:bosons}

A state of $N$ bosons must be symmetric under every possible exchange
operator:
\begin{equation}
  \hat{P}_{ij}\; |\psi\rangle = |\psi\rangle \;\;\; \forall\, i, j \in\{1,\dots,N\},\;\; i\ne j.
  \label{sym}
\end{equation}

There is a standard way to construct multi-particle states obeying
this symmetry condition.  First, consider a two-boson system ($N =
2$).  If both bosons occupy the same single-particle state,
$|\mu\rangle \in \mathscr{H}^{(1)}$, the two-boson state is simply
\begin{equation}
  |\mu,\mu\rangle = |\mu\rangle  |\mu\rangle.
\end{equation}
This evidently satisfies the required symmetry condition \eqref{sym}.
Next, suppose the two bosons occupy \textit{different} single-particle
states, $|\mu\rangle$ and $|\nu\rangle$, which are orthonormal vectors
in $\mathscr{H}^{(1)}$.  It would be wrong to write the two-boson
state as $|\mu\rangle |\nu\rangle$, because the particles would not be
symmetric under exchange.  Instead, we construct the multi-particle
state
\begin{equation}
  |\mu,\nu\rangle = \frac{1}{\sqrt{2}} \Big( |\mu\rangle |\nu\rangle +
  |\nu\rangle |\mu\rangle\Big).
  \label{bosonmunu}
\end{equation}
This has the appropriate exchange symmetry:
\begin{equation}
  \hat{P}_{12}\,|\mu,\nu\rangle \;=\; \frac{1}{\sqrt{2}}
  \Big( |\nu\rangle  |\mu\rangle + |\mu\rangle  |\nu\rangle\Big)
  \,=\, |\mu, \nu\rangle.
\end{equation}
The $1/\sqrt{2}$ factor in Eq.~\eqref{bosonmunu} ensures that the
state is normalized (check for yourself that this is true---it
requires $|\mu\rangle$ and $|\nu\rangle$ to be orthonormal to work
out).

The above construction can be generalized to arbitrary numbers of
bosons.  Suppose we have $N$ bosons occupying single-particle states
enumerated by
\begin{equation}
  |\phi_1\rangle, \, |\phi_2\rangle, \, |\phi_3\rangle, \, \dots, |\phi_N\rangle.
\end{equation}
Each of the states $|\phi_j\rangle$ is drawn from an orthonormal basis
set $\{|\mu\rangle\}$ for $\mathscr{H}^{(1)}$.  We use the $\phi$
labels to indicate that the listed states can overlap.  For example,
we could have $|\phi_1\rangle = |\phi_2\rangle = |\mu\rangle$, meaning
that the single-particle state $|\mu\rangle$ is occupied by two
particles.

The $N$-boson state can now be written as
\begin{equation}
  |\phi_1,\phi_2,\dots,\phi_N\rangle = \mathcal{N} \sum_p
  \Big(|\phi_{p(1)}\rangle  |\phi_{p(2)}\rangle  |\phi_{p(3)}\rangle  \cdots
  |\phi_{p(N)}\rangle\Big).
  \label{nbosons}
\end{equation}
The sum is taken over each of the $N!$ permutations acting on
$\{1,2,\dots,N\}$.  For each permutation $p$, we let $p(j)$ denote the
integer that $j$ is permuted into.

The prefactor $\mathcal{N}$ is a normalization constant, and it can be
shown that its appropriate value is
\begin{equation}
  \mathcal{N} = \sqrt{\frac{1}{N!n_a!n_b!\cdots}},
\end{equation}
where $n_\mu$ denotes the number of particles in each distinct state
$|\varphi_\mu\rangle$, and $N = n_\alpha + n_\beta + \cdots$ is the
total number of particles.  The proof of this is left as an exercise
(\hyperref[ex:boson_norm]{Exercise 3}).

To see that the above $N$-particle state is symmetric under exchange,
apply an arbitrary exchange operator $\hat{P}_{ij}$:
\begin{align}
  \begin{aligned}\hat{P}_{ij}|\phi_1,\phi_2,\dots,\phi_N\rangle &= \mathcal{N} \sum_p \hat{P}_{ij} \Big(\cdots  |\phi_{p(i)}\rangle  \cdots  |\phi_{p(j)}\rangle\cdots\Big) \\&= \mathcal{N} \sum_p \Big(\cdots  |\phi_{p(j)}\rangle  \cdots  |\phi_{p(i)}\rangle\cdots\Big).\end{aligned}
\end{align}
In each term of the sum, two states $i$ and $j$ are interchanged.
Since the sum runs through all permutations of the states, the result
is the same with or without the exchange, so we still end up with
$|\phi_1,\phi_2,\dots,\phi_N\rangle$.  Therefore, the multi-particle
state is symmetric under every possible exchange operation.

\begin{framed}
\noindent
\textit{Example}---A three-boson system has two particles in a state
$|\mu\rangle$, and one particle in a different state $|\nu\rangle$.
To express the three-particle state, define $\{|\phi_1\rangle,
|\phi_2\rangle, |\phi_3\rangle\}$ where $|\phi_1\rangle =
|\phi_2\rangle = |\mu\rangle$ and $|\phi_3\rangle = |\nu\rangle$.
Then
\begin{align}
  \begin{aligned}
    |\phi_1,\phi_2,\phi_3\rangle &= \frac{1}{\sqrt{12}} \Big( \;
    |\phi_1\rangle|\phi_2\rangle|\phi_3\rangle +
    |\phi_2\rangle|\phi_3\rangle|\phi_1\rangle +
    |\phi_3\rangle|\phi_1\rangle|\phi_2\rangle \\
    &\qquad\quad\, +
    |\phi_1\rangle|\phi_3\rangle|\phi_2\rangle +
    |\phi_3\rangle|\phi_2\rangle|\phi_1\rangle +
    |\phi_2\rangle|\phi_1\rangle|\phi_3\rangle\Big) \\
    &= \frac{1}{\sqrt{3}} \;\, \Big(\;
    |\mu\rangle|\mu\rangle|\nu\rangle +
    |\mu\rangle|\nu\rangle|\mu\rangle +
    |\nu\rangle|\mu\rangle|\mu\rangle\Big).
  \end{aligned}
\end{align}
The exchange symmetry operators have the expected effects:
\begin{align}
  \begin{aligned}
    \hat{P}_{12}|\phi_1,\phi_2,\phi_3\rangle
    &= \frac{1}{\sqrt{3}} \Big(
    |\mu\rangle|\mu\rangle|\nu\rangle +
    |\nu\rangle|\mu\rangle|\mu\rangle +
    |\mu\rangle|\nu\rangle|\mu\rangle\Big)
    = |\phi_1,\phi_2,\phi_3\rangle \\
    \hat{P}_{23}|\phi_1,\phi_2,\phi_3\rangle
    &= \frac{1}{\sqrt{3}} \Big(
    |\mu\rangle|\nu\rangle|\mu\rangle +
    |\mu\rangle|\mu\rangle|\nu\rangle +
    |\nu\rangle|\mu\rangle|\mu\rangle\Big)
    = |\phi_1,\phi_2,\phi_3\rangle\\
    \hat{P}_{13}|\phi_1,\phi_2,\phi_3\rangle
    &= \frac{1}{\sqrt{3}} \Big(
    |\nu\rangle|\mu\rangle|\mu\rangle +
    |\mu\rangle|\nu\rangle|\mu\rangle +
    |\mu\rangle|\mu\rangle|\nu\rangle\Big)
    = |\phi_1,\phi_2,\phi_3\rangle.
  \end{aligned}
\end{align}
\end{framed}

\subsection{Fermions}
\label{sec:fermions}

A state of $N$ fermions must be antisymmetric under every possible
exchange operator:
\begin{equation}
  \hat{P}_{ij}\; |\psi\rangle = -|\psi\rangle \;\;\; \forall\, i,j\in\{1,\dots,N\}, \; i\ne j.
\end{equation}
Similar to the bosonic case, we can explicitly construct multi-fermion
states based on the occupancy of single-particle state.

First consider $N=2$, with the fermions occupying the single-particle
states $|\mu\rangle$ and $|\nu\rangle$ (which, once again, we assume
to be orthonormal).  The appropriate two-particle state is
\begin{equation}
  |\mu,\nu\rangle = \frac{1}{\sqrt{2}}
  \Big(|\mu\rangle|\nu\rangle - |\nu\rangle|\mu\rangle\Big).
  \label{two_fermions}
\end{equation}
We can easily check that this is antisymmetric:
\begin{equation}
  \hat{P}_{12} |\mu,\nu\rangle = \frac{1}{\sqrt{2}}
  \Big(|\nu\rangle|\mu\rangle - |\mu\rangle|\nu\rangle\Big)
  = - |\mu,\nu\rangle.
\end{equation}
Note that if $|\mu\rangle$ and $|\nu\rangle$ are the same
single-particle state, Eq.~\eqref{two_fermions} doesn't work, since
the two terms would cancel to give the zero vector, which is not a
valid quantum state.  This is a manifestation of the \textbf{Pauli
  exclusion principle}, which states that two fermions cannot occupy
the same single-particle state.  Thus, each single-particle state is
either unoccupied or occupied by one fermion.

For general $N$, let the occupied single-particle states be
$|\phi_1\rangle$, $|\phi_2\rangle$, $\dots, |\phi_N\rangle$, each
drawn from some orthonormal basis $\{|\mu\rangle\}$ for
$\mathscr{H}^{(1)}$, and each distinct.  Then the appropriate
$N$-fermion state is
\begin{equation}
  |\phi_1,\dots,\phi_N\rangle = \frac{1}{\sqrt{N!}} \sum_p s(p)\, |\phi_{p(1)}\rangle |\phi_{p(2)}\rangle \cdots |\phi_{p(N)}\rangle.
  \label{Nfermions}
\end{equation}
It is up to you to verify that the $1/\sqrt{N!}$ prefactor is the
right normalization constant.  The sum is taken over every permutation
$p$ of the sequence $\{1,2,\dots,N\}$, and each term in the sum has a
coefficient $s(p)$ denoting the \textbf{parity of the permutation}.
The parity of any permutation $p$ is defined as $+1$ if $p$ is
constructed from an even number of transpositions (i.e., exchanges of
adjacent elements) starting from the sequence $\{1,2,\dots,N\}$, and
$-1$ if $p$ involves an odd number of transpositions.

Note that if $|\phi_1\rangle, \dots, |\phi_N\rangle$ are not all
distinct single-particle states, Eq.~\eqref{Nfermions} would yield the
zero vector, since the terms in the sum over $p$ cancel out pairwise
(you can check this).  This is once again consistent with the Pauli
exclusion principle.

Let's look at a couple of concrete examples.

\begin{framed}
\noindent
\textit{Example}---For $N=2$, the sequence $\{1,2\}$ has two permutations:
\begin{align}
  \begin{aligned}
    p_1 : \{1,2\} &\rightarrow \{1,2\}, \;\;\;s(p_1) = +1 \\ p_2 : \{1,2\} &\rightarrow \{2,1\}, \;\;\;s(p_2) = -1.\end{aligned}
\end{align}
Plugging these into Eq.~\eqref{Nfermions} yields the
previously-discussed two-fermion state \eqref{two_fermions}.
\end{framed}

\begin{framed}
\noindent
\textit{Example}---For $N=3$, the sequence $\{1,2,3\}$ has $3!=6$ permutations:
\begin{align}
  \begin{aligned}
  p_1 : \{1,2,3\} &\rightarrow \{1,2,3\}, \;\;\;s(p_1) = +1 \\
  p_2 : \{1,2,3\} &\rightarrow \{2,1,3\}, \;\;\;s(p_2) = -1 \\
  p_3 : \{1,2,3\} &\rightarrow \{2,3,1\}, \;\;\;s(p_3) = +1 \\
  p_4 : \{1,2,3\} &\rightarrow \{3,2,1\}, \;\;\;s(p_4) = -1 \\
  p_5 : \{1,2,3\} &\rightarrow \{3,1,2\}, \;\;\;s(p_5) = +1 \\
  p_6 : \{1,2,3\} &\rightarrow \{1,3,2\}, \;\;\;s(p_6) = -1.\end{aligned}
\end{align}
The permutations can be generated by consecutive transpositions of
elements.  Each time we perform a transposition, the sign of $s(p)$ is
reversed.  Hence, the three-fermion state is
\begin{align}
  \begin{aligned}
    |\phi_1, \phi_2, \phi_3\rangle
    &= \frac{1}{\sqrt{6}} \Big(
    |\phi_1\rangle |\phi_2\rangle |\phi_3\rangle
    - |\phi_2\rangle |\phi_1\rangle |\phi_3\rangle \\
    & \qquad\; + |\phi_2\rangle |\phi_3\rangle |\phi_1\rangle
    - |\phi_3\rangle |\phi_2\rangle |\phi_1\rangle \\
    & \qquad\; + |\phi_2\rangle |\phi_3\rangle |\phi_1\rangle
    - |\phi_1\rangle |\phi_3\rangle |\phi_2\rangle \Big).
  \end{aligned}
\end{align}
\end{framed}

We now see why Eq.~\eqref{Nfermions} describes the $N$-fermion state.
Let us apply $\hat{P}_{ij}$ to it:
\begin{align}
  \begin{aligned}
    \hat{P}_{ij}|\phi_1,\dots,\phi_N\rangle
    &= \frac{1}{\sqrt{N!}} \sum_p s(p)\, \hat{P}_{ij}
    \big[\cdots |\phi_{p(i)}\rangle \cdots
      |\phi_{p(j)}\rangle \cdots\big] \\
    &= \frac{1}{\sqrt{N!}} \sum_p s(p)\, \big[\cdots |\phi_{p(j)}\rangle
      \cdots |\phi_{p(i)}\rangle \cdots\big].
  \end{aligned}
\end{align}
Within each term in the above sum, the single-particle states for
$p(i)$ and $p(j)$ have exchanged places.  The resulting term must be
an exact match for another term in the original expression for
$|\phi_1,\dots,\phi_N\rangle$, since the sum runs over all
possible permutations, except for one difference: the coefficient
$s(p)$ must have an \textit{opposite} sign, since the two permutations
are related by an exchange.  It follows that
$\hat{P}_{ij}|\phi_1,\dots,\phi_N\rangle = -
|\phi_1,\dots,\phi_N\rangle$ for any choice of $i \ne j$.

\subsection{Distinguishing particles}

When studying the phenomenon of entanglement in the previous chapter,
we implicitly assumed that the particles are distinguishable.  For
example, in the EPR thought experiment, we started with the
two-particle state
\begin{equation}
  |\psi_{\mathrm{EPR}}\rangle = \frac{1}{\sqrt{2}} \Big(|\!+\!z\rangle |\!-\!z\rangle
  - |\!-\!z\rangle |\!+\!z\rangle \Big),
  \label{EPR}
\end{equation}
which appears to be antisymmetric.  Does this mean that we cannot
prepare $|\psi_{\mathrm{EPR}}\rangle$ using photons (which are
bosons)?  More disturbingly, we discussed how measuring $\hat{S}_z$ on
particle $A$, and obtaining the result $+\hbar/2$, causes the
two-particle state to collapse into $|\!+\!z\rangle |\!-\!z\rangle$,
which is neither symmetric nor antisymmetric.  Is this result
invalidated if the particles are identical?

The answer to each question is no.  The confusion arises because the
particle exchange symmetry has to involve an exchange of \textit{all}
the degrees of freedom of each particle, and Eq.~\eqref{EPR} only
shows the spin degree of freedom.

To unpack the above statement, let us suppose the two particles in the
EPR experiment are identical bosons.  We have focused on each
particle's spin degree of freedom, but they must also have a position
degree of freedom---that's how we can have a particle at Alpha
Centauri ($A$) and another at Betelgeuse ($B$).  If we explicitly
account for this position degree of freedom, the single-particle
Hilbert space should be
\begin{equation}
  \mathscr{H}^{(1)} = \mathscr{H}_{\mathrm{spin}} \otimes \mathscr{H}_{\mathrm{position}}.
\end{equation}
For simplicity, let us treat position as a twofold degree of freedom,
treating $\mathscr{H}_{\mathrm{position}}$ as a 2D space spanned by
the basis $\{|A\rangle, |B\rangle\}$.

Now consider the state we previously denoted by $|\!+\!z\rangle
|\!-\!z\rangle$, which refers to a spin-up particle at $A$ and a
spin-down particle at $B$.  In our previous notation, it was
implicitly assumed that $A$ refers to the left-hand slot of the tensor
product, and $B$ refers to the right-hand slot.  If we account for the
position degrees of freedom, the state is written as
\begin{equation}
  |+\!z, A;\; -z, B\rangle = \frac{1}{\sqrt{2}}
  \Big(|\!+\!z\rangle|A\rangle |\!-\!z\rangle|B\rangle
  + |\!-\!z\rangle|B\rangle |\!+\!z\rangle|A\rangle \Big),
  \label{asym1}
\end{equation}
where the kets are written in the following order:
\begin{equation}
  \Big[
    (\textrm{spin 1}) \otimes (\textrm{position 1}) \Big]
  \otimes
  \Big[
    (\textrm{spin 2}) \otimes (\textrm{position 2}) \Big].
  \label{order1}
\end{equation}
The exchange operator $\hat{P}_{12}$ swaps the two particles' Hilbert
spaces---which includes both the position \textit{and} the spin part.
Hence, Eq.~\eqref{asym1} is explicitly symmetric:
\begin{align}
  \begin{aligned}
  \hat{P}_{12} \, |+\!z, A\,;\, -z, B\rangle &= \frac{1}{\sqrt{2}}
  \Big(|\!-\!z\rangle|B\rangle |\!+\!z\rangle|A\rangle
  + |\!+\!z\rangle|A\rangle |\!-\!z\rangle|B\rangle \Big) \\
  &= |+\!z, A\,;\, -z, B\rangle.
  \end{aligned}
\end{align}
Likewise, if there is a spin-down particle at $A$ and a spin-up
particle at $B$, the bosonic two-particle state is
\begin{equation}
  |-\!z, A\,;\, +z, B\rangle = \frac{1}{\sqrt{2}}
  \Big(|\!-\!z\rangle|A\rangle |\!+\!z\rangle|B\rangle
  + |\!+\!z\rangle|B\rangle |\!-\!z\rangle|A\rangle \Big).
  \label{asym2}
\end{equation}
Using Eqs.~\eqref{asym1} and \eqref{asym2}, we can rewrite the EPR
singlet state \eqref{EPR} as
\begin{align}
  \begin{aligned}
    |\psi_{\mathrm{EPR}}\rangle &= \frac{1}{\sqrt{2}} \Big(
    |\!+\!z, A\,;\, -z, B\rangle - |-\!z, A\,;\, +z, B\rangle \Big)\\
    &= \frac{1}{2} \Big(\,
    |\!+\!z\rangle|A\rangle |\!-\!z\rangle|B\rangle
    + |\!-\!z\rangle|B\rangle |\!+\!z\rangle|A\rangle \\
    &\quad\;\;- |\!-\!z\rangle|A\rangle |\!+\!z\rangle|B\rangle
    - |\!+\!z\rangle|B\rangle |\!-\!z\rangle|A\rangle \Big).
    \label{epr1}
  \end{aligned}
\end{align}

As it turns out Eq.~\eqref{epr1} can be further simplified with some
careful re-ordering.  Instead of the ordering \eqref{order1}, order by
spins and then positions:
\begin{equation}
  \Big[
    (\textrm{spin 1}) \otimes (\textrm{spin 2}) \Big]
  \otimes
  \Big[
    (\textrm{position 1}) \otimes (\textrm{position 2}) \Big]
  \label{order2}
\end{equation}
Then Eq.~\eqref{epr1} can be rewritten as
\begin{equation}
  |\psi_{\mathrm{EPR}}\rangle = \frac{1}{\sqrt{2}} \Big(
  |\!+\!z\rangle |\!-\!z\rangle - |\!-\!z\rangle |\!+\!z\rangle \Big)  
  \otimes \frac{1}{\sqrt{2}} \Big(
  |A\rangle |B\rangle - |B\rangle |A\rangle \Big).
  \label{eprsplit}
\end{equation}
Evidently, even though the spin degrees of freedom form an
antisymmetric combination, as described by Eq.~\eqref{EPR}, the
position degrees of freedom in Eq.~\eqref{eprsplit} also have an
antisymmetric form, such that the overall two-particle state is
symmetric!

Now suppose we perform a measurement on $|\psi_{\mathrm{EPR}}\rangle$,
and find that the particle at position $A$ has spin $+z$.  As usual, a
measurement outcome can be associated with a projection operator.
Using the ordering \eqref{order1}, we can write the relevant
projection operator as
\begin{equation}
  \hat{\Pi} = \Big(|\!+\!z\rangle \langle+z| \otimes |A\rangle \langle A|\Big)
  \otimes\Big( \hat{I} \otimes \hat{I}\Big)
  + \Big(\hat{I} \otimes \hat{I} \Big) \otimes \Big(
  |\!+\!z\rangle \langle+z| \otimes |A\rangle \langle A| \Big).
\end{equation}
This accounts for the fact that the observed phenomenon---spin $+z$ at
position $A$---may refer to either particle.  Applying $\hat{\Pi}$ to
the EPR state \eqref{epr1} yields
\begin{equation}
  |\psi'\rangle \;=\;
  \frac{1}{2} \Big(
    |\!+\!z\rangle|A\rangle |\!-\!z\rangle|B\rangle
    + |\!-\!z\rangle|B\rangle |\!+\!z\rangle|A\rangle \Big).
\end{equation}
Apart from a change in normalization, this is precisely the fermionic
state $|+\!z,A;-z,B\rangle$ defined in Eq.~\eqref{asym1}.  In our
earlier notation, this state was simply written as
$|\!+\!z\rangle|-\!z\rangle$.  This goes to show that particle
exchange symmetry is fully compatible with the concepts of partial
measurements, entanglement, etc., discussed in the previous chapter.

\subsection{Implications of exchange symmetry}

The choice of exchange symmetry eigenvalue---symmetric (bosons) or
antisymmetric (fermions)---is often referred to as \textbf{particle
  statistics}.  This is because statistical ensembles of bosons and
fermions are governed by different distributions, called the
Bose-Einstein and Fermi-Dirac distributions respectively.  The
implications for statistical mechanics are profound, but fall outside
the scope of this course.

Our above formulation of bosonic and fermionic multi-particle quantum
states has relied on the assignment of single-particle states to (say)
the ``first slot'' or ``second slot'' in a tensor product.  One might
question whether this is philosophically consistent with the notion of
particle indistinguishability.  After all, it seems unsatisfactory
that our mathematical framework allows us to write down a state like
$|\mu\rangle|\nu\rangle$ where $\mu\ne\nu$, which is physically
impossible since it is not symmetric or antisymmetric.  Moreover, we
use such states to define a ``particle exchange'' operation that
appears to have no direct physical meaning (unlike, say, a rotation
operation, which is physically meaningful).

To address these unsatisfactory features,
\hyperref[cite:leinaas]{Leinaas and Myrheim (1977)} developed an
interesting formulation of particle indistinguishability that avoids
the concept of particle exchange, by focusing on the properties of
multi-particle wavefunctions.  In their view, a multi-particle
wavefunction is indexed by a set of coordinates $(\mathbf{r}_1, \dots,
\mathbf{r}_N)$ which are not to be regarded as an ordinary vector, but
as a mathematical object that has a built-in property that
interchanging entries leaves the object invariant.  Bosonic or
fermionic states can be constructed by carefully analyzing the
topological structure of wavefunctions defined on such configuration
spaces.  For more details, the interested reader is referred to the
paper by Leinaas and Myrheim [\ref{cite:leinaas}].

A startling outcome of Leinaas and Myrheim's analysis is that the
distinction between fermions and bosons is not absolute.  In certain
special quantum systems in two spatial dimensions, there can exist
identical particles known as \textbf{anyons}, which act as though they
are intermediate between fermions and bosons.  However, a discussion
of anyons requires knowledge about magnetic vector potentials in
quantum mechanics, which will be discussed in Chapter 5; after having
gone through that chapter, you may refer to Appendix F, which gives a
brief introduction to the theory of anyons.


\section{Second quantization}

In the usual tensor product notation, symmetric and antisymmetric
states become quite cumbersome to deal with when the number of
particles is large.  We will now introduce a formalism called
\textbf{second quantization}, which greatly simplifies manipulations
of such multi-particle states.  (The reason for the name ``second
quantization'' will not be apparent until later; it is a bad name, but
one we are stuck with for historical reasons.)

We start by defining a convenient way to specify states of multiple
identical particles, called the \textbf{occupation number
  representation}.  Let us enumerate a set of single-particle states,
$\{|1\rangle, |2\rangle, |3\rangle, \cdots\}$, that form a complete
orthonormal basis for the single-particle Hilbert space
$\mathscr{H}^{(1)}$.  Then, we build multi-particle states by
specifying how many particles are in state $|1\rangle$, denoted $n_1$;
how many are in state $|2\rangle$, denoted $n_2$; and so on.  Thus,
\begin{equation*}
  |n_1,n_2,n_3,\dots\rangle
\end{equation*}
is \textit{defined} as the appropriate symmetric or antisymmetric
multi-particle state, constructed using Eq.~\eqref{nbosons} if we're
dealing with bosons (Section~\ref{sec:bosons}), or using
Eq.~\eqref{Nfermions} if we're dealing with fermions
(Section~\ref{sec:fermions}).

Let us run through a couple of examples:

\begin{framed}
\noindent
\textit{Example}---The two-particle state $|0,2,0,0,\dots\rangle$ has
both particles in the single-particle state $|2\rangle$.  This is only
possible if the particles are bosons, since fermions cannot share the
same state.  Written out in tensor product form, the symmetric state
is
\begin{equation}
  |0,2,0,0,\dots\rangle \equiv |2\rangle|2\rangle.
\end{equation}
\end{framed}

\begin{framed}
\noindent
\textit{Example}---The three-particle state $|1,1,1,0,0,\dots\rangle$
has one particle each occupying $|1\rangle$, $|2\rangle$, and
$|3\rangle$.  If the particles are bosons, this corresponds to the
symmetric state
\begin{align}
  \begin{aligned}|1,1,1,0,0,\dots\rangle &\equiv \frac{1}{\sqrt{6}}\Big(|1\rangle|2\rangle|3\rangle + |3\rangle|1\rangle|2\rangle + |2\rangle|3\rangle|1\rangle \\&\;\qquad+ |1\rangle|3\rangle|2\rangle + |2\rangle|1\rangle|3\rangle + |3\rangle|2\rangle|1\rangle \Big).
  \end{aligned}
\end{align}
And if the particles are fermions, the appropriate antisymmetric state
is
\begin{align}
  \begin{aligned}|1,1,1,0,0,\dots\rangle &\equiv \frac{1}{\sqrt{6}} \Big(|1\rangle|2\rangle|3\rangle + |3\rangle|1\rangle|2\rangle + |2\rangle|3\rangle|1\rangle \\&\;\qquad - |1\rangle|3\rangle|2\rangle - |2\rangle|1\rangle|3\rangle - |3\rangle|2\rangle|1\rangle\Big).
  \end{aligned}
\end{align}
\end{framed}

\subsection{Fock space}

There is a subtle point that we have glossed over: what Hilbert space
do these state vectors reside in?  The state $|0,2,0,0,\dots\rangle$
is a bosonic two-particle state, which is a vector in the two-particle
Hilbert space $\mathscr{H}^{(2)} = \mathscr{H}^{(1)}\otimes
\mathscr{H}^{(1)}$.  However, $\mathscr{H}^{(2)}$ also contains
two-particle states that are not symmetric under exchange, which is
not allowed for bosons.  Thus, it would be more rigorous for us to
narrow the Hilbert space to the space of state vectors that are
symmetric under exchange.  We denote this reduced space by
$\mathscr{H}^{(2)}_S$.

Likewise, $|1,1,1,0,\dots\rangle$ is a three-particle state lying in
$\mathscr{H}^{(3)}$.  If the particles are bosons, we can narrow the
space to $\mathscr{H}^{(3)}_S$.  If the particles are fermions, we can
narrow it to the space of three-particle states that are antisymmetric
under exchange, denoted by $\mathscr{H}^{(3)}_A$.  Thus,
$|1,1,1,0,\dots\rangle \in \mathscr{H}^{(3)}_{S/A}$, where the
subscript $S/A$ depends on whether we are dealing with symmetric
states ($S$) or antisymmetric states ($A$).

We can make the occupation number representation more convenient to
work with by defining an ``extended'' Hilbert space, called the
\textbf{Fock space}, that is the space of bosonic/fermionic states
\textit{for arbitrary numbers of particles}.  In the formal language
of linear algebra, the Fock space can be written as
\begin{equation}
  \mathscr{H}_{S/A}^F = \mathscr{H}^{(0)} \oplus \mathscr{H}^{(1)} \oplus \mathscr{H}^{(2)}_{S/A} \oplus \mathscr{H}^{(3)}_{S/A} \oplus \mathscr{H}^{(4)}_{S/A} \oplus \cdots
  \label{fock}
\end{equation}
Here, $\oplus$ represents the \textbf{direct sum} operation, which
combines vector spaces by directly grouping their basis vectors into a
larger basis set; if $\mathscr{H}_1$ has dimension $d_1$ and
$\mathscr{H}_2$ has dimension $d_2$, then
$\mathscr{H}_1\oplus\mathscr{H}_2$ has dimension $d_1+d_2$.  (By
contrast, the space $\mathscr{H}_1\otimes\mathscr{H}_2$, defined via
the tensor product, has dimension $d_1d_2$.)  Once again, the
subscript $S/A$ depends on whether we are dealing with bosons ($S$) or
fermions ($A$).

The upshot is that any multi-particle state that we can write down in
the occupation number representation, $|n_1,n_2,n_3,\dots\rangle$, is
guaranteed to lie in the Fock space $\mathscr{H}^{F}_{S/A}$.
Moreover, these states form a complete basis for
$\mathscr{H}^{F}_{S/A}$.

In Eq.~\eqref{fock}, the first term of the direct sum is
$\mathscr{H}^{(0)}$, the ``Hilbert space of 0 particles''.  This
Hilbert space contains only one distinct state vector, denoted by
\begin{equation}
  |\varnothing\rangle \equiv |0,0,0,0,\dots\rangle.
\end{equation}
This refers to the \textbf{vacuum state}, a quantum state in which
there are literally no particles.  Note that $|\varnothing\rangle$ is
\textit{not} the same thing as a zero vector; it has the standard
normalization $\langle\varnothing|\varnothing\rangle = 1$.  The
concept of a ``state of no particles'' may seem silly, but we will see
that there are very good reasons to include it in the formalism.

Another subtle consequence of introducing the Fock space concept is
that it is now legitimate to write down quantum states that lack
definite particle numbers.  For example,
\begin{equation*}
  \frac{1}{\sqrt{2}} \Big(|1,0,0,0,0,\dots\rangle + |1,1,1,0,0,\dots\rangle\Big)
\end{equation*}
is a valid state vector describing the superposition of a one-particle
state and a three-particle state.  We will revisit the phenomenon of
quantum states with indeterminate particle numbers in
Section~\ref{sec:second_quant_op}, and in the next chapter.

\subsection{Second quantization for bosons}
\label{sec:second_quantized_bosons}

After this lengthy prelude, we are ready to introduce the formalism of
second quantization.  Let us concentrate on bosons first.  

We define an operator called the \textbf{boson creation operator},
denoted by $\hat{a}_\mu^\dagger$ and acting in the following way:
\begin{equation}
  \hat{a}_\mu^\dagger \big|n_1, n_2, \dots, n_\mu, \dots\big\rangle = \sqrt{n_\mu+1} \; \big|n_1, n_2, \dots, n_\mu + 1, \dots\big\rangle.
  \label{amu}
\end{equation}
In this definition, there is one particle creation operator for each
state in the single-particle basis
$\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$.  Each creation operator is
defined as an operator acting on state vectors in the Fock space
$\mathscr{H}^F_S$, and has the effect of incrementing the occupation
number of its single-particle state by one.  The prefactor of
$\sqrt{n_\mu+1}$ is defined for later convenience.

Applying a creation operator to the vacuum state yields a
single-particle state:
\begin{align}
  \begin{aligned}\hat{a}_\mu^\dagger |\varnothing\rangle \, &= \, |0,\dots,0, 1, 0, 0, \dots\rangle. \\[-1ex] &\qquad\qquad\quad\;\;\rotatebox[origin=c]{90}{$\Rsh$}\,\mu
  \end{aligned}
\end{align}

The creation operator's Hermitian conjugate, $\hat{a}_\mu$, is the
\textbf{boson annihilation operator}.  To characterize it, first take
the Hermitian conjugate of Eq.~\eqref{amu}:
\begin{equation}
  \big\langle n_1, n_2, \dots\big| \hat{a}_\mu = \sqrt{n_\mu+1} \; \big\langle n_1, n_2, \dots, n_\mu + 1, \dots\big|.
\end{equation}
Right-multiplying by another occupation number state
$|n_1',n_2',\dots\rangle$ results in
\begin{align}
  \begin{aligned}\big\langle n_1, n_2, \dots \big| \hat{a}_\mu \big|n_1',n_2',\dots\big\rangle &= \sqrt{n_\mu+1} \; \big\langle \dots, n_\mu + 1, \dots\big| \dots, n_\mu',\dots\big\rangle \\&= \sqrt{n_\mu+1}\; \delta^{n_1}_{n_1'}\; \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu+1}_{n_\mu'} \dots \\  &= \sqrt{n_\mu'}\; \delta^{n_1}_{n_1'}\; \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu+1}_{n_\mu'}\cdots\end{aligned}
  \end{align}
From this, we can deduce that
\begin{equation}
  \hat{a}_\mu \big|n_1', n_2', \dots, n_\mu', \dots\big\rangle = \begin{cases} \sqrt{n_\mu'} \; \big|n_1', n_2', \dots, n_\mu' - 1, \dots\big\rangle, & \mathrm{if}\; n_\mu' > 0 \\ 0, & \mathrm{if}\; n_\mu' = 0.\end{cases}
\end{equation}
In other words, the annihilation operator decrements the occupation
number of a specific single-particle state by one (hence its name).
As a special exception, if the given single-particle state is
unoccupied ($n_\mu = 0$), applying $\hat{a}_\mu$ results in a zero
vector (note that this is \textit{not} the same thing as the vacuum
state $|\varnothing\rangle$).

The boson creation/annihilation operators obey the following
commutation relations:
\begin{framed}
  \begin{equation}
    \,[\hat{a}_\mu,\hat{a}_\nu] = [\hat{a}_\mu^\dagger,\hat{a}_\nu^\dagger] = 0,
    \qquad [\hat{a}_\mu,\hat{a}_\nu^\dagger] = \delta_{\mu\nu}.
    \label{commutations}
  \end{equation}
\end{framed}
\vskip -0.1in
\noindent
These can be derived by taking the matrix elements with respect to the
occupation number basis.  We will go through the derivation of the
last commutation relation; the others are left as an exercise
(\hyperref[ex:boson_commutators]{Exercise 5}).

To prove that $[\hat{a}_\mu,\hat{a}_\nu^\dagger] = \delta_{\mu\nu}$,
first consider the case where the creation/annihilation operators act
on the same single-particle state:
\begin{align}
  \begin{aligned}\big\langle n_1, n_2, \dots \big| \hat{a}_\mu \hat{a}_\mu^\dagger \big| n_1', n_2'\dots\big\rangle &= \sqrt{(n_\mu+1)(n_\mu'+1)}\; \big\langle \dots, n_\mu+1, \dots \big| \dots, n_\mu'+1, \dots\big\rangle \\ &= \sqrt{(n_\mu+1)(n_\mu'+1)} \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu+1}_{n_\mu'+1}\cdots \\ &= (n_\mu+1) \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots \\ \big\langle n_1, n_2, \dots \big| \hat{a}_\mu^\dagger \hat{a}_\mu \big| n_1', n_2'\dots\big\rangle &= \sqrt{n_\mu n_\mu'}\; \big\langle \dots, n_\mu-1, \dots \big| \dots, n_\mu'-1, \dots\big\rangle \\&= \sqrt{n_\mu n_\mu'} \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu-1}_{n_\mu'-1}\cdots \\ &= n_\mu \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots \end{aligned}
\end{align}
In the second equation, we were a bit sloppy in handling the $n_\mu =
0$ and $n_\mu' = 0$ cases, but you can check for yourself that the
result on the last line remains correct.  Upon taking the
difference of the two equations, we get
\begin{equation}
  \big\langle n_1, n_2, \dots \big| \left(\hat{a}_\mu \hat{a}_\mu^\dagger - \hat{a}_\mu^\dagger \hat{a}_\mu\right) \big| n_1', n_2'\dots\big\rangle = \delta^{n_1}_{n_1'} \; \delta^{n_2}_{n_2'} \; \cdots \delta^{n_\mu}_{n_\mu'}\cdots = \big\langle n_1, n_2, \dots \big| n_1', n_2'\dots\big\rangle.
\end{equation}
Since the occupation number states form a basis for $\mathscr{H}^F_S$,
we conclude that
\begin{equation}
  \hat{a}_\mu \hat{a}_\mu^\dagger - \hat{a}_\mu^\dagger \hat{a}_\mu = \hat{I}.
\end{equation}
Next, consider the case where $\mu \ne \nu$:
\begin{align*}
  \begin{aligned}\big\langle n_1, \dots \big| \hat{a}_\mu \hat{a}_\nu^\dagger \big| n_1', \dots\big\rangle &= \sqrt{(n_\mu+1)(n_\nu'+1)}\, \langle \dots, n_\mu+1, \dots, n_\nu, \dots | \dots, n_\mu', \dots, n_\nu'+1, \dots\rangle \\ &= \sqrt{n_\mu' n_\nu} \;\, \delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu+1}_{n_\mu'} \cdots \delta^{n_\nu}_{n_\nu' + 1}\cdots \\ \big\langle n_1, \dots \big| \hat{a}_\nu^\dagger \hat{a}_\mu \big| n_1', \dots\big\rangle &= \sqrt{n_\mu' n_\nu}\, \langle \dots, n_\mu, \dots,n_\nu-1,\dots | \dots, n_\mu'-1, \dots, n_\nu'\dots\rangle \\&= \sqrt{n_\mu' n_\nu} \;\delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu}_{n_\mu'-1}\cdots \delta^{n_\nu-1}_{n_\nu'} \cdots \\ &= \sqrt{n_\mu' n_\nu} \; \delta^{n_1}_{n_1'} \; \cdots \delta^{n_\mu+1}_{n_\mu'}\cdots \delta^{n_\nu}_{n_\nu'+1} \cdots\end{aligned}
\end{align*}
Hence,
\begin{equation}
  \hat{a}_\mu \hat{a}_\nu^\dagger - \hat{a}_\nu^\dagger \hat{a}_\mu = 0 \;\;\;\mathrm{for}\;\;\mu\ne\nu.
\end{equation}
Combining these two results gives the desired commutation relation,
$[\hat{a}_\mu, \hat{a}_\nu^\dagger] = \delta_{\mu\nu}$.

Another useful result which emerges from the first part of this proof
is that
\begin{equation}
  \big\langle n_1, n_2, \dots \big| \hat{a}_\mu^\dagger \hat{a}_\mu \big| n_1', n_2'\dots\big\rangle = n_\mu \big\langle n_1, n_2, \dots \big| n_1', n_2'\dots\big\rangle.
\end{equation}
Hence, we can define the Hermitian operator
\begin{equation}
  \hat{n}_\mu \equiv \hat{a}_\mu^\dagger \hat{a}_\mu,
\end{equation}
whose eigenvalue is the occupation number of single-particle state $\mu$.

If you are familiar with the method of creation/annihilation operators
for solving the quantum harmonic oscillator, you will have noticed the
striking similarity with the particle creation/annihilation operators
for bosons.  This is no mere coincidence.  We will examine the
relationship between harmonic oscillators and bosons in the next
chapter.

\subsection{Second quantization for fermions}
\label{sec:second_quantized_fermions}

For fermions, the multi-particle states are antisymmetric.  The
fermion creation operator can be defined as follows:
\begin{align}
  \begin{aligned}\hat{c}_\mu^\dagger |n_1, n_2, \dots, n_\mu,\dots\rangle &= \begin{cases}(-1)^{n_1 + n_2 + \cdots + n_{\mu-1}} |n_1, n_2, \dots, n_{\mu-1}, 1, \dots\rangle & \mathrm{if} \; n_\mu = 0 \\ \;\;0 & \mathrm{if}\; n_\mu = 1.
    \end{cases} \\&= (-1)^{n_1 + n_2 + \cdots + n_{\mu-1}}\; \delta^{n_\mu}_0\, \big|n_1, n_2, \dots, n_{\mu-1}, 1, \dots\big\rangle. \end{aligned}
\end{align}
In other words, if state $\mu$ is unoccupied, then
$\hat{c}_\mu^\dagger$ increments the occupation number to 1, and
multiplies the state by an overall factor of $(-1)^{n_1 + n_2 + \cdots
  + n_{\mu-1}}$ (i.e, $+1$ if there is an even number of occupied
states preceding $\mu$, and $-1$ if there is an odd number).  The role
of this factor will be apparent later.  Note that this definition
requires the single-particle states to be ordered in some way;
otherwise, it would not make sense to speak of the states
``preceding'' $\mu$.  It does not matter which ordering we choose, so
long as we make \textit{some} choice, and stick to it consistently.

If $\mu$ is occupied, applying $\hat{c}_\mu^\dagger$ gives the zero
vector.  The occupation numbers are therefore forbidden from being
larger than 1, consistent with the Pauli exclusion principle.

The conjugate operator, $\hat{c}_\mu$, is the fermion annihilation
operator.  To see what it does, take the Hermitian conjugate of the
definition of the creation operator:
\begin{equation}
  \langle n_1, n_2, \dots, n_\mu,\dots| \hat{c}_\mu  =
  (-1)^{n_1 + n_2 + \cdots + n_{\mu-1}}\; \delta^{n_\mu}_0\, \big\langle n_1, n_2, \dots, n_{\mu-1}, 1, \dots\big|.
\end{equation}
Right-multiplying this by $|n_1',n_2',\dots\rangle$ gives
\begin{equation}
  \langle n_1, n_2, \dots, n_\mu,\dots| \hat{c}_\mu |n_1', n_2', \dots\rangle  = (-1)^{n_1 + \cdots + n_{\mu-1}} \;\delta^{n_1}_{n_1'} \cdots \;\delta^{n_{\mu-1}}_{n_{\mu-1}'} \left(\delta^{n_\mu}_0 \delta^1_{n_\mu'} \right) \delta^{n_{\mu+1}}_{n_{\mu+1}'} \dots
\end{equation}
Hence, we deduce that
\begin{align}
  \begin{aligned}\hat{c}_\mu |n_1', \dots, n_\mu',\dots\rangle &= \begin{cases} \;\;0 & \mathrm{if}\; n_\mu' = 0 \\ (-1)^{n_1' + \cdots + n_{\mu-1}'} |n_1', \dots, n_{\mu-1}', 0, \dots\rangle & \mathrm{if} \; n_\mu' = 1. \end{cases} \\ &= (-1)^{n_1' + \cdots + n_{\mu-1}'} \; \delta^1_{n_\mu'} \, \big|n_1', \dots, n_{\mu-1}', 0, \dots\big\rangle.\end{aligned}
\end{align}
In other words, if state $\mu$ is unoccupied, then applying
$\hat{c}_\mu$ gives the zero vector; if state $\mu$ is occupied,
applying $\hat{c}_\mu$ decrements the occupation number to $0$, and
multiplies the state by the aforementioned factor of $\pm 1$.

With these definitions, the fermion creation/annihilation operators
can be shown to obey the following \textit{anticommutation} relations:
\begin{framed}
  \begin{equation}
    \big\{\hat{c}_\mu,\hat{c}_\nu\big\} = \big\{\hat{c}_\mu^\dagger,\hat{c}_\nu^\dagger\big\} = 0, \qquad \big\{\hat{c}_\mu,\hat{c}_\nu^\dagger\big\} = \delta_{\mu\nu}.
    \label{anticommutation}
  \end{equation}
\end{framed}
\vskip -0.15in
\noindent
Here, $\{\cdot,\cdot\}$ denotes an anticommutator, which is defined by
\begin{equation}
  \left\{\hat{A},\hat{B}\right\} \equiv \hat{A}\hat{B} + \hat{B}\hat{A}.
\end{equation}

Similar to the bosonic commutation relations \eqref{commutations}, the
anticommutation relations \eqref{anticommutation} can be derived by
taking matrix elements with occupation number states.  We will only go
over the last one, $\big\{\hat{c}_\mu,\hat{c}_\nu^\dagger\big\} =
\delta_{\mu\nu}$; the others are left for the reader to verify.

First, consider creation/annihilation operators acting on the same
single-particle state $\mu$:
\begin{align}
  \begin{aligned}\big\langle \dots,n_\mu,\dots \big| \hat{c}_\mu \hat{c}_\mu^\dagger \big|\dots, n_\mu', \dots\big\rangle &= (-1)^{n_1+\cdots+n_{\mu-1}} (-1)^{n_1'+\cdots+n_{\mu-1}'} \,\delta^{n_\mu}_0 \delta^0_{n_\mu'} \\ &\quad\times \big\langle n_1,\dots,n_{\mu-1}, 1, \dots\big| n_1',\dots,n_{\mu-1}', 1, \dots \big\rangle \\ &= \delta^0_{n_\mu'} \; \cdot \; \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu}_{n_\mu'} \cdots\end{aligned}
\end{align}
By a similar calculation,
\begin{equation}
  \big\langle \dots,n_\mu,\dots \big| \hat{c}_\mu^\dagger \hat{c}_\mu \big|\dots, n_\mu', \dots\big\rangle = \delta^1_{n_\mu'} \; \cdot \; \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \delta^{n_\mu}_{n_\mu'} \cdots
\end{equation}
By adding these two equations, and using the fact that
$\delta^0_{n_\mu'} + \delta^1_{n_\mu'} = 1$, we get
\begin{equation}
  \big\langle \dots,n_\mu,\dots \big| \left\{ \hat{c}_\mu, \hat{c}_\mu^\dagger\right\} \big|\dots, n_\mu', \dots\big\rangle = \big\langle \dots,n_\mu,\dots \big|\dots, n_\mu', \dots\big\rangle
\end{equation}
And hence,
\begin{equation}
  \left\{ \hat{c}_\mu, \hat{c}_\mu^\dagger\right\} = \hat{I}.
\end{equation}

Next, we must prove that $\left\{ \hat{c}_\mu,
\hat{c}_\nu^\dagger\right\} = 0$ for $\mu \ne \nu$.  We will show this
for $\mu < \nu$ (the $\mu > \nu$ case follows by Hermitian
conjugation).  This is, once again, by taking matrix elements:
\begin{align*}
  \begin{aligned}\big\langle \dots,n_\mu,\dots, n_\nu,\dots \big| \hat{c}_\mu \hat{c}_\nu^\dagger \big| & \dots, n_\mu', \dots, n_\nu',\dots\big\rangle = (-1)^{n_1+\cdots+n_{\mu-1}} (-1)^{n_1'+\cdots+n_{\nu-1}'} \,\delta^{n_\mu}_0 \delta^0_{n_\nu'} \\ &\qquad\qquad\qquad\qquad\qquad\times \big\langle \dots, 1, \dots, n_\nu,\dots\big| \dots,n_{\mu}', \dots,1, \dots \big\rangle \\ &\qquad\quad = (-1)^{n_\mu'+\cdots+n_{\nu-1}'}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1 \delta^0_{n_\nu'}\right) \cdots \\
&\qquad\quad = (-1)^{1 + n_{\mu+1} + \cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^0_{n_\mu}\delta^1_{n_\mu'}\right) \cdots \left(\delta^0_{n_\nu'} \delta^1_{n_\nu}\right) \cdots \\
  \big\langle \dots,n_\mu,\dots, n_\nu,\dots \big| \hat{c}_\nu^\dagger \hat{c}_\mu \big| &\dots, n_\mu', \dots, n_\nu',\dots\big\rangle = (-1)^{n_1+\cdots+n_{\nu-1}} (-1)^{n_1'+\cdots+n_{\mu-1}'} \,\delta^{n_\nu}_1 \delta^1_{n_\mu'} \\ &\qquad\qquad\qquad\qquad\qquad\times \big\langle \dots, n_\mu, \dots, 0,\dots\big| \dots,0, \dots,n_\nu', \dots \big\rangle \\ &\qquad\quad= (-1)^{n_{\mu}+\cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1 \delta^0_{n_\nu'} \right) \cdots \\ &\qquad\quad= (-1)^{0 + n_{\mu+1}+\cdots+n_{\nu-1}}\, \delta^{n_1}_{n_1'} \, \delta^{n_2}_{n_2'} \cdots \left(\delta^{n_\mu}_0\delta^1_{n_\mu'}\right) \cdots \left(\delta^{n_\nu}_1\delta^0_{n_\nu'}\right) \cdots
  \end{aligned}
\end{align*}
The two equations differ by a factor of $-1$, so adding them gives
zero.  Putting everything together, we conclude that
$\big\{c_\mu,c_\nu^\dagger\big\} = \delta_{\mu\nu}$, as stated in
\eqref{anticommutation}.

As you can see, the derivation of the fermionic anticommutation
relations is quite hairy, in large part due to the $(-1)^{(\cdots)}$
factors in the definitions of the creation and annihilation operators.
But once these relations have been derived, we can deal entirely with
the creation and annihilation operators, without worrying about the
underlying occupation number representation and its $(-1)^{(\cdots)}$
factors.  By the way, if we had chosen to omit the $(-1)^{(\cdots)}$
factors in the definitions, the creation and annihilation operators
would still satisfy the \textit{anticommutation} relation
$\{\hat{c}_\mu,\hat{c}_\nu^\dagger\}=\delta_{\mu\nu}$, but two
creation operators or two annihilation operators would
\textit{commute} rather than \textit{anticommute}.  During subsequent
calculations, the ``algebra'' of creation and annihilation operators
ends up being much harder to deal with.

\subsection{Second-quantized operators}
\label{sec:second_quant_op}

One of the key benefits of second quantization is that it allows us to
express multi-particle quantum operators clearly and succinctly, using
the creation and annihilation operators defined in
Sections~\ref{sec:second_quantized_bosons}--\ref{sec:second_quantized_fermions}
as ``building blocks''.

\subsubsection{Non-interacting particles}

Consider a system of \textit{non-interacting} particles.  When there
is just one particle ($N=1$), let the single-particle Hamiltonian be
$\hat{H}^{(1)}$, which is a Hermitian operator acting on the
single-particle Hilbert space $\mathscr{H}^{(1)}$.  For general $N$,
the multi-particle Hamiltonian $\hat{H}$ is a Hermitian operator
acting on the Fock space $\mathscr{H}^F$.  How is $\hat{H}$ related to
$\hat{H}^{(1)}$?

Let us take the bosonic case.  Then the multi-particle Hamiltonian
should be
\begin{equation}
  \hat{H} = \sum_{\mu\nu} \hat{a}^\dagger_\mu H_{\mu\nu} \hat{a}_\nu,
  \;\;\; \mathrm{where}\;\;\;
  H_{\mu\nu} = \langle\mu|\hat{H}^{(1)}|\nu\rangle,
  \label{twobosonH}
\end{equation}
where $\hat{a}_\mu$ and $\hat{a}_\mu^\dagger$ are the boson creation
and annihilation operators, and $|\mu\rangle$, $|\nu\rangle$ refer to
single-particle state vectors drawn from some orthonormal basis for
$\mathscr{H}^{(1)}$.

To understand why Eq.~\eqref{twobosonH} is right, consider its matrix
elements with respect to various states.  First, for the vacuum state
$|\varnothing\rangle$,
\begin{equation}
  \langle\varnothing|\hat{H}|\varnothing\rangle = 0.
\end{equation}
This makes sense. Second, consider the matrix elements between
single-particle states:
\begin{equation}
  \begin{aligned}
    \langle n_\mu = 1 |\hat{H}|n_\nu = 1\rangle
    &= \langle\varnothing|a_\mu \Big(\sum_{\mu'\nu'} \hat{a}^\dagger_{\mu'} H_{\mu'\nu'} \hat{a}_{\nu'}\Big) a_\nu^\dagger |\varnothing\rangle \\ &= \sum_{\mu'\nu'} H_{\mu'\nu'} \, \langle\varnothing|a_\mu \hat{a}^\dagger_{\mu'}  \hat{a}_{\nu'} a_\nu^\dagger |\varnothing\rangle \\ &= \sum_{\mu'\nu'} H_{\mu'\nu'} \, \delta^{\mu}_{\mu'} \delta^{\nu}_{\nu'} \\&= H_{\mu\nu}.\end{aligned}
\end{equation}
This exactly matches the matrix element defined in
Eq.~\eqref{twobosonH}.

Finally, consider the case where $\{|\mu\rangle\}$ forms an eigenbasis
of $\hat{H}_1$.  Then
\begin{equation}
  \hat{H}^{(1)}|\mu\rangle = E_\mu |\mu\rangle
  \;\;\;\Rightarrow\;\;\;
  H_{\mu\nu} = E_\mu\,\delta_{\mu\nu} \;\;\;\Rightarrow \;\;
  \hat{H} = \sum_{\mu} E_\mu \,\hat{n}_\mu.
\end{equation}
As previously noted, $\hat{n}_\mu = \hat{a}^\dagger_\mu \hat{a}_\mu$
is the number operator, an observable corresponding to the occupation
number of single-particle state $\mu$.  Thus, the total energy is the
sum of the single-particle energies, as expected for a system of
non-interacting particles.

We can also think of the Hamiltonian $\hat{H}$ as the generator of
time evolution.  Eq.~\eqref{twobosonH} describes an infinitesimal time
step that consists of a superposition of alternative evolution
processes.  Each term in the superposition, $\hat{a}^\dagger_\mu
H_{\mu\nu} \hat{a}_\nu$, describes a particle being annihilated in
state $\nu$, and immediately re-created in state $\mu$, which is
equivalent to ``transferring'' a particle from $\nu$ to $\mu$.  The
quantum amplitude for this process is described by the matrix element
$H_{\mu\nu}$.  This description of time evolution is applicable not
just to single-particle states, but also to multi-particle states
containing any number of particles.

Note also that the number of particles does not change during time
evolution.  Whenever a particle is annihilated in a state $\nu$, it is
immediately re-created in some state $\mu$.  This implies that the
Hamiltonian commutes with the total particle number operator:
\begin{equation}
  [\hat{H}, \hat{N}] = 0, \;\;\;\mathrm{where}\;\;\hat{N} \equiv \sum_\mu \hat{a}_\mu^\dagger a_\mu.
  \label{Hdiag}
\end{equation}
The formal proof for this is left as an exercise (see
\hyperref[ex:n_conserved]{Exercise 6}).  It follows directly from the
creation and annihilation operators' commutation relations (for
bosons) or anticommuattion relations (for fermions).

Apart from the total energy, other kinds of observables---the total
momentum, total angular momentum, etc.---can be expressed in a similar
way.  Let $\hat{A}^{(1)}$ be a single-particle observable.  For a
multi-particle system, the operator corresponding to the ``total $A$''
is
\begin{equation}
  \hat{A} = \sum_{\mu\nu} \hat{a}^\dagger_\mu A_{\mu\nu} \hat{a}_\nu, \;\;\; \mathrm{where}\;\; A_{\mu\nu} = \langle\mu|\hat{A}^{(1)}|\nu\rangle.
  \label{Aop}
\end{equation}

For fermions, everything from Eq.~\eqref{twobosonH}--\eqref{Aop} also
holds, but with the $a$ operators replaced by fermionic $c$ operators.

\subsubsection{Change of basis}

A given set of creation and annihilation operators is defined using a
basis of single-particle states $\{|\mu\rangle\}$, but such a choice
is obviously not unique.  Suppose we have a different single-particle
basis $\{|\alpha\rangle\}$, such that
\begin{equation}
  |\alpha\rangle = \sum_\mu U_{\alpha\mu} |\mu\rangle,
  \label{alphabasis}
\end{equation}
where $U_{\alpha\mu}$ are the elements of a unitary matrix.  Let
$\hat{a}_\alpha^\dagger$ and $\hat{a}_\mu^\dagger$ denote the creation
operators defined using the two different basis (once again, we will
use the notation for bosons, but the equations in this section are
valid for fermions too).  Writing Eq.~\eqref{alphabasis} in terms of
the creation operators,
\begin{align}
  \hat{a}_\alpha^\dagger|\varnothing\rangle
  = \sum_\mu U_{\alpha\mu} \hat{a}_\mu^\dagger |\varnothing\rangle,
\end{align}
We therefore deduce that
\begin{equation}
  \hat{a}_\alpha^\dagger = \sum_\mu U_{\alpha\mu} \hat{a}_\mu^\dagger,
  \;\;\;
  \hat{a}_\alpha = \sum_\mu U_{\alpha\mu}^* \hat{a}_\mu.
  \label{atrans}
\end{equation}
Using the unitarity of $U_{\alpha\mu}$, we can verify that
$\hat{a}_\alpha$ and $\hat{a}_\alpha^\dagger$ satisfy bosonic
commutation relations if and only if $\hat{a}_\mu$ and
$\hat{a}_\mu^\dagger$ do so.  For fermions, we put $c$ operators in
place of $a$ operators in Eq.~\eqref{atrans}, and use anticommutation
rather than commutation relations.

To illustrate how a basis change affects a second quantized
Hamiltonian, consider a system of non-interacting particles whose
single-particle Hamiltonian is diagonal in the $\alpha$ basis.  The
multi-particle Hamiltonian is
\begin{equation}
  \hat{H} = \sum_\alpha E_\alpha \hat{a}_\alpha^\dagger \hat{a}_\alpha,
\end{equation}
consistent with Eq.~\eqref{Hdiag}.  Applying Eq.~\eqref{atrans},
\begin{equation}
  \hat{H} = \sum_{\mu\nu} \hat{a}_\mu^\dagger
  \left(\sum_\alpha E_\alpha U_{\alpha\mu} U_{\alpha\nu}^*\right)
  \hat{a}_\nu
  \label{Htransformed}
\end{equation}
Compare this to single-particle bra-ket
\begin{align}
  H_{\mu\nu} \equiv \langle\mu | \hat{H}^{(1)} | \nu\rangle
  &= \sum_{\alpha\beta} \langle \alpha | U_{\alpha\mu} \hat{H}^{(1)} U_{\beta\nu}^* |\beta\rangle \\
  &= \sum_{\alpha\beta} U_{\alpha\mu} U_{\beta\nu}^* \, E_\beta \, \delta_{\alpha\beta} \\
  &= \sum_{\alpha} E_\alpha\, U_{\alpha\mu} U_{\alpha\nu}^*.
\end{align}
This precisely matches the term in parentheses in
Eq.~\eqref{Htransformed}.  This is consistent with the general form of
$\hat{H}$ for non-interacting particles, Eq.~\eqref{twobosonH}.


\subsubsection{Particle interactions}

Hermitian operators can also be constructed out of other kinds of
groupings of creation and annihilation operators.  For example, a
pairwise (two-particle) potential can be described with a
superposition of creation and annihilation operator pairs, of the form
\begin{equation}
  \hat{V} = \frac{1}{2}
  \sum_{\mu\nu\lambda\sigma} \hat{a}^\dagger_\mu \hat{a}^\dagger_\nu \,
  V_{\mu\nu\lambda\sigma}\, \hat{a}_\sigma \hat{a}_\lambda.
  \label{Vop}
\end{equation}
The prefactor of $1/2$ is conventional.  In terms of time evolution,
$\hat{V}$ ``transfers'' (annihilates and then re-creates) a
\textit{pair} of particles during each infinitesimal time step.  Since
the number of annihilated particles is always equal to the number of
created particles, the interaction conserves the total particle
number.  We can ensure that $\hat{V}$ is Hermitian by imposing a
constraint on the coefficents:
\begin{equation}
  \hat{V}^\dagger = \frac{1}{2}
  \sum_{\mu\nu\lambda\sigma} \hat{a}^\dagger_\lambda \hat{a}^\dagger_\sigma
  \, V_{\mu\nu\lambda\sigma}^* \, \hat{a}_\nu \hat{a}_\mu = \hat{V}
  \;\;\Leftarrow \;\;
  V_{\lambda\sigma\mu \nu}^* = V_{\mu\nu\lambda\sigma}.
\end{equation}

Suppose we are given the two-particle potential as an operator
$\hat{V}^{(2)}$ acting on the two-particle Hilbert space
$\mathscr{H}^{(2)}$.  We should be able to express the
second-quantized operator $\hat{V}$ in terms of $\hat{V}^{(2)}$, by
comparing their matrix elements.  For example, consider the
two-boson states
\begin{align}
  \begin{aligned}
    |n_\mu = 1, n_\nu = 1\rangle &= \frac{1}{\sqrt{2}}
      \Big(|\mu\rangle|\nu\rangle + |\nu\rangle|\mu\rangle \Big), \\
    |n_\lambda = 1, n_\sigma = 1\rangle &= \frac{1}{\sqrt{2}}
      \Big(|\lambda\rangle|\sigma\rangle + |\sigma\rangle|\lambda\rangle \Big),
  \end{aligned}
\end{align}
where $\mu \ne \nu$ and $\lambda \ne \sigma$.  The matrix elements of
$\hat{V}^{(2)}$ are
\begin{multline}
  \langle n_\mu = 1, n_\nu = 1 | \hat{V}^{(2)} |n_\lambda = 1, n_\sigma = 1\rangle \\
  = \frac{1}{2} \Big(
  \langle\mu|\langle\nu|\hat{V}^{(2)}|\lambda\rangle\sigma\rangle
  + \langle\nu|\langle\mu|\hat{V}^{(2)}|\lambda\rangle\sigma\rangle
  + \langle\mu|\langle\nu|\hat{V}^{(2)}|\sigma\rangle\lambda\rangle
  + \langle\nu|\langle\mu|\hat{V}^{(2)}|\sigma\rangle\lambda\rangle
  \Big).
  \label{mat0}
\end{multline}
On the other hand, the matrix elements of the second-quantized
operator $\hat{V}$ are
\begin{align}
  \langle n_\mu = 1, n_\nu = 1 | \hat{V} |n_\lambda = 1, n_\sigma = 1\rangle
  &= \sum_{\mu'\nu'\lambda'\sigma'} V_{\mu'\nu'\lambda'\sigma'}
  \langle \varnothing | \hat{a}_\nu \hat{a}_\mu \hat{a}_{\mu'}^\dagger
  \hat{a}_{\nu'}^\dagger \hat{a}_{\sigma'} \hat{a}_{\lambda'}
  \hat{a}_\lambda^\dagger \hat{a}_\sigma^\dagger |\varnothing\rangle \label{mat1}\\
  &= \frac{1}{2} \left(V_{\mu\nu\lambda\sigma}
  + V_{\mu\nu\sigma\lambda}
  + V_{\nu\mu\lambda\sigma}
  + V_{\nu\mu\sigma\lambda} \label{mat2}
  \right).
\end{align}
In going from Eq.~\eqref{mat1} to \eqref{mat2}, we use the bosonic
commutation relations repeatedly to ``pushing'' the annihilation
operators to the right (so that they can act upon
$|\varnothing\rangle$) and the creation operators to the left (so that
they can act upon $\langle\varnothing|$).  Comparing Eq.~\eqref{mat0}
to Eq.~\eqref{mat2}, we see that the matrix elements match if we take
\begin{align}
  V_{\mu\nu\lambda\sigma} = \langle\mu|\langle\nu|\hat{V}^{(2)}
  |\lambda\rangle|\sigma\rangle.
\end{align}
For instance, if the bosons have a position representation, we would
have something like
\begin{align}
  V_{\mu\nu\lambda\sigma} =
  \int d^d r_1 \int d^d r_2\;
  \varphi_\mu^*(r_1) \,\varphi_\nu^*(r_2) \, V(r_1, r_2) \,
  \varphi_\lambda(r_1) \, \varphi_\sigma(r_2).
\end{align}
The appropriate coefficients for $\mu = \nu$ and/or $\lambda =
\sigma$, as well as for the fermionic case, are left for the reader to
work out.

\subsubsection{Other observables?}

Another way to build a Hermitian operator from creation and
annihilation operators is
\begin{equation}
  \hat{A} = \sum_\mu \left(\alpha_\mu \hat{a}_\mu^\dagger + \alpha^*_\mu \hat{a}_\mu\right).
\end{equation}
If such a term is added to a Hamiltonian, it breaks the conservation
of total particle number.  Each infinitesimal time step will include
processes that decrement the particle number (due to $\hat{a}_\mu$),
as well as processes that increment the particle number (due to
$\hat{a}_\mu^\dagger$).  Even if the system starts out with a fixed
number of particles, such as the vacuum state $|\varnothing\rangle$,
it subsequently evolves into a superposition of states with different
particle numbers.  In the theory of quantum electrodynamics, this type
of operator is used to describe the emission and absorption of photons
caused by moving charges.

Incidentally, the name ``second quantization'' comes from this process
of using creation and annihilation operators to define Hamiltonians.
The idea is that single-particle quantum mechanics is derived by
``quantizing'' classical Hamiltonians via the imposition of
commutation relations like $[x,p] = i\hbar$.  Then, we extend the
theory to multi-particle systems by using the single-particle states
to define creation/annihilation operators obeying commutation or
anticommutation relations.  This can be viewed as a ``second''
quantization step.

\section{Quantum field theory}
\label{sec:qft}

\subsection{Field operators}

So far, we have been agnostic about the nature of the single-particle
states $\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$ used to
construct the creation and annihilation operators.  Let us now
consider the special case where these quantum states are representable
by wavefunctions.  Let $|\mathbf{r}\rangle$ denote a position
eigenstate for a $d$-dimensional space.  A single-particle state
$|\varphi_\mu\rangle$ has a wavefunction
\begin{equation}
  \varphi_\mu(\mathbf{r}) = \langle\mathbf{r}|\varphi_\mu\rangle.
\end{equation}
Due to the completeness and orthonormality of the basis, these
wavefunctions satisfy
\begin{align}
  \begin{aligned}\int d^dr \; \varphi_\mu^*(\mathbf{r})\, \varphi_\nu(\mathbf{r}) &= \langle\varphi_\mu| \left(\int d^dr\, |\mathbf{r}\rangle\langle\mathbf{r}|\right) |\varphi_\nu\rangle \,= \delta_{\mu\nu}, \\\sum_\mu \varphi_\mu^*(\mathbf{r}) \varphi_\mu(\mathbf{r}') &=\, \langle \mathbf{r}'| \left(\sum_\mu |\varphi_\mu\rangle\langle\varphi_\mu|\right)|\mathbf{r}\rangle \;\;=\, \delta^d(\mathbf{r}-\mathbf{r}').\end{aligned}
\end{align}

We can use the wavefunctions and the creation/annihilation operators
to construct a new and interesting set of operators.  For simplicity,
suppose the particles are bosons, and let
\begin{equation}
  \hat{\psi}(\mathbf{r}) = \sum_\mu \varphi_\mu(\mathbf{r}) \, \hat{a}_\mu, \quad\;\; \hat{\psi}^\dagger(\mathbf{r}) = \sum_\mu \varphi_\mu^*(\mathbf{r}) \, \hat{a}_\mu^\dagger.
\end{equation}
Using the aforementioned wavefunction properties, we can derive the
inverse relations
\begin{equation}
  \hat{a}_\mu = \int d^dr \; \varphi_\mu^*(\mathbf{r}) \, \hat{\psi}(\mathbf{r}), \quad\;\; \hat{a}_\mu^\dagger = \int d^dr \; \varphi_\mu(\mathbf{r}) \, \hat{\psi}^\dagger(\mathbf{r}).
\end{equation}
From the commutation relations for the bosonic $a_\mu$ and
$a_\mu^\dagger$ operators, we can show that
\begin{equation}
  \left[\hat{\psi}(\mathbf{r}), \hat{\psi}(\mathbf{r}')\right] = \left[\hat{\psi}^\dagger(\mathbf{r}), \hat{\psi}^\dagger(\mathbf{r}')\right] = 0, \quad \left[\hat{\psi}(\mathbf{r}), \hat{\psi}^\dagger(\mathbf{r}')\right] = \delta^d(\mathbf{r}-\mathbf{r}').
\end{equation}
In the original commutation relations, the operators for different
single-particle states commute; now, the operators for different
\textit{positions} commute.  A straightforward interpretion for the
operators $\hat{\psi}^\dagger(\mathbf{r})$ and
$\hat{\psi}(\mathbf{r})$ is that they respectively create and
annihilate one particle at a point $\mathbf{r}$ (rather than one
particle in a given eigenstate).

It is important to note that $\mathbf{r}$ here does not play the role
of an observable.  It is an \textit{index}, in the sense that each
$\mathbf{r}$ is associated with distinct $\hat{\psi}(\mathbf{r})$ and
$\hat{\psi}^\dagger(\mathbf{r})$ operators.  These
$\mathbf{r}$-dependent operators serve to generalize the classical
concept of a \textbf{field}.  In a classical field theory, each point
$\mathbf{r}$ is assigned a set of numbers corresponding to physical
quantities, such as the electric field components $E_x(\mathbf{r})$,
$E_y(\mathbf{r})$, and $E_z(\mathbf{r})$.  In the present case, each
$\mathbf{r}$ is assigned a set of quantum operators.  This kind of
quantum theory is called a \textbf{quantum field theory}.

We can use the $\hat{\psi}(\mathbf{r})$ and
$\hat{\psi}^\dagger(\mathbf{r})$ operators to write second quantized
observables in a way that is independent of the choice of
single-particle basis wavefunctions.  As discussed in the
\hyperref[sec:second_quant_op]{previous section}, given a Hermitian
single-particle operator $\hat{A}_1$ we can define a multi-particle
observable $\hat{A} = \sum_{\mu\nu} \hat{a}^\dagger_\mu A_{\mu\nu}
\hat{a}_\nu$, where $A_{\mu\nu} =
\langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle$.  This multi-particle
observable can be re-written as
\begin{equation}
  \hat{A} = \int d^dr \,d^dr' \;\hat{\psi}^\dagger(\mathbf{r})
  \;\langle \mathbf{r}|\hat{A}_1|\mathbf{r}'\rangle \; \hat{\psi}(\mathbf{r}'),
\end{equation}
which makes no explicit reference to the single-particle basis states.

For example, consider the familiar single-particle Hamiltonian
describing a particle in a potential $V(\mathbf{r})$:
\begin{equation}
  \hat{H}_1 = \hat{T}_1 + \hat{V}_1, \;\;\; \hat{T}_1 = \frac{|\hat{\mathbf{p}}|^2}{2m}, \;\;\; \hat{V}_1 = V(\hat{\mathbf{r}}),
\end{equation}
where $\hat{\mathbf{r}}$ and $\hat{\mathbf{p}}$ are position and
momentum operators (single-particle observables).  The corresponding
second quantized operators for the kinetic energy and potential energy
are
\begin{align}
  \begin{aligned}\hat{T} &= \frac{\hbar^2}{2m} \int d^dr\; d^dr'\; \hat{\psi}^\dagger(\mathbf{r}) \left(\int\frac{d^dk}{(2\pi)^d} \; |\mathbf{k}|^2 \; e^{i\mathbf{k}\cdot(\mathbf{r}-\mathbf{r}')}\right) \; \hat{\psi}(\mathbf{r}') \\ &= \frac{\hbar^2}{2m} \int d^d r\; \nabla \hat{\psi}^\dagger (\mathbf{r}) \, \cdot \, \nabla \hat{\psi}(\mathbf{r}) \\ \hat{V} &= \int d^dr \;\hat{\psi}^\dagger(\mathbf{r}) \;V(\mathbf{r}) \; \hat{\psi}(\mathbf{r}).\end{aligned}
\end{align}
(In going from the first to the second line, we performed integrations
by parts.)  This result is strongly reminiscent of the expression for
the expected kinetic and potential energies in single-particle quantum
mechanics:
\begin{equation}
  \langle T\rangle = \frac{\hbar^2}{2m} \int d^d r \left|\nabla\psi(\mathbf{r})\right|^2, \;\;\; \langle V\rangle = \int d^dr \; V(\mathbf{r}) \; |\psi(\mathbf{r})|^2,
\end{equation}
where $\psi(\mathbf{r})$ is the single-particle wavefunction.

How are the particle creation and annihilation operators related to
the classical notion of ``the value of a field at point
$\mathbf{r}$'', like an electric field $\mathbf{E}(\mathbf{r})$ or
magnetic field $\mathbf{B}(\mathbf{r})$?  Field variables are
measurable quantities, and should be described by Hermitian operators.
As we have just seen, Hermitian operators corresponding to the kinetic
and potential energy can be constructed via \textit{products} of
$\hat{\psi}^\dagger(\mathbf{r})$ with $\hat{\psi}(\mathbf{r})$.  But
there is another type of Hermitian operator that we can construct by
taking \textit{linear combinations} of of
$\hat{\psi}^\dagger(\mathbf{r})$ with $\hat{\psi}(\mathbf{r})$.  One
example is
\begin{equation*}
  \psi(\mathbf{r}) + \psi(\mathbf{r})^\dagger.
\end{equation*}
Other possible Hermitian operators have the form
\begin{equation}
  F(\mathbf{r}) = \int d^dr' \Big(f(\mathbf{r},\mathbf{r}') \hat{\psi}(\mathbf{r}) + f^*(\mathbf{r},\mathbf{r}') \hat{\psi}^\dagger(\mathbf{r}') \Big),
  \label{fieldop}
\end{equation}
where $f(\mathbf{r},\mathbf{r}')$ is some complex function.  As we
shall see, it is this type of Hermitian operator that corresponds to
the classical notion of a field variable like an electric or magnetic
field.

In the next two sections, we will try to get a better understanding of
the relationship between classical fields and \textit{bosonic} quantum
fields.  (For fermionic quantum fields, the situation is more
complicated; they cannot be related to classical fields of the sort we
are familiar with, for reasons that lie outside the scope of this
course.)

\subsection{Revisiting the harmonic oscillator}
\label{sec:ho}

Before delving into the links between classical fields and bosonic
quantum fields, it is first necessary to revisit the harmonic
oscillator, to see how the concept of a \textbf{mode of oscillation}
carries over from classical to quantum mechanics.

A classical harmonic oscillator is described by the Hamiltonian
\begin{equation}
  H(x,p) = \frac{p^2}{2m} + \frac{1}{2}m\omega^2x^2,
  \label{Hclass}
\end{equation}
where $x$ is the ``position'' of the oscillator, which we call the
\textbf{oscillator variable}; $p$ is the corresponding momentum
variable; $m$ is the mass; and $\omega$ is the natural frequency of
oscillation.  We know that the classical equation of motion has the
general form
\begin{equation}
  x(t) = \mathcal{A}\, e^{-i\omega t} + \mathcal{A}^*\, e^{i\omega t}.
  \label{xt0}
\end{equation}
This describes an oscillation of frequency $\omega$.  It is
parameterized by the \textbf{mode amplitude} $\mathcal{A}$, a complex
number that determines the magnitude and phase of the oscillation.

For the quantum harmonic oscillator, $x$ and $p$ are replaced by the
Hermitian operators $\hat{x}$ and $\hat{p}$.  From these, the
operators $\hat{a}$ and $\hat{a}^\dagger$ can be defined:
\begin{align}
  \left\{
  \begin{aligned}
  \hat{a} &= \sqrt{\frac{m\omega}{2\hbar}} \left(\hat{x} + \frac{i\hat{p}}{m\omega}\right), \\
  \hat{a}^\dagger &= \sqrt{\frac{m\omega}{2\hbar}} \left(\hat{x} - \frac{i\hat{p}}{m\omega}\right).
  \end{aligned}\right. \quad
  \Leftrightarrow\quad\left\{
  \begin{aligned}
    \hat{x} &= \;\;\;\;\sqrt{\frac{\hbar}{2m\omega}}
    \, \left(\hat{a}+\hat{a}^\dagger\right) \\
    \hat{p} &= -i \sqrt{\frac{m\omega\hbar}{2}}
    \, \left(\hat{a}-\hat{a}^\dagger\right).
  \end{aligned}\right.
  \label{create_annihilate}
\end{align}
We can then show that
\begin{equation}
  \left[\,\hat{a}\,,\,\hat{a}^\dagger\,\right] = 1, \;\;\;
  \hat{H} = \hbar\omega\left(\hat{a}^\dagger\hat{a}+\frac{1}{2}\right),
  \label{create_annihilate_qho}
\end{equation}
and from these the energy spectrum of the quantum harmonic oscillator
can be derived.  These facts should have been covered in an earlier
course.

Here, we are interested in how the creation and annihilation operators
relate to the \textit{dynamics} of the quantum harmonic oscillator.
In the Heisenberg picture, with $t = 0$ as the reference time, we
define the time-dependent operator
\begin{equation}
  \hat{x}(t) = \hat{U}^\dagger(t) \,\hat{x}\, \hat{U}(t), \;\;\;
  \hat{U}(t) \equiv \exp\left(-\frac{i}{\hbar}\hat{H}t\right).
\end{equation}
We will adopt the convention that all operators written with an
explicit time dependence are Heisenberg picture operators, while
operators without an explicit time dependence are Schr\"odinger
picture operators; hence, $\hat{x} \equiv \hat{x}(0)$.  The Heisenberg
picture creation and annihilation operators, $\hat{a}^\dagger(t)$ and
$\hat{a}(t)$, are related to $\hat{x}(t)$ by
\begin{equation}
  \hat{x}(t) = \sqrt{\frac{\hbar}{2m\omega}} \, \Big(\hat{a}(t)+\hat{a}^\dagger(t)\Big).
  \label{xt1}
\end{equation}
The Heisenberg equation for the annihilation operator is
\begin{align}
  \begin{aligned}
  \frac{d\hat{a}(t)}{dt} &= \frac{i}{\hbar} \left[\hat{H},\hat{a}(t)\right] \\
  &= \frac{i}{\hbar} \,\hat{U}^\dagger(t) \left[\hat{H},\hat{a}\right] \hat{U}(t) \\
  &= \frac{i}{\hbar} \,\hat{U}^\dagger(t) \Big(-\hbar\omega \hat{a}\Big) \hat{U}(t) \\
  &= -i\omega \hat{a}(t).
  \end{aligned}
  \label{heisenbergeq}
\end{align}
Hence, the solution for this differential equation is
\begin{equation}
  \hat{a}(t) = \hat{a} \, e^{-i\omega t},
  \label{at}
\end{equation}
and Eq.~\eqref{xt1} becomes
\begin{equation}
  \hat{x}(t) = \sqrt{\frac{\hbar}{2m\omega}} \,
  \Big(\hat{a} \,e^{-i\omega t} \,+\,
  \hat{a}^\dagger\, e^{i\omega t}\Big).
  \label{xtquantum}
\end{equation}
This has exactly the same form as the classical oscillatory solution
\eqref{xt0}!  Comparing the two, we see that $\hat{a}$ times the scale
factor $\sqrt{\hbar/2m\omega}$ plays the role of the mode amplitude
$\mathcal{A}$.

Now, suppose we come at things from the opposite end.  Let's say we
start with creation and annihilation operators satisfying
Eq.~\eqref{create_annihilate_qho}, from which
Eqs.~\eqref{heisenbergeq}--\eqref{at} follow.  Using the creation and
annihilation operators, we would like to construct an observable that
corresponds to a classical oscillator variable.  A natural Hermitian
ansatz is
\begin{equation}
  \hat{x}(t) = 
  \mathcal{C} \left(\hat{a} \,e^{-i\omega t} \,+\,
  \hat{a}^\dagger\, e^{i\omega t}\right),
  \label{xtc}
\end{equation}
where $\mathcal{C}$ is a constant that is conventionally taken to be
real.

How might $\mathcal{C}$ be chosen?  A convenient way is to study the
behavior of the oscillator variable \textit{in the classical limit}.
The classical limit of a quantum harmonic oscillator is described by a
\textbf{coherent state}.  The details of how this state is defined
need not concern us for now (see Appendix E).  The most important
things to know are that (i) it can be denoted by $|\alpha\rangle$
where $\alpha \in \mathbb{C}$, (ii) it is an eigenstate of the
annihilation operator:
\begin{equation}
  \hat{a}|\alpha\rangle = \alpha|\alpha\rangle.
  \label{coherent}
\end{equation}
And (iii) its energy expectation value is
\begin{equation}
  \langle E\rangle = \ \langle\alpha|\hat{H}|\alpha\rangle = \hbar
  \omega \left(|\alpha|^2 + \frac{1}{2}\right)
  \overset{|\alpha|^2\rightarrow\infty}{\longrightarrow} \hbar \omega
  |\alpha|^2.
  \label{Havg1}
\end{equation}
When the system is in a coherent state, we can effectively substitute
the $\hat{a}$ and $\hat{a}^\dagger$ operators in Eq.~\eqref{xtc} with
the complex numbers $\alpha$ and $\alpha^*$, which gives a classical
trajectory
\begin{equation}
  x_{\mathrm{classical}}(t) = \mathcal{C} \left(\alpha \,e^{-i\omega t} \,+\,
  \alpha^*\, e^{i\omega t}\right).
  \label{xtc2}
\end{equation}
This trajectory has amplitude $2\mathcal{C}|\alpha|$.  At maximum
displacement, the classical momentum is zero, so the total energy of
the classical oscillator must be
\begin{equation}
  E_{\mathrm{classical}}
  = \frac{1}{2} m\omega^2 \Big(2\mathcal{C}|\alpha|\Big)^2
  = 2m\omega^2 \mathcal{C}^2 |\alpha|^2.
  \label{Eclassical}
\end{equation}
Equating the classical energy \eqref{Eclassical} to the coherent state
energy \eqref{Havg1} gives
\begin{equation}
  \mathcal{C} = \sqrt{\frac{\hbar}{2m\omega}},
\end{equation}
which is precisely the scale factor found in Eq.~\eqref{xtquantum}.

\subsection{A scalar boson field}

We now have the tools available to understand the connection between a
very simple classical field and its quantum counterpart.  Consider a
classical scalar field variable $f(x,t)$, defined in one spatial
dimension, whose classical equation of motion is the wave equation:
\begin{equation}
  \frac{\partial^2\! f(x,t)}{\partial x^2}
  = \frac{1}{c^2} \frac{\partial^2\! f(x,t)}{\partial t^2}.
  \label{waveeqn}
\end{equation}
The constant $c$ is a wave speed.  This sort of classical field arises
in many physical contexts, including the propagation of sound through
air, in which case $c$ is the speed of sound.

For simplicity, let us first assume that the field is defined within a
finite interval of length $L$, with periodic boundary conditions:
$f(x,t) \equiv f(x+L, t)$.  Solutions to the wave equation can be
described by the following ansatz:
\begin{equation}
  f(x,t) = \sum_n \left( \mathcal{A}_n\, \varphi_n(x) \, e^{-i\omega_n t}
  + \mathcal{A}_n^*\, \varphi_n^*(x) \, e^{i\omega_n t}\right).
  \label{fnorm}
\end{equation}
This ansatz describes a superposition of \textbf{normal modes}.  Each
normal mode (labelled $n$) varies harmonically in time with a mode
frequency $\omega_n$, and varies in space according to a complex mode
profile $\varphi_n(x)$; its overall magnitude and phase is specified
by the mode amplitude $\mathcal{A}_n$.  The mode profiles are
normalized according to some fixed convention, e.g.
\begin{equation}
  \int_0^L dx \, |\varphi_n(x)|^2 = 1.
\end{equation}

Substituting Eq.~\eqref{fnorm} into Eq.~\eqref{waveeqn}, and using
the periodic boundary conditions, gives
\begin{align}
  \varphi_n(x) = \frac{1}{\sqrt{L}}\, \exp\left(ik_n x\right), \;\;\;
  \omega_n = c k_n = \frac{2\pi c n}{L}, \;\;\; n \in \mathbb{Z}.
  \label{classical_modes}
\end{align}
These mode profiles are orthonormal:
\begin{equation}
  \int_0^L dx \, \varphi_m^*(x) \, \varphi_n(x) = \delta_{mn}.
\end{equation}
Each normal mode carries energy.  By analogy with the classical
harmonic oscillator---see Eqs.~\eqref{xtc2}--\eqref{Eclassical}---we
assume that the energy density (i.e., energy per unit length) is
proportional to the square of the field variable.  Let it have the
form
\begin{equation}
  U(x) = 2 \rho \sum_n|\mathcal{A}_n|^2 \, |\varphi_n(x)|^2,
  \label{Edensity}
\end{equation}
where $\rho$ is some parameter that has to be derived from the
underlying physical context.  For example, for acoustic modes, $\rho$
is the mass density of the underlying acoustic medium; in the next
chapter, we will see a concrete example involving the energy density
of an electromagnetic mode.  From Eq.~\eqref{Edensity}, the total
energy is
\begin{equation}
  E = \int_0^L dx \; U(x) = 2  \rho \sum_n |\mathcal{A}_n|^2.
  \label{classical_energy}
\end{equation}

To quantize the classical field, we treat each normal mode as an
independent oscillator, with creation and annihilation operators
$\hat{a}_n^\dagger$ and $\hat{a}_n$ satisfying
\begin{equation}
  \big[\,\hat{a}_m\,,\, \hat{a}_n^\dagger\big] = \delta_{mn}, \;\;\;
  \big[\,\hat{a}_m\,,\, \hat{a}_n\big] =
  \big[\,\hat{a}_m^\dagger\,,\, \hat{a}_n^\dagger\big] = 0.
\end{equation}
We then take the Hamiltonian to be that of a set of independent
harmonic oscillators:
\begin{equation}
  \hat{H} = \sum_n \hbar \omega_n \hat{a}_n^\dagger \hat{a}_n + E_0,
\end{equation}
where $E_0$ is the ground-state energy.  Just like in the previous
section, we can define a Heisenberg-picture annihilation operator, and
solving its Heisenberg equation yields
\begin{equation}
  \hat{a}_n(t) = \hat{a}_n e^{-i\omega_n t}.
\end{equation}
We then define a Schr\"odinger picture Hermitian operator of the form
\begin{equation}
  \hat{f}(x) = \sum_n \mathcal{C}_n \Big(\hat{a}_n \varphi_n(x)
  + \hat{a}_n^\dagger \varphi_n^*(x) \Big),
\end{equation}
where $\mathcal{C}_n$ is a real constant (one for each normal mode).
The corresponding Heisenberg picture operator is
\begin{equation}
  \hat{f}(x,t) = \sum_n \mathcal{C}_n \Big(\hat{a}_n \varphi_n(x) \,e^{-i\omega_nt}
  + \hat{a}_n^\dagger \varphi_n^*(x) \, e^{i\omega_nt} \Big),
  \label{fxt}
\end{equation}
which is the quantum version of the classical solution
\eqref{fnorm}.

To determine the $\mathcal{C}_n$ scale factors, we consider the
classical limit.  The procedure is a straightfoward generalization of
the harmonic oscillator case discussed in Section~\ref{sec:ho}.  We
introduce a state $|\alpha\rangle$ that is a coherent state for all
the normal modes; i.e., for any given $n$,
\begin{equation}
  \hat{a}_n |\alpha\rangle = \alpha_n |\alpha\rangle
\end{equation}
for some $\alpha_n \in \mathbb{C}$.  The energy expectation value is
\begin{equation}
  \langle E\rangle = \sum_n \hbar \omega_n |\alpha_n|^2.
  \label{Ecoherent_field}
\end{equation}
In the coherent state, the $\hat{a}_n$ and $\hat{a}_n^\dagger$
operators in Eq.~\eqref{fxt} can be replaced with $\alpha_n$ and
$\alpha_n^*$ respectively.  Hence, we identify $\mathcal{C}_n
\alpha_n$ as the classical mode amplitude $\mathcal{A}_n$ in
Eq.~\eqref{fnorm}.  In order for the classical energy
\eqref{classical_energy} to match the coherent state energy
\eqref{Ecoherent_field}, we need
\begin{equation}
  2\rho |\mathcal{A}_n|^2 = 2 \rho |\mathcal{C}_n\alpha_n|^2
  = \hbar \omega_n |\alpha_n|^2 \quad \Rightarrow \quad
  \mathcal{C}_n = \sqrt{\frac{\hbar\omega_n}{2\rho}}.
\end{equation}
Hence, the appropriate field operator is
\begin{equation}
  \hat{f}(x,t) = \sum_n \sqrt{\frac{\hbar\omega_n}{2\rho}}
  \Big(\hat{a}_n \varphi_n(x) \,e^{-i\omega_nt}
  + \hat{a}_n^\dagger \varphi_n^*(x) \, e^{i\omega_nt} \Big).
\end{equation}
Returning to the Schr\"odinger picture, and using the explicit mode
profiles from Eq.~\eqref{classical_modes}, we get
\begin{equation}
  \hat{f}(x) = \sum_n \sqrt{\frac{\hbar\omega_n}{2\rho L}}
  \Big(\hat{a}_n e^{ik_n x}
  + \hat{a}_n^\dagger e^{-ik_n x} \Big).
\end{equation}

Finally, if we are interested in the infinite-$L$ limit, we can
convert the sum over $n$ into an integral.
The result is
\begin{equation}
  \hat{f}(x) = \int dk\; \sqrt{\frac{\hbar\omega(k)}{4\pi\rho}}
  \Big(\hat{a}(k)\, e^{ik x} + \hat{a}^\dagger(k)\, e^{-ik x} \Big),
\end{equation}
where $\hat{a}(k)$ denotes a rescaled annihilation operator defined by
$\hat{a}_n \rightarrow \sqrt{2\pi/L}\; \hat{a}(k)$, satisfying
\begin{align}
  \Big[\,\hat{a}(k)\,,\, \hat{a}^\dagger(k')\,\Big] = \delta(k-k').
\end{align}

\subsection{Looking ahead}

In the next chapter, we will use these ideas to formulate a quantum
theory of electromagnetism.  This is a bosonic quantum field theory in
which the creation and annihilation operators act upon particles
called \textbf{photons}---the elementary particles of light.  Linear
combinations of these photon operators can be used to define Hermitian
field operators that correspond to the classical electromagnetic field
variables.  In the classical limit, the quantum field theory reduces
to Maxwell's theory of the electromagnetic field.

It is hard to overstate the importance of quantum field theories in
physics.  At a fundamental level, all elementary particles currently
known to humanity can be described using a quantum field theory called
the Standard Model.  These particles are roughly divided into two
categories.  The first consists of ``force-carrying'' particles:
photons (which carry the electromagnetic force), gluons (which carry
the strong nuclear force), and the $W/Z$ bosons (which carry the weak
nuclear force); these particles are excitations of bosonic quantum
fields, similar to the one described in the previous section.  The
second category consists of ``particles of matter'', such as
electrons, quarks, and neutrinos; these are excitations of
\textit{fermionic} quantum fields, whose creation and annihilation
operators obey anticommutation relations.

As Wilczek [\ref{cite:wilczek}] has pointed out, the modern picture of
fundamental physics bears a striking resemblence to the old idea of
``luminiferous ether'': a medium filling all of space and time, whose
vibrations are physically-observable light waves.  The key difference,
as we now understand, is that the ether is not a classical medium, but
one obeying the rules of quantum mechanics.  (Another difference,
which we have not discussed so far, is that modern field theories can
be made compatible with relativity.)

It is quite compelling to think of fields, not individual particles,
as the fundamental objects in the universe.  This point of view
``explains'', in a sense, why all particles of the same type have the
same properties (e.g., why all electrons in the universe have exactly
the same mass).  The particles themselves are not fundamental; they
are excitations of deeper, more fundamental entities---quantum fields!

\section*{Exercises}

\begin{enumerate}
\item Consider a system of two identical particles.  Each
  single-particle Hilbert space $\mathscr{H}^{(1)}$ is spanned by a
  basis $\{|\mu_i\}$.  The exchange operator is defined on
  $\mathscr{H}^{(2)} = \mathscr{H}^{(1)} \otimes \mathscr{H}^{(1)}$ by
  \begin{equation}
    P \Big (\sum_{ij} \psi_{ij} |\mu_i\rangle|\mu_j\rangle \Big)
    \;\equiv\;  \sum_{ij} \psi_{ij} |\mu_j\rangle|\mu_i\rangle.
  \end{equation}
  Prove that $\hat{P}$ is linear, unitary, and Hermitian.  Moreover,
  prove that the operation is basis-independent: i.e., given any other
  basis $\{\nu_j\}$ that spans $\mathscr{H}^{(1)}$,
  \begin{equation}
    P \Big (\sum_{ij} \varphi_{ij} |\nu_i\rangle|\nu_j\rangle \Big)
    \;=\;  \sum_{ij} \varphi_{ij} |\nu_j\rangle|\nu_i\rangle.
  \end{equation}
  \label{ex:1}

\item
  Prove that the exchange operator commutes with the Hamiltonian
  \begin{equation}
    \hat{H} = - \frac{\hbar^2}{2m_e} \Big(\nabla_1^2 + \nabla^2_2\Big) + \frac{e^2}{4\pi\varepsilon_0|\mathbf{r}_1 - \mathbf{r}_2|}.
  \end{equation}
  \label{ex:2}

\item
  An $N$-boson state can be written as
  \begin{equation}
    |\phi_1,\phi_2,\dots,\phi_N\rangle = \mathcal{N} \sum_p \Big(|\phi_{p(1)}\rangle  |\phi_{p(2)}\rangle  |\phi_{p(3)}\rangle  \cdots  |\phi_{p(N)}\rangle\Big).
  \end{equation}
  Prove that the normalization constant is
  \begin{equation}
    \mathcal{N} = \sqrt{\frac{1}{N!\prod_\mu n_\mu!}},
  \end{equation}
  where $n_\mu$ denotes the number of particles occupying the
  single-particle state $\mu$.
  \label{ex:boson_norm}

\item $\mathscr{H}_{S}^{(N)}$ and $\mathscr{H}_{A}^{(N)}$ denote the
  Hilbert spaces of $N$-particle states that are totally symmetric and
  totally antisymmetric under exchange, respectively.  Prove that
  \begin{align}
    \mathrm{dim}\left(\mathscr{H}_{S}^{(N)}\right) &= \frac{(d+N-1)!}{N!(d-1)!}, \\
    \mathrm{dim}\left(\mathscr{H}_{A}^{(N)}\right) &= \frac{d!}{N!(d-N)!}.
  \end{align}

\item
  Prove that for boson creation and annihilation operators, $[\hat{a}_\mu,\hat{a}_\nu] = [\hat{a}_\mu^\dagger,\hat{a}_\nu^\dagger] = 0$.
  \label{ex:boson_commutators}

\item
  Let $\hat{A}_1$ be an observable (Hermitian operator) for
  single-particle states.  Given a single-particle basis
  $\{|\varphi_1\rangle,|\varphi_2\rangle,\dots\}$, define the
  bosonic multi-particle observable
  \begin{equation}
    \hat{A} = \sum_{\mu\nu} \,a^\dagger_\mu \; \langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle \; a_\nu,
  \end{equation}
  where $a_\mu^\dagger$ and $a_\mu$ are creation and annihilation
  operators satisfying the usual bosonic commutation relations,
  $[a_\mu,a_\nu] = 0$ and $[a_\mu,a_\nu^\dagger] = \delta_{\mu\nu}$.
  Prove that $\hat{A}$ commutes with the total number operator:
  \begin{equation}
    \Big[\hat{A}, \sum_\mu a^\dagger_\mu a_\mu \Big] = 0.
  \end{equation}
  Next, repeat the proof for a fermionic multi-particle observable
  \begin{equation}
    \hat{A} = \sum_{\mu\nu} \,c^\dagger_\mu \; \langle\varphi_\mu|\hat{A}_1|\varphi_\nu\rangle \; c_\nu,
  \end{equation}
  where $c_\mu^\dagger$ and $c_\mu$ are creation and annihilation
  operators satisfying the fermionic anticommutation relations,
  $\{c_\mu,c_\nu\} = 0$ and $\{c_\mu,c_\nu^\dagger\} = \delta_{\mu\nu}$.
  In this case, prove that
  \begin{equation}
    \Big[\hat{A}, \sum_\mu c^\dagger_\mu c_\mu \Big] = 0.
  \end{equation}
  \label{ex:n_conserved}

\end{enumerate}

\section*{Further Reading}

\begin{enumerate}[[1{]}]
\item Bransden \& Joachain, \S10.1--10.5

\item Sakurai, \S6

\item J.~M.~Leinaas and J.~Myrheim, \textit{On the Theory of Identical Particles}, Nuovo Cimento B \textbf{37}, 1 (1977).
  \label{cite:leinaas}
  
\item F.~Wilczek, \textit{The Persistence of Ether}, Physics Today
  \textbf{52}, 11 (1999). [\href{http://physicstoday.scitation.org/doi/10.1063/1.882562}{link}]
\label{cite:wilczek}
\end{enumerate}

\end{document}


%% For decades after the discovery of quantum mechanics, the quantum
%% double-slit experiment was just a ``thought experiment'', meant to
%% illustrate the features of quantum mechanics that had been uncovered
%% by other, more complicated experiments.  Nowadays, the most convenient
%% way to do the experiment is with light, using single-photon sources
%% and single-photon detectors.  Quantum interference has also been
%% demonstrated experimentally using electrons, neutrons, and even
%% large-scale particles such as buckyballs.
